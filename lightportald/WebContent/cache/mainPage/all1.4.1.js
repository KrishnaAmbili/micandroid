var JSON=JSON||{};(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}return null}}}());(function(ax,aB){function j(t,c,E){if(E===aB&&t.nodeType===1){E=t.getAttribute("data-"+c);if(typeof E==="string"){try{E=E==="true"?true:E==="false"?false:E==="null"?null:!R.isNaN(E)?parseFloat(E):ac.test(E)?R.parseJSON(E):E}catch(B){}R.data(t,c,E)}else{E=aB}}return E}function am(){return false}function K(){return true}function aZ(t,c,B){B[0].type=t;return R.event.handle.apply(c,B)}function C(aa){var X,W,V,U,T,P,S,E,Z,c,B,t=[];U=[];T=R.data(this,this.nodeType?"events":"__events__");if(typeof T==="function"){T=T.events}if(!(aa.liveFired===this||!T||!T.live||aa.button&&aa.type==="click")){if(aa.namespace){B=RegExp("(^|\\.)"+aa.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}aa.liveFired=this;var Y=T.live.slice(0);for(S=0;S<Y.length;S++){T=Y[S];T.origType.replace(aj,"")===aa.type?U.push(T.selector):Y.splice(S--,1)}U=R(aa.target).closest(U,aa.currentTarget);E=0;for(Z=U.length;E<Z;E++){c=U[E];for(S=0;S<Y.length;S++){T=Y[S];if(c.selector===T.selector&&(!B||B.test(T.namespace))){P=c.elem;V=null;if(T.preType==="mouseenter"||T.preType==="mouseleave"){aa.type=T.preType;V=R(aa.relatedTarget).closest(T.selector)[0]}if(!V||V!==P){t.push({elem:P,handleObj:T,level:c.level})}}}}E=0;for(Z=t.length;E<Z;E++){U=t[E];if(W&&U.level>W){break}aa.currentTarget=U.elem;aa.data=U.handleObj.data;aa.handleObj=U.handleObj;B=U.handleObj.origHandler.apply(U.elem,arguments);if(B===false||aa.isPropagationStopped()){W=U.level;if(B===false){X=false}if(aa.isImmediatePropagationStopped()){break}}}return X}}function ai(t,c){return(t&&t!=="*"?t+".":"")+c.replace(n,"`").replace(a3,"&")}function aM(t,c,E){if(R.isFunction(c)){return R.grep(t,function(S,P){return !!c.call(S,P,S)===E})}else{if(c.nodeType){return R.grep(t,function(P){return P===c===E})}else{if(typeof c==="string"){var B=R.grep(t,function(P){return P.nodeType===1});if(aR.test(c)){return R.filter(c,B,!E)}else{c=R.filter(c,B)}}}}return R.grep(t,function(P){return R.inArray(P,c)>=0===E})}function ay(t,c){var B=0;c.each(function(){if(this.nodeName===(t[B]&&t[B].nodeName)){var T=R.data(t[B++]),S=R.data(this,T);if(T=T&&T.events){delete S.handle;S.events={};for(var P in T){for(var E in T[P]){R.event.add(this,P,T[P][E],T[P][E].data)}}}}})}function aE(t,c){c.src?R.ajax({url:c.src,async:false,dataType:"script"}):R.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function Q(t,c,E){var B=c==="width"?t.offsetWidth:t.offsetHeight;if(E==="border"){return B}R.each(c==="width"?af:G,function(){E||(B-=parseFloat(R.css(t,"padding"+this))||0);if(E==="margin"){B+=parseFloat(R.css(t,"margin"+this))||0}else{B-=parseFloat(R.css(t,"border"+this+"Width"))||0}});return B}function u(t,c,E,B){if(R.isArray(c)&&c.length){R.each(c,function(S,P){E||q.test(t)?B(t,P):u(t+"["+(typeof P==="object"||R.isArray(P)?S:"")+"]",P,E,B)})}else{if(!E&&c!=null&&typeof c==="object"){R.isEmptyObject(c)?B(t,""):R.each(c,function(S,P){u(t+"["+S+"]",P,E,B)})}else{B(t,c)}}}function ao(t,c){var B={};R.each(A.concat.apply([],A.slice(0,c)),function(){B[this]=t});return B}function m(t){if(!g[t]){var c=R("<"+t+">").appendTo("body"),B=c.css("display");c.remove();if(B==="none"||B===""){B="block"}g[t]=B}return g[t]}function aW(c){return R.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var I=ax.document,R=function(){function bj(){if(!bi.isReady){try{I.documentElement.doScroll("left")}catch(bk){setTimeout(bj,1);return}bi.ready()}}var bi=function(bk,bl){return new bi.fn.init(bk,bl)},bh=ax.jQuery,bg=ax.$,bf,bd=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,ba=/\S/,bb=/^\s+/,a7=/\s+$/,V=/\W/,ab=/\d/,a6=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,aa=/^[\],:{}\s]*$/,T=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,W=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,U=/(?:^|:|,)(?:\s*\[)+/g,P=/(webkit)[ \/]([\w.]+)/,be=/(opera)(?:.*version)?[ \/]([\w.]+)/,bc=/(msie) ([\w.]+)/,a8=/(mozilla)(?:.*? rv:([\w.]+))?/,a9=navigator.userAgent,a5=false,a4=[],Y,S=Object.prototype.toString,X=Object.prototype.hasOwnProperty,E=Array.prototype.push,B=Array.prototype.slice,t=String.prototype.trim,Z=Array.prototype.indexOf,c={};bi.fn=bi.prototype={init:function(bl,bn){var bk,bo,bm;if(!bl){return this}if(bl.nodeType){this.context=this[0]=bl;this.length=1;return this}if(bl==="body"&&!bn&&I.body){this.context=I;this[0]=I.body;this.selector="body";this.length=1;return this}if(typeof bl==="string"){if((bk=bd.exec(bl))&&(bk[1]||!bn)){if(bk[1]){bm=bn?bn.ownerDocument||bn:I;if(bo=a6.exec(bl)){if(bi.isPlainObject(bn)){bl=[I.createElement(bo[1])];bi.fn.attr.call(bl,bn,true)}else{bl=[bm.createElement(bo[1])]}}else{bo=bi.buildFragment([bk[1]],[bm]);bl=(bo.cacheable?bo.fragment.cloneNode(true):bo.fragment).childNodes}return bi.merge(this,bl)}else{if((bo=I.getElementById(bk[2]))&&bo.parentNode){if(bo.id!==bk[2]){return bf.find(bl)}this.length=1;this[0]=bo}this.context=I;this.selector=bl;return this}}else{if(!bn&&!V.test(bl)){this.selector=bl;this.context=I;bl=I.getElementsByTagName(bl);return bi.merge(this,bl)}else{return !bn||bn.jquery?(bn||bf).find(bl):bi(bn).find(bl)}}}else{if(bi.isFunction(bl)){return bf.ready(bl)}}if(bl.selector!==aB){this.selector=bl.selector;this.context=bl.context}return bi.makeArray(bl,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return B.call(this,0)},get:function(bk){return bk==null?this.toArray():bk<0?this.slice(bk)[0]:this[bk]},pushStack:function(bl,bm,bk){var bn=bi();bi.isArray(bl)?E.apply(bn,bl):bi.merge(bn,bl);bn.prevObject=this;bn.context=this.context;if(bm==="find"){bn.selector=this.selector+(this.selector?" ":"")+bk}else{if(bm){bn.selector=this.selector+"."+bm+"("+bk+")"}}return bn},each:function(bk,bl){return bi.each(this,bk,bl)},ready:function(bk){bi.bindReady();if(bi.isReady){bk.call(I,bi)}else{a4&&a4.push(bk)}return this},eq:function(bk){return bk===-1?this.slice(bk):this.slice(bk,+bk+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(B.apply(this,arguments),"slice",B.call(arguments).join(","))},map:function(bk){return this.pushStack(bi.map(this,function(bm,bl){return bk.call(bm,bl,bm)}))},end:function(){return this.prevObject||bi(null)},push:E,sort:[].sort,splice:[].splice};bi.fn.init.prototype=bi.fn;bi.extend=bi.fn.extend=function(){var bk,bs,bp,bm,bo,bq=arguments[0]||{},bn=1,bl=arguments.length,br=false;if(typeof bq==="boolean"){br=bq;bq=arguments[1]||{};bn=2}if(typeof bq!=="object"&&!bi.isFunction(bq)){bq={}}if(bl===bn){bq=this;--bn}for(;bn<bl;bn++){if((bk=arguments[bn])!=null){for(bs in bk){bp=bq[bs];bm=bk[bs];if(bq!==bm){if(br&&bm&&(bi.isPlainObject(bm)||(bo=bi.isArray(bm)))){if(bo){bo=false;bp=bp&&bi.isArray(bp)?bp:[]}else{bp=bp&&bi.isPlainObject(bp)?bp:{}}bq[bs]=bi.extend(br,bp,bm)}else{if(bm!==aB){bq[bs]=bm}}}}}}return bq};bi.extend({noConflict:function(bk){ax.$=bg;if(bk){ax.jQuery=bh}return bi},isReady:false,readyWait:1,ready:function(bl){bl===true&&bi.readyWait--;if(!bi.readyWait||bl!==true&&!bi.isReady){if(!I.body){return setTimeout(bi.ready,1)}bi.isReady=true;if(!(bl!==true&&--bi.readyWait>0)){if(a4){var bm=0,bk=a4;for(a4=null;bl=bk[bm++];){bl.call(I,bi)}bi.fn.trigger&&bi(I).trigger("ready").unbind("ready")}}}},bindReady:function(){if(!a5){a5=true;if(I.readyState==="complete"){return setTimeout(bi.ready,1)}if(I.addEventListener){I.addEventListener("DOMContentLoaded",Y,false);ax.addEventListener("load",bi.ready,false)}else{if(I.attachEvent){I.attachEvent("onreadystatechange",Y);ax.attachEvent("onload",bi.ready);var bk=false;try{bk=ax.frameElement==null}catch(bl){}I.documentElement.doScroll&&bk&&bj()}}}},isFunction:function(bk){return bi.type(bk)==="function"},isArray:Array.isArray||function(bk){return bi.type(bk)==="array"},isWindow:function(bk){return bk&&typeof bk==="object"&&"setInterval" in bk},isNaN:function(bk){return bk==null||!ab.test(bk)||isNaN(bk)},type:function(bk){return bk==null?String(bk):c[S.call(bk)]||"object"},isPlainObject:function(bk){if(!bk||bi.type(bk)!=="object"||bk.nodeType||bi.isWindow(bk)){return false}if(bk.constructor&&!X.call(bk,"constructor")&&!X.call(bk.constructor.prototype,"isPrototypeOf")){return false}for(var bl in bk){}return bl===aB||X.call(bk,bl)},isEmptyObject:function(bk){for(var bl in bk){return false}return true},error:function(bk){throw bk},parseJSON:function(bk){if(typeof bk!=="string"||!bk){return null}bk=bi.trim(bk);if(aa.test(bk.replace(T,"@").replace(W,"]").replace(U,""))){return ax.JSON&&ax.JSON.parse?ax.JSON.parse(bk):(new Function("return "+bk))()}else{bi.error("Invalid JSON: "+bk)}},noop:function(){},globalEval:function(bl){if(bl&&ba.test(bl)){var bm=I.getElementsByTagName("head")[0]||I.documentElement,bk=I.createElement("script");bk.type="text/javascript";if(bi.support.scriptEval){bk.appendChild(I.createTextNode(bl))}else{bk.text=bl}bm.insertBefore(bk,bm.firstChild);bm.removeChild(bk)}},nodeName:function(bk,bl){return bk.nodeName&&bk.nodeName.toUpperCase()===bl.toUpperCase()},each:function(bm,bp,bl){var bq,bn=0,bo=bm.length,bk=bo===aB||bi.isFunction(bm);if(bl){if(bk){for(bq in bm){if(bp.apply(bm[bq],bl)===false){break}}}else{for(;bn<bo;){if(bp.apply(bm[bn++],bl)===false){break}}}}else{if(bk){for(bq in bm){if(bp.call(bm[bq],bq,bm[bq])===false){break}}}else{for(bl=bm[0];bn<bo&&bp.call(bl,bn,bl)!==false;bl=bm[++bn]){}}}return bm},trim:t?function(bk){return bk==null?"":t.call(bk)}:function(bk){return bk==null?"":bk.toString().replace(bb,"").replace(a7,"")},makeArray:function(bl,bm){var bk=bm||[];if(bl!=null){var bn=bi.type(bl);bl.length==null||bn==="string"||bn==="function"||bn==="regexp"||bi.isWindow(bl)?E.call(bk,bl):bi.merge(bk,bl)}return bk},inArray:function(bl,bm){if(bm.indexOf){return bm.indexOf(bl)}for(var bk=0,bn=bm.length;bk<bn;bk++){if(bm[bk]===bl){return bk}}return -1},merge:function(bl,bn){var bk=bl.length,bo=0;if(typeof bn.length==="number"){for(var bm=bn.length;bo<bm;bo++){bl[bk++]=bn[bo]}}else{for(;bn[bo]!==aB;){bl[bk++]=bn[bo++]}}bl.length=bk;return bl},grep:function(bm,bp,bl){var bq=[],bn;bl=!!bl;for(var bo=0,bk=bm.length;bo<bk;bo++){bn=!!bp(bm[bo],bo);bl!==bn&&bq.push(bm[bo])}return bq},map:function(bm,bp,bl){for(var bq=[],bn,bo=0,bk=bm.length;bo<bk;bo++){bn=bp(bm[bo],bo,bl);if(bn!=null){bq[bq.length]=bn}}return bq.concat.apply([],bq)},guid:1,proxy:function(bl,bm,bk){if(arguments.length===2){if(typeof bm==="string"){bk=bl;bl=bk[bm];bm=aB}else{if(bm&&!bi.isFunction(bm)){bk=bm;bm=aB}}}if(!bm&&bl){bm=function(){return bl.apply(bk||this,arguments)}}if(bl){bm.guid=bl.guid=bl.guid||bm.guid||bi.guid++}return bm},access:function(bm,bp,bl,br,bn,bo){var bk=bm.length;if(typeof bp==="object"){for(var bq in bp){bi.access(bm,bq,bp[bq],br,bn,bl)}return bm}if(bl!==aB){br=!bo&&br&&bi.isFunction(bl);for(bq=0;bq<bk;bq++){bn(bm[bq],bp,br?bl.call(bm[bq],bq,bn(bm[bq],bp)):bl,bo)}return bm}return bk?bn(bm[0],bp):aB},now:function(){return(new Date).getTime()},uaMatch:function(bk){bk=bk.toLowerCase();bk=P.exec(bk)||be.exec(bk)||bc.exec(bk)||bk.indexOf("compatible")<0&&a8.exec(bk)||[];return{browser:bk[1]||"",version:bk[2]||"0"}},browser:{}});bi.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bk,bl){c["[object "+bl+"]"]=bl.toLowerCase()});a9=bi.uaMatch(a9);if(a9.browser){bi.browser[a9.browser]=true;bi.browser.version=a9.version}if(bi.browser.webkit){bi.browser.safari=true}if(Z){bi.inArray=function(bk,bl){return Z.call(bl,bk)}}if(!/\s/.test("\u00a0")){bb=/^[\s\xA0]+/;a7=/[\s\xA0]+$/}bf=bi(I);if(I.addEventListener){Y=function(){I.removeEventListener("DOMContentLoaded",Y,false);bi.ready()}}else{if(I.attachEvent){Y=function(){if(I.readyState==="complete"){I.detachEvent("onreadystatechange",Y);bi.ready()}}}}return ax.jQuery=ax.$=bi}();(function(){R.support={};var X=I.documentElement,V=I.createElement("script"),U=I.createElement("div"),T="script"+R.now();U.style.display="none";U.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var S=U.getElementsByTagName("*"),P=U.getElementsByTagName("a")[0],B=I.createElement("select"),E=B.appendChild(I.createElement("option"));if(!(!S||!S.length||!P)){R.support={leadingWhitespace:U.firstChild.nodeType===3,tbody:!U.getElementsByTagName("tbody").length,htmlSerialize:!!U.getElementsByTagName("link").length,style:/red/.test(P.getAttribute("style")),hrefNormalized:P.getAttribute("href")==="/a",opacity:/^0.55$/.test(P.style.opacity),cssFloat:!!P.style.cssFloat,checkOn:U.getElementsByTagName("input")[0].value==="on",optSelected:E.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};B.disabled=true;R.support.optDisabled=!E.disabled;V.type="text/javascript";try{V.appendChild(I.createTextNode("window."+T+"=1;"))}catch(t){}X.insertBefore(V,X.firstChild);if(ax[T]){R.support.scriptEval=true;delete ax[T]}try{delete V.test}catch(W){R.support.deleteExpando=false}X.removeChild(V);if(U.attachEvent&&U.fireEvent){U.attachEvent("onclick",function c(){R.support.noCloneEvent=false;U.detachEvent("onclick",c)});U.cloneNode(true).fireEvent("onclick")}U=I.createElement("div");U.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";X=I.createDocumentFragment();X.appendChild(U.firstChild);R.support.checkClone=X.cloneNode(true).cloneNode(true).lastChild.checked;R(function(){var Z=I.createElement("div");Z.style.width=Z.style.paddingLeft="1px";I.body.appendChild(Z);R.boxModel=R.support.boxModel=Z.offsetWidth===2;if("zoom" in Z.style){Z.style.display="inline";Z.style.zoom=1;R.support.inlineBlockNeedsLayout=Z.offsetWidth===2;Z.style.display="";Z.innerHTML="<div style='width:4px;'></div>";R.support.shrinkWrapBlocks=Z.offsetWidth!==2}Z.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var Y=Z.getElementsByTagName("td");R.support.reliableHiddenOffsets=Y[0].offsetHeight===0;Y[0].style.display="";Y[1].style.display="none";R.support.reliableHiddenOffsets=R.support.reliableHiddenOffsets&&Y[0].offsetHeight===0;Z.innerHTML="";I.body.removeChild(Z).style.display="none"});X=function(Z){var Y=I.createElement("div");Z="on"+Z;var aa=Z in Y;if(!aa){Y.setAttribute(Z,"return;");aa=typeof Y[Z]==="function"}return aa};R.support.submitBubbles=X("submit");R.support.changeBubbles=X("change");X=V=U=S=P=null}})();var a2={},ac=/^(?:\{.*\}|\[.*\])$/;R.extend({cache:{},uuid:0,expando:"jQuery"+R.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(t,c,S){if(R.acceptData(t)){t=t==ax?a2:t;var P=t.nodeType,E=P?t[R.expando]:null,B=R.cache;if(!(P&&!E&&typeof c==="string"&&S===aB)){if(P){E||(t[R.expando]=E=++R.uuid)}else{B=t}if(typeof c==="object"){if(P){B[E]=R.extend(B[E],c)}else{R.extend(B,c)}}else{if(P&&!B[E]){B[E]={}}}t=P?B[E]:B;if(S!==aB){t[c]=S}return typeof c==="string"?t[c]:t}}},removeData:function(B,c){if(R.acceptData(B)){B=B==ax?a2:B;var T=B.nodeType,S=T?B[R.expando]:B,P=R.cache,E=T?P[S]:S;if(c){if(E){delete E[c];T&&R.isEmptyObject(E)&&R.removeData(B)}}else{if(T&&R.support.deleteExpando){delete B[R.expando]}else{if(B.removeAttribute){B.removeAttribute(R.expando)}else{if(T){delete P[S]}else{for(var t in B){delete B[t]}}}}}}},acceptData:function(t){if(t.nodeName){var c=R.noData[t.nodeName.toLowerCase()];if(c){return !(c===true||t.getAttribute("classid")!==c)}}return true}});R.fn.extend({data:function(B,c){var U=null;if(typeof B==="undefined"){if(this.length){var T=this[0].attributes,S;U=R.data(this[0]);for(var P=0,t=T.length;P<t;P++){S=T[P].name;if(S.indexOf("data-")===0){S=S.substr(5);j(this[0],S,U[S])}}}return U}else{if(typeof B==="object"){return this.each(function(){R.data(this,B)})}}var E=B.split(".");E[1]=E[1]?"."+E[1]:"";if(c===aB){U=this.triggerHandler("getData"+E[1]+"!",[E[0]]);if(U===aB&&this.length){U=R.data(this[0],B);U=j(this[0],B,U)}return U===aB&&E[1]?this.data(E[0]):U}else{return this.each(function(){var W=R(this),V=[E[0],c];W.triggerHandler("setData"+E[1]+"!",V);R.data(this,B,c);W.triggerHandler("changeData"+E[1]+"!",V)})}},removeData:function(c){return this.each(function(){R.removeData(this,c)})}});R.extend({queue:function(t,c,E){if(t){c=(c||"fx")+"queue";var B=R.data(t,c);if(!E){return B||[]}if(!B||R.isArray(E)){B=R.data(t,c,R.makeArray(E))}else{B.push(E)}return B}},dequeue:function(t,c){c=c||"fx";var E=R.queue(t,c),B=E.shift();if(B==="inprogress"){B=E.shift()}if(B){c==="fx"&&E.unshift("inprogress");B.call(t,function(){R.dequeue(t,c)})}}});R.fn.extend({queue:function(t,c){if(typeof t!=="string"){c=t;t="fx"}if(c===aB){return R.queue(this[0],t)}return this.each(function(){var B=R.queue(this,t,c);t==="fx"&&B[0]!=="inprogress"&&R.dequeue(this,t)})},dequeue:function(c){return this.each(function(){R.dequeue(this,c)})},delay:function(t,c){t=R.fx?R.fx.speeds[t]||t:t;c=c||"fx";return this.queue(c,function(){var B=this;setTimeout(function(){R.dequeue(B,c)},t)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var aQ=/[\n\t]/g,au=/\s+/,d=/\r/g,aT=/^(?:href|src|style)$/,aG=/^(?:button|input)$/i,ah=/^(?:button|input|object|select|textarea)$/i,H=/^a(?:rea)?$/i,aD=/^(?:radio|checkbox)$/i;R.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};R.fn.extend({attr:function(t,c){return R.access(this,t,c,true,R.attr)},removeAttr:function(c){return this.each(function(){R.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(V){if(R.isFunction(V)){return this.each(function(W){var X=R(this);X.addClass(V.call(this,W,X.attr("class")))})}if(V&&typeof V==="string"){for(var U=(V||"").split(au),T=0,S=this.length;T<S;T++){var P=this[T];if(P.nodeType===1){if(P.className){for(var E=" "+P.className+" ",t=P.className,B=0,c=U.length;B<c;B++){if(E.indexOf(" "+U[B]+" ")<0){t+=" "+U[B]}}P.className=R.trim(t)}else{P.className=V}}}}return this},removeClass:function(B){if(R.isFunction(B)){return this.each(function(W){var V=R(this);V.removeClass(B.call(this,W,V.attr("class")))})}if(B&&typeof B==="string"||B===aB){for(var c=(B||"").split(au),U=0,T=this.length;U<T;U++){var S=this[U];if(S.nodeType===1&&S.className){if(B){for(var P=(" "+S.className+" ").replace(aQ," "),t=0,E=c.length;t<E;t++){P=P.replace(" "+c[t]+" "," ")}S.className=R.trim(P)}else{S.className=""}}}}return this},toggleClass:function(t,c){var E=typeof t,B=typeof c==="boolean";if(R.isFunction(t)){return this.each(function(S){var P=R(this);P.toggleClass(t.call(this,S,P.attr("class"),c),c)})}return this.each(function(){if(E==="string"){for(var U,T=0,P=R(this),S=c,V=t.split(au);U=V[T++];){S=B?S:!P.hasClass(U);P[S?"addClass":"removeClass"](U)}}else{if(E==="undefined"||E==="boolean"){this.className&&R.data(this,"__className__",this.className);this.className=this.className||t===false?"":R.data(this,"__className__")||""}}})},hasClass:function(t){t=" "+t+" ";for(var c=0,B=this.length;c<B;c++){if((" "+this[c].className+" ").replace(aQ," ").indexOf(t)>-1){return true}}return false},val:function(B){if(!arguments.length){var c=this[0];if(c){if(R.nodeName(c,"option")){var U=c.attributes.value;return !U||U.specified?c.value:c.text}if(R.nodeName(c,"select")){var T=c.selectedIndex;U=[];var S=c.options;c=c.type==="select-one";if(T<0){return null}var P=c?T:0;for(T=c?T+1:S.length;P<T;P++){var t=S[P];if(t.selected&&(R.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!R.nodeName(t.parentNode,"optgroup"))){B=R(t).val();if(c){return B}U.push(B)}}return U}if(aD.test(c.type)&&!R.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(d,"")}return aB}var E=R.isFunction(B);return this.each(function(Y){var W=R(this),X=B;if(this.nodeType===1){if(E){X=B.call(this,Y,W.val())}if(X==null){X=""}else{if(typeof X==="number"){X+=""}else{if(R.isArray(X)){X=R.map(X,function(Z){return Z==null?"":Z+""})}}}if(R.isArray(X)&&aD.test(this.type)){this.checked=R.inArray(W.val(),X)>=0}else{if(R.nodeName(this,"select")){var V=R.makeArray(X);R("option",this).each(function(){this.selected=R.inArray(R(this).val(),V)>=0});if(!V.length){this.selectedIndex=-1}}else{this.value=X}}}})}});R.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(t,c,S,P){if(!t||t.nodeType===3||t.nodeType===8){return aB}if(P&&c in R.attrFn){return R(t)[c](S)}P=t.nodeType!==1||!R.isXMLDoc(t);var E=S!==aB;c=P&&R.props[c]||c;var B=aT.test(c);if((c in t||t[c]!==aB)&&P&&!B){if(E){c==="type"&&aG.test(t.nodeName)&&t.parentNode&&R.error("type property can't be changed");if(S===null){t.nodeType===1&&t.removeAttribute(c)}else{t[c]=S}}if(R.nodeName(t,"form")&&t.getAttributeNode(c)){return t.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=t.getAttributeNode("tabIndex"))&&c.specified?c.value:ah.test(t.nodeName)||H.test(t.nodeName)&&t.href?0:aB}return t[c]}if(!R.support.style&&P&&c==="style"){if(E){t.style.cssText=""+S}return t.style.cssText}E&&t.setAttribute(c,""+S);if(!t.attributes[c]&&t.hasAttribute&&!t.hasAttribute(c)){return aB}t=!R.support.hrefNormalized&&P&&B?t.getAttribute(c,2):t.getAttribute(c);return t===null?aB:t}});var aj=/\.(.*)$/,M=/^(?:textarea|input|select)$/i,n=/\./g,a3=/ /g,r=/[^\w\s.|`]/g,e=function(c){return c.replace(r,"\\$&")},ae={focusin:0,focusout:0};R.event={add:function(Z,X,W,V){if(!(Z.nodeType===3||Z.nodeType===8)){if(R.isWindow(Z)&&Z!==ax&&!Z.frameElement){Z=ax}if(W===false){W=am}else{if(!W){return}}var U,T;if(W.handler){U=W;W=U.handler}if(!W.guid){W.guid=R.guid++}if(T=R.data(Z)){var P=Z.nodeType?"events":"__events__",S=T[P],E=T.handle;if(typeof S==="function"){E=S.handle;S=S.events}else{if(!S){Z.nodeType||(T[P]=T=function(){});T.events=S={}}}if(!E){T.handle=E=function(){return typeof R!=="undefined"&&!R.event.triggered?R.event.handle.apply(E.elem,arguments):aB}}E.elem=Z;X=X.split(" ");for(var Y=0,c;P=X[Y++];){T=U?R.extend({},U):{handler:W,data:V};if(P.indexOf(".")>-1){c=P.split(".");P=c.shift();T.namespace=c.slice(0).sort().join(".")}else{c=[];T.namespace=""}T.type=P;if(!T.guid){T.guid=W.guid}var B=S[P],t=R.event.special[P]||{};if(!B){B=S[P]=[];if(!t.setup||t.setup.call(Z,V,c,E)===false){if(Z.addEventListener){Z.addEventListener(P,E,false)}else{Z.attachEvent&&Z.attachEvent("on"+P,E)}}}if(t.add){t.add.call(Z,T);if(!T.handler.guid){T.handler.guid=W.guid}}B.push(T);R.event.global[P]=true}Z=null}}},global:{},remove:function(aa,X,W,V){if(!(aa.nodeType===3||aa.nodeType===8)){if(W===false){W=am}var U,T,P=0,S,E,Z,c,B,t,Y=aa.nodeType?"events":"__events__",a4=R.data(aa),ab=a4&&a4[Y];if(a4&&ab){if(typeof ab==="function"){a4=ab;ab=ab.events}if(X&&X.type){W=X.handler;X=X.type}if(!X||typeof X==="string"&&X.charAt(0)==="."){X=X||"";for(U in ab){R.event.remove(aa,U+X)}}else{for(X=X.split(" ");U=X[P++];){c=U;S=U.indexOf(".")<0;E=[];if(!S){E=U.split(".");U=E.shift();Z=RegExp("(^|\\.)"+R.map(E.slice(0).sort(),e).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(B=ab[U]){if(W){c=R.event.special[U]||{};for(T=V||0;T<B.length;T++){t=B[T];if(W.guid===t.guid){if(S||Z.test(t.namespace)){V==null&&B.splice(T--,1);c.remove&&c.remove.call(aa,t)}if(V!=null){break}}}if(B.length===0||V!=null&&B.length===1){if(!c.teardown||c.teardown.call(aa,E)===false){R.removeEvent(aa,U,a4.handle)}delete ab[U]}}else{for(T=0;T<B.length;T++){t=B[T];if(S||Z.test(t.namespace)){R.event.remove(aa,c,t.handler,T);B.splice(T--,1)}}}}}if(R.isEmptyObject(ab)){if(X=a4.handle){X.elem=null}delete a4.events;delete a4.handle;if(typeof a4==="function"){R.removeData(aa,Y)}else{R.isEmptyObject(a4)&&R.removeData(aa)}}}}}},trigger:function(X,V,U,T){var S=X.type||X;if(!T){X=typeof X==="object"?X[R.expando]?X:R.extend(R.Event(S),X):R.Event(S);if(S.indexOf("!")>=0){X.type=S=S.slice(0,-1);X.exclusive=true}if(!U){X.stopPropagation();R.event.global[S]&&R.each(R.cache,function(){this.events&&this.events[S]&&R.event.trigger(X,V,this.handle.elem)})}if(!U||U.nodeType===3||U.nodeType===8){return aB}X.result=aB;X.target=U;V=R.makeArray(V);V.unshift(X)}X.currentTarget=U;(T=U.nodeType?R.data(U,"handle"):(R.data(U,"__events__")||{}).handle)&&T.apply(U,V);T=U.parentNode||U.ownerDocument;try{if(!(U&&U.nodeName&&R.noData[U.nodeName.toLowerCase()])){if(U["on"+S]&&U["on"+S].apply(U,V)===false){X.result=false;X.preventDefault()}}}catch(P){}if(!X.isPropagationStopped()&&T){R.event.trigger(X,V,T,true)}else{if(!X.isDefaultPrevented()){var B;T=X.target;var E=S.replace(aj,""),t=R.nodeName(T,"a")&&E==="click",W=R.event.special[E]||{};if((!W._default||W._default.call(U,X)===false)&&!t&&!(T&&T.nodeName&&R.noData[T.nodeName.toLowerCase()])){try{if(T[E]){if(B=T["on"+E]){T["on"+E]=null}R.event.triggered=true;T[E]()}}catch(c){}if(B){T["on"+E]=B}R.event.triggered=false}}}},handle:function(B){var c,U,T,S;U=[];var P=R.makeArray(arguments);B=P[0]=R.event.fix(B||ax.event);B.currentTarget=this;c=B.type.indexOf(".")<0&&!B.exclusive;if(!c){T=B.type.split(".");B.type=T.shift();U=T.slice(0).sort();T=RegExp("(^|\\.)"+U.join("\\.(?:.*\\.)?")+"(\\.|$)")}B.namespace=B.namespace||U.join(".");S=R.data(this,this.nodeType?"events":"__events__");if(typeof S==="function"){S=S.events}U=(S||{})[B.type];if(S&&U){U=U.slice(0);S=0;for(var t=U.length;S<t;S++){var E=U[S];if(c||T.test(E.namespace)){B.handler=E.handler;B.data=E.data;B.handleObj=E;E=E.handler.apply(this,P);if(E!==aB){B.result=E;if(E===false){B.preventDefault();B.stopPropagation()}}if(B.isImmediatePropagationStopped()){break}}}}return B.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(t){if(t[R.expando]){return t}var c=t;t=R.Event(c);for(var E=this.props.length,B;E;){B=this.props[--E];t[B]=c[B]}if(!t.target){t.target=t.srcElement||I}if(t.target.nodeType===3){t.target=t.target.parentNode}if(!t.relatedTarget&&t.fromElement){t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement}if(t.pageX==null&&t.clientX!=null){c=I.documentElement;E=I.body;t.pageX=t.clientX+(c&&c.scrollLeft||E&&E.scrollLeft||0)-(c&&c.clientLeft||E&&E.clientLeft||0);t.pageY=t.clientY+(c&&c.scrollTop||E&&E.scrollTop||0)-(c&&c.clientTop||E&&E.clientTop||0)}if(t.which==null&&(t.charCode!=null||t.keyCode!=null)){t.which=t.charCode!=null?t.charCode:t.keyCode}if(!t.metaKey&&t.ctrlKey){t.metaKey=t.ctrlKey}if(!t.which&&t.button!==aB){t.which=t.button&1?1:t.button&2?3:t.button&4?2:0}return t},guid:100000000,proxy:R.proxy,special:{ready:{setup:R.bindReady,teardown:R.noop},live:{add:function(c){R.event.add(this,ai(c.origType,c.selector),R.extend({},c,{handler:C,guid:c.handler.guid}))},remove:function(c){R.event.remove(this,ai(c.origType,c.selector),c)}},beforeunload:{setup:function(t,c,B){if(R.isWindow(this)){this.onbeforeunload=B}},teardown:function(t,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};R.removeEvent=I.removeEventListener?function(t,c,B){t.removeEventListener&&t.removeEventListener(c,B,false)}:function(t,c,B){t.detachEvent&&t.detachEvent("on"+c,B)};R.Event=function(c){if(!this.preventDefault){return new R.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=R.now();this[R.expando]=true};R.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var c=this.originalEvent;if(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}},stopPropagation:function(){this.isPropagationStopped=K;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K;this.stopPropagation()},isDefaultPrevented:am,isPropagationStopped:am,isImmediatePropagationStopped:am};var F=function(t){var c=t.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){t.type=t.data;R.event.handle.apply(this,arguments)}}catch(B){}},p=function(c){c.type=c.data;R.event.handle.apply(this,arguments)};R.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,c){R.event.special[t]={setup:function(B){R.event.add(this,c,B&&B.selector?p:F,t)},teardown:function(B){R.event.remove(this,c,B&&B.selector?p:F)}}});if(!R.support.submitBubbles){R.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){R.event.add(this,"click.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="submit"||B==="image")&&R(c).closest("form").length){t.liveFired=aB;return aZ("submit",this,arguments)}});R.event.add(this,"keypress.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="text"||B==="password")&&R(c).closest("form").length&&t.keyCode===13){t.liveFired=aB;return aZ("submit",this,arguments)}})}else{return false}},teardown:function(){R.event.remove(this,".specialSubmit")}}}if(!R.support.changeBubbles){var al,b=function(t){var c=t.type,B=t.value;if(c==="radio"||c==="checkbox"){B=t.checked}else{if(c==="select-multiple"){B=t.selectedIndex>-1?R.map(t.options,function(E){return E.selected}).join("-"):""}else{if(t.nodeName.toLowerCase()==="select"){B=t.selectedIndex}}}return B},ag=function(t,c){var P=t.target,E,B;if(!(!M.test(P.nodeName)||P.readOnly)){E=R.data(P,"_change_data");B=b(P);if(t.type!=="focusout"||P.type!=="radio"){R.data(P,"_change_data",B)}if(!(E===aB||B===E)){if(E!=null||B){t.type="change";t.liveFired=aB;return R.event.trigger(t,c,P)}}}};R.event.special.change={filters:{focusout:ag,beforedeactivate:ag,click:function(t){var c=t.target,B=c.type;if(B==="radio"||B==="checkbox"||c.nodeName.toLowerCase()==="select"){return ag.call(this,t)}},keydown:function(t){var c=t.target,B=c.type;if(t.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||t.keyCode===32&&(B==="checkbox"||B==="radio")||B==="select-multiple"){return ag.call(this,t)}},beforeactivate:function(c){c=c.target;R.data(c,"_change_data",b(c))}},setup:function(){if(this.type==="file"){return false}for(var c in al){R.event.add(this,c+".specialChange",al[c])}return M.test(this.nodeName)},teardown:function(){R.event.remove(this,".specialChange");return M.test(this.nodeName)}};al=R.event.special.change.filters;al.focus=al.beforeactivate}I.addEventListener&&R.each({focus:"focusin",blur:"focusout"},function(t,c){function B(E){E=R.event.fix(E);E.type=c;return R.event.trigger(E,null,E.target)}R.event.special[c]={setup:function(){ae[c]++===0&&I.addEventListener(t,B,true)},teardown:function(){--ae[c]===0&&I.removeEventListener(t,B,true)}}});R.each(["bind","one"],function(t,c){R.fn[c]=function(U,T,S){if(typeof U==="object"){for(var P in U){this[c](P,T,U[P],S)}return this}if(R.isFunction(T)||T===false){S=T;T=aB}var B=c==="one"?R.proxy(S,function(V){R(this).unbind(V,B);return S.apply(this,arguments)}):S;if(U==="unload"&&c!=="one"){this.one(U,T,S)}else{P=0;for(var E=this.length;P<E;P++){R.event.add(this[P],U,B,T)}}return this}});R.fn.extend({unbind:function(t,c){if(typeof t==="object"&&!t.preventDefault){for(var E in t){this.unbind(E,t[E])}}else{E=0;for(var B=this.length;E<B;E++){R.event.remove(this[E],t,c)}}return this},delegate:function(t,c,E,B){return this.live(c,E,B,t)},undelegate:function(t,c,B){return arguments.length===0?this.unbind("live"):this.die(c,null,B,t)},trigger:function(t,c){return this.each(function(){R.event.trigger(t,c,this)})},triggerHandler:function(t,c){if(this[0]){var B=R.Event(t);B.preventDefault();B.stopPropagation();R.event.trigger(B,c,this[0]);return B.result}},toggle:function(t){for(var c=arguments,B=1;B<c.length;){R.proxy(t,c[B++])}return this.click(R.proxy(t,function(P){var E=(R.data(this,"lastToggle"+t.guid)||0)%B;R.data(this,"lastToggle"+t.guid,E+1);P.preventDefault();return c[E].apply(this,arguments)||false}))},hover:function(t,c){return this.mouseenter(t).mouseleave(c||t)}});var aS={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};R.each(["live","die"],function(t,c){R.fn[c]=function(X,W,V,U){var S,T=0,P,Y,B=U||this.selector;U=U?this:R(this.context);if(typeof X==="object"&&!X.preventDefault){for(S in X){U[c](S,W,X[S],B)}return this}if(R.isFunction(W)){V=W;W=aB}for(X=(X||"").split(" ");(S=X[T++])!=null;){P=aj.exec(S);Y="";if(P){Y=P[0];S=S.replace(aj,"")}if(S==="hover"){X.push("mouseenter"+Y,"mouseleave"+Y)}else{P=S;if(S==="focus"||S==="blur"){X.push(aS[S]+Y);S+=Y}else{S=(aS[S]||S)+Y}if(c==="live"){Y=0;for(var E=U.length;Y<E;Y++){R.event.add(U[Y],"live."+ai(S,B),{data:W,selector:B,handler:V,origType:S,origHandler:V,preType:P})}}else{U.unbind("live."+ai(S,B),V)}}}return this}});R.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(t,c){R.fn[c]=function(E,B){if(B==null){B=E;E=null}return arguments.length>0?this.bind(c,E,B):this.trigger(c)};if(R.attrFn){R.attrFn[c]=true}});ax.attachEvent&&!ax.addEventListener&&R(ax).bind("unload",function(){for(var t in R.cache){if(R.cache[t].handle){try{R.event.remove(R.cache[t].handle.elem)}catch(c){}}}});(function(){function ab(bb,ba,a8,a9,a7,a6){a7=0;for(var bd=a9.length;a7<bd;a7++){var bc=a9[a7];if(bc){var be=false;for(bc=bc[bb];bc;){if(bc.sizcache===a8){be=a9[bc.sizset];break}if(bc.nodeType===1&&!a6){bc.sizcache=a8;bc.sizset=a7}if(bc.nodeName.toLowerCase()===ba){be=bc;break}bc=bc[bb]}a9[a7]=be}}}function Y(bb,ba,a8,a9,a7,a6){a7=0;for(var bd=a9.length;a7<bd;a7++){var bc=a9[a7];if(bc){var be=false;for(bc=bc[bb];bc;){if(bc.sizcache===a8){be=a9[bc.sizset];break}if(bc.nodeType===1){if(!a6){bc.sizcache=a8;bc.sizset=a7}if(typeof ba!=="string"){if(bc===ba){be=true;break}}else{if(S.filter(ba,[bc]).length>0){be=bc;break}}}bc=bc[bb]}a9[a7]=be}}}var W=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,V=0,U=Object.prototype.toString,T=false,P=true;[0,0].sort(function(){P=false;return 0});var S=function(bd,bc,a9,ba){a9=a9||[];var a8=bc=bc||I;if(bc.nodeType!==1&&bc.nodeType!==9){return[]}if(!bd||typeof bd!=="string"){return a9}var a7,bi,bh,bj,bg,bf=true,be=S.isXML(bc),a6=[],bb=bd;do{W.exec("");if(a7=W.exec(bb)){bb=a7[3];a6.push(a7[1]);if(a7[2]){bj=a7[3];break}}}while(a7);if(a6.length>1&&aa.exec(bd)){if(a6.length===2&&E.relative[a6[0]]){bi=X(a6[0]+a6[1],bc)}else{for(bi=E.relative[a6[0]]?[bc]:S(a6.shift(),bc);a6.length;){bd=a6.shift();if(E.relative[bd]){bd+=a6.shift()}bi=X(bd,bi)}}}else{if(!ba&&a6.length>1&&bc.nodeType===9&&!be&&E.match.ID.test(a6[0])&&!E.match.ID.test(a6[a6.length-1])){a7=S.find(a6.shift(),bc,be);bc=a7.expr?S.filter(a7.expr,a7.set)[0]:a7.set[0]}if(bc){a7=ba?{expr:a6.pop(),set:t(ba)}:S.find(a6.pop(),a6.length===1&&(a6[0]==="~"||a6[0]==="+")&&bc.parentNode?bc.parentNode:bc,be);bi=a7.expr?S.filter(a7.expr,a7.set):a7.set;if(a6.length>0){bh=t(bi)}else{bf=false}for(;a6.length;){a7=bg=a6.pop();if(E.relative[bg]){a7=a6.pop()}else{bg=""}if(a7==null){a7=bc}E.relative[bg](bh,a7,be)}}else{bh=[]}}bh||(bh=bi);bh||S.error(bg||bd);if(U.call(bh)==="[object Array]"){if(bf){if(bc&&bc.nodeType===1){for(bd=0;bh[bd]!=null;bd++){if(bh[bd]&&(bh[bd]===true||bh[bd].nodeType===1&&S.contains(bc,bh[bd]))){a9.push(bi[bd])}}}else{for(bd=0;bh[bd]!=null;bd++){bh[bd]&&bh[bd].nodeType===1&&a9.push(bi[bd])}}}else{a9.push.apply(a9,bh)}}else{t(bh,a9)}if(bj){S(bj,a8,a9,ba);S.uniqueSort(a9)}return a9};S.uniqueSort=function(a7){if(a5){T=P;a7.sort(a5);if(T){for(var a6=1;a6<a7.length;a6++){a7[a6]===a7[a6-1]&&a7.splice(a6--,1)}}}return a7};S.matches=function(a7,a6){return S(a7,null,null,a6)};S.matchesSelector=function(a7,a6){return S(a6,null,null,[a7]).length>0};S.find=function(bb,ba,a8){var a9;if(!bb){return[]}for(var a7=0,a6=E.order.length;a7<a6;a7++){var bd,bc=E.order[a7];if(bd=E.leftMatch[bc].exec(bb)){var be=bd[1];bd.splice(1,1);if(be.substr(be.length-1)!=="\\"){bd[1]=(bd[1]||"").replace(/\\/g,"");a9=E.find[bc](bd,ba,a8);if(a9!=null){bb=bb.replace(E.match[bc],"");break}}}}a9||(a9=ba.getElementsByTagName("*"));return{set:a9,expr:bb}};S.filter=function(be,bd,a9,ba){for(var a8,a7,bj=be,bi=[],bk=bd,bh=bd&&bd[0]&&S.isXML(bd[0]);be&&bd.length;){for(var bg in E.filter){if((a8=E.leftMatch[bg].exec(be))!=null&&a8[2]){var bf,a6,bc=E.filter[bg];a6=a8[1];a7=false;a8.splice(1,1);if(a6.substr(a6.length-1)!=="\\"){if(bk===bi){bi=[]}if(E.preFilter[bg]){if(a8=E.preFilter[bg](a8,bk,a9,bi,ba,bh)){if(a8===true){continue}}else{a7=bf=true}}if(a8){for(var bb=0;(a6=bk[bb])!=null;bb++){if(a6){bf=bc(a6,a8,bb,bk);var bl=ba^!!bf;if(a9&&bf!=null){if(bl){a7=true}else{bk[bb]=false}}else{if(bl){bi.push(a6);a7=true}}}}}if(bf!==aB){a9||(bk=bi);be=be.replace(E.match[bg],"");if(!a7){return[]}break}}}}if(be===bj){if(a7==null){S.error(be)}else{break}}bj=be}return bk};S.error=function(a6){throw"Syntax error, unrecognized expression: "+a6};var E=S.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a6){return a6.getAttribute("href")}},relative:{"+":function(a8,a7){var bb=typeof a7==="string",a6=bb&&!/\W/.test(a7);bb=bb&&!a6;if(a6){a7=a7.toLowerCase()}a6=0;for(var ba=a8.length,a9;a6<ba;a6++){if(a9=a8[a6]){for(;(a9=a9.previousSibling)&&a9.nodeType!==1;){}a8[a6]=bb||a9&&a9.nodeName.toLowerCase()===a7?a9||false:a9===a7}}bb&&S.filter(a7,a8,true)},">":function(a8,a7){var bb,a6=typeof a7==="string",ba=0,a9=a8.length;if(a6&&!/\W/.test(a7)){for(a7=a7.toLowerCase();ba<a9;ba++){if(bb=a8[ba]){bb=bb.parentNode;a8[ba]=bb.nodeName.toLowerCase()===a7?bb:false}}}else{for(;ba<a9;ba++){if(bb=a8[ba]){a8[ba]=a6?bb.parentNode:bb.parentNode===a7}}a6&&S.filter(a7,a8,true)}},"":function(a8,a7,bb){var a6,ba=V++,a9=Y;if(typeof a7==="string"&&!/\W/.test(a7)){a6=a7=a7.toLowerCase();a9=ab}a9("parentNode",a7,ba,a8,a6,bb)},"~":function(a8,a7,bb){var a6,ba=V++,a9=Y;if(typeof a7==="string"&&!/\W/.test(a7)){a6=a7=a7.toLowerCase();a9=ab}a9("previousSibling",a7,ba,a8,a6,bb)}},find:{ID:function(a7,a6,a8){if(typeof a6.getElementById!=="undefined"&&!a8){return(a7=a6.getElementById(a7[1]))&&a7.parentNode?[a7]:[]}},NAME:function(a8,a7){if(typeof a7.getElementsByName!=="undefined"){for(var bb=[],a6=a7.getElementsByName(a8[1]),ba=0,a9=a6.length;ba<a9;ba++){a6[ba].getAttribute("name")===a8[1]&&bb.push(a6[ba])}return bb.length===0?null:bb}},TAG:function(a7,a6){return a6.getElementsByTagName(a7[1])}},preFilter:{CLASS:function(a9,a8,bc,a6,bb,ba){a9=" "+a9[1].replace(/\\/g,"")+" ";if(ba){return a9}ba=0;for(var a7;(a7=a8[ba])!=null;ba++){if(a7){if(bb^(a7.className&&(" "+a7.className+" ").replace(/[\t\n]/g," ").indexOf(a9)>=0)){bc||a6.push(a7)}else{if(bc){a8[ba]=false}}}}return false},ID:function(a6){return a6[1].replace(/\\/g,"")},TAG:function(a6){return a6[1].toLowerCase()},CHILD:function(a7){if(a7[1]==="nth"){var a6=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a7[2]==="even"&&"2n"||a7[2]==="odd"&&"2n+1"||!/\D/.test(a7[2])&&"0n+"+a7[2]||a7[2]);a7[2]=a6[1]+(a6[2]||1)-0;a7[3]=a6[3]-0}a7[0]=V++;return a7},ATTR:function(a8,a7,bb,a6,ba,a9){a7=a8[1].replace(/\\/g,"");if(!a9&&E.attrMap[a7]){a8[1]=E.attrMap[a7]}if(a8[2]==="~="){a8[4]=" "+a8[4]+" "}return a8},PSEUDO:function(a8,a7,ba,a6,a9){if(a8[1]==="not"){if((W.exec(a8[3])||"").length>1||/^\w/.test(a8[3])){a8[3]=S(a8[3],null,null,a7)}else{a8=S.filter(a8[3],a7,ba,true^a9);ba||a6.push.apply(a6,a8);return false}}else{if(E.match.POS.test(a8[0])||E.match.CHILD.test(a8[0])){return true}}return a8},POS:function(a6){a6.unshift(true);return a6}},filters:{enabled:function(a6){return a6.disabled===false&&a6.type!=="hidden"},disabled:function(a6){return a6.disabled===true},checked:function(a6){return a6.checked===true},selected:function(a6){return a6.selected===true},parent:function(a6){return !!a6.firstChild},empty:function(a6){return !a6.firstChild},has:function(a7,a6,a8){return !!S(a8[3],a7).length},header:function(a6){return/h\d/i.test(a6.nodeName)},text:function(a6){return"text"===a6.type},radio:function(a6){return"radio"===a6.type},checkbox:function(a6){return"checkbox"===a6.type},file:function(a6){return"file"===a6.type},password:function(a6){return"password"===a6.type},submit:function(a6){return"submit"===a6.type},image:function(a6){return"image"===a6.type},reset:function(a6){return"reset"===a6.type},button:function(a6){return"button"===a6.type||a6.nodeName.toLowerCase()==="button"},input:function(a6){return/input|select|textarea|button/i.test(a6.nodeName)}},setFilters:{first:function(a7,a6){return a6===0},last:function(a8,a7,a9,a6){return a7===a6.length-1},even:function(a7,a6){return a6%2===0},odd:function(a7,a6){return a6%2===1},lt:function(a7,a6,a8){return a6<a8[3]-0},gt:function(a7,a6,a8){return a6>a8[3]-0},nth:function(a7,a6,a8){return a8[3]-0===a6},eq:function(a7,a6,a8){return a8[3]-0===a6}},filter:{PSEUDO:function(a8,a7,bb,a6){var ba=a7[1],a9=E.filters[ba];if(a9){return a9(a8,bb,a7,a6)}else{if(ba==="contains"){return(a8.textContent||a8.innerText||S.getText([a8])||"").indexOf(a7[3])>=0}else{if(ba==="not"){a7=a7[3];bb=0;for(a6=a7.length;bb<a6;bb++){if(a7[bb]===a8){return false}}return true}else{S.error("Syntax error, unrecognized expression: "+ba)}}}},CHILD:function(a9,a8){var bd=a8[1],a6=a9;switch(bd){case"only":case"first":for(;a6=a6.previousSibling;){if(a6.nodeType===1){return false}}if(bd==="first"){return true}a6=a9;case"last":for(;a6=a6.nextSibling;){if(a6.nodeType===1){return false}}return true;case"nth":bd=a8[2];var bb=a8[3];if(bd===1&&bb===0){return true}var ba=a8[0],a7=a9.parentNode;if(a7&&(a7.sizcache!==ba||!a9.nodeIndex)){var bc=0;for(a6=a7.firstChild;a6;a6=a6.nextSibling){if(a6.nodeType===1){a6.nodeIndex=++bc}}a7.sizcache=ba}a6=a9.nodeIndex-bb;return bd===0?a6===0:a6%bd===0&&a6/bd>=0}},ID:function(a7,a6){return a7.nodeType===1&&a7.getAttribute("id")===a6},TAG:function(a7,a6){return a6==="*"&&a7.nodeType===1||a7.nodeName.toLowerCase()===a6},CLASS:function(a7,a6){return(" "+(a7.className||a7.getAttribute("class"))+" ").indexOf(a6)>-1},ATTR:function(a8,a7){var bb=a7[1];bb=E.attrHandle[bb]?E.attrHandle[bb](a8):a8[bb]!=null?a8[bb]:a8.getAttribute(bb);var a6=bb+"",ba=a7[2],a9=a7[4];return bb==null?ba==="!=":ba==="="?a6===a9:ba==="*="?a6.indexOf(a9)>=0:ba==="~="?(" "+a6+" ").indexOf(a9)>=0:!a9?a6&&bb!==false:ba==="!="?a6!==a9:ba==="^="?a6.indexOf(a9)===0:ba==="$="?a6.substr(a6.length-a9.length)===a9:ba==="|="?a6===a9||a6.substr(0,a9.length+1)===a9+"-":false},POS:function(a8,a7,ba,a6){var a9=E.setFilters[a7[2]];if(a9){return a9(a8,ba,a7,a6)}}}},aa=E.match.POS,c=function(a7,a6){return"\\"+(a6-0+1)},B;for(B in E.match){E.match[B]=RegExp(E.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source);E.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+E.match[B].source.replace(/\\(\d+)/g,c))}var t=function(a7,a6){a7=Array.prototype.slice.call(a7,0);if(a6){a6.push.apply(a6,a7);return a6}return a7};try{Array.prototype.slice.call(I.documentElement.childNodes,0)}catch(Z){t=function(a8,a7){var ba=0,a6=a7||[];if(U.call(a8)==="[object Array]"){Array.prototype.push.apply(a6,a8)}else{if(typeof a8.length==="number"){for(var a9=a8.length;ba<a9;ba++){a6.push(a8[ba])}}else{for(;a8[ba];ba++){a6.push(a8[ba])}}}return a6}}var a5,a4;if(I.documentElement.compareDocumentPosition){a5=function(a7,a6){if(a7===a6){T=true;return 0}if(!a7.compareDocumentPosition||!a6.compareDocumentPosition){return a7.compareDocumentPosition?-1:1}return a7.compareDocumentPosition(a6)&4?-1:1}}else{a5=function(a9,a8){var bc,a6,bb=[],ba=[];bc=a9.parentNode;a6=a8.parentNode;var a7=bc;if(a9===a8){T=true;return 0}else{if(bc===a6){return a4(a9,a8)}else{if(bc){if(!a6){return 1}}else{return -1}}}for(;a7;){bb.unshift(a7);a7=a7.parentNode}for(a7=a6;a7;){ba.unshift(a7);a7=a7.parentNode}bc=bb.length;a6=ba.length;for(a7=0;a7<bc&&a7<a6;a7++){if(bb[a7]!==ba[a7]){return a4(bb[a7],ba[a7])}}return a7===bc?a4(a9,ba[a7],-1):a4(bb[a7],a8,1)};a4=function(a7,a6,a8){if(a7===a6){return a8}for(a7=a7.nextSibling;a7;){if(a7===a6){return -1}a7=a7.nextSibling}return 1}}S.getText=function(a8){for(var a7="",a9,a6=0;a8[a6];a6++){a9=a8[a6];if(a9.nodeType===3||a9.nodeType===4){a7+=a9.nodeValue}else{if(a9.nodeType!==8){a7+=S.getText(a9.childNodes)}}}return a7};(function(){var a7=I.createElement("div"),a6="script"+(new Date).getTime(),a8=I.documentElement;a7.innerHTML="<a name='"+a6+"'/>";a8.insertBefore(a7,a8.firstChild);if(I.getElementById(a6)){E.find.ID=function(a9,bb,ba){if(typeof bb.getElementById!=="undefined"&&!ba){return(bb=bb.getElementById(a9[1]))?bb.id===a9[1]||typeof bb.getAttributeNode!=="undefined"&&bb.getAttributeNode("id").nodeValue===a9[1]?[bb]:aB:[]}};E.filter.ID=function(a9,bb){var ba=typeof a9.getAttributeNode!=="undefined"&&a9.getAttributeNode("id");return a9.nodeType===1&&ba&&ba.nodeValue===bb}}a8.removeChild(a7);a8=a7=null})();(function(){var a6=I.createElement("div");a6.appendChild(I.createComment(""));if(a6.getElementsByTagName("*").length>0){E.find.TAG=function(a8,bb){var a7=bb.getElementsByTagName(a8[1]);if(a8[1]==="*"){for(var ba=[],a9=0;a7[a9];a9++){a7[a9].nodeType===1&&ba.push(a7[a9])}a7=ba}return a7}}a6.innerHTML="<a href='#'></a>";if(a6.firstChild&&typeof a6.firstChild.getAttribute!=="undefined"&&a6.firstChild.getAttribute("href")!=="#"){E.attrHandle.href=function(a7){return a7.getAttribute("href",2)}}a6=null})();I.querySelectorAll&&function(){var a7=S,a6=I.createElement("div");a6.innerHTML="<p class='TEST'></p>";if(!(a6.querySelectorAll&&a6.querySelectorAll(".TEST").length===0)){S=function(a9,bd,bc,ba){bd=bd||I;a9=a9.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!ba&&!S.isXML(bd)){if(bd.nodeType===9){try{return t(bd.querySelectorAll(a9),bc)}catch(bg){}}else{if(bd.nodeType===1&&bd.nodeName.toLowerCase()!=="object"){var bb=bd.getAttribute("id"),bf=bb||"__sizzle__";bb||bd.setAttribute("id",bf);try{return t(bd.querySelectorAll("#"+bf+" "+a9),bc)}catch(be){}finally{bb||bd.removeAttribute("id")}}}}return a7(a9,bd,bc,ba)};for(var a8 in a7){S[a8]=a7[a8]}a6=null}}();(function(){var a8=I.documentElement,a7=a8.matchesSelector||a8.mozMatchesSelector||a8.webkitMatchesSelector||a8.msMatchesSelector,a9=false;try{a7.call(I.documentElement,"[test!='']:sizzle")}catch(a6){a9=true}if(a7){S.matchesSelector=function(bc,bb){bb=bb.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!S.isXML(bc)){try{if(a9||!E.match.PSEUDO.test(bb)&&!/!=/.test(bb)){return a7.call(bc,bb)}}catch(ba){}}return S(bb,null,null,[bc]).length>0}}})();(function(){var a6=I.createElement("div");a6.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!a6.getElementsByClassName||a6.getElementsByClassName("e").length===0)){a6.lastChild.className="e";if(a6.getElementsByClassName("e").length!==1){E.order.splice(1,0,"CLASS");E.find.CLASS=function(a8,a9,a7){if(typeof a9.getElementsByClassName!=="undefined"&&!a7){return a9.getElementsByClassName(a8[1])}};a6=null}}})();S.contains=I.documentElement.contains?function(a7,a6){return a7!==a6&&(a7.contains?a7.contains(a6):true)}:I.documentElement.compareDocumentPosition?function(a7,a6){return !!(a7.compareDocumentPosition(a6)&16)}:function(){return false};S.isXML=function(a6){return(a6=(a6?a6.ownerDocument||a6:0).documentElement)?a6.nodeName!=="HTML":false};var X=function(a9,a8){for(var bc,a6=[],bb="",ba=a8.nodeType?[a8]:a8;bc=E.match.PSEUDO.exec(a9);){bb+=bc[0];a9=a9.replace(E.match.PSEUDO,"")}a9=E.relative[a9]?a9+"*":a9;bc=0;for(var a7=ba.length;bc<a7;bc++){S(a9,ba[bc],a6)}return S.filter(bb,a6)};R.find=S;R.expr=S.selectors;R.expr[":"]=R.expr.filters;R.unique=S.uniqueSort;R.text=S.getText;R.isXMLDoc=S.isXML;R.contains=S.contains})();var aU=/Until$/,aA=/^(?:parents|prevUntil|prevAll)/,aH=/,/,aR=/^.[^:#\[\.,]*$/,ap=Array.prototype.slice,J=R.expr.match.POS;R.fn.extend({find:function(B){for(var c=this.pushStack("","find",B),T=0,S=0,P=this.length;S<P;S++){T=c.length;R.find(B,this[S],c);if(S>0){for(var E=T;E<c.length;E++){for(var t=0;t<T;t++){if(c[t]===c[E]){c.splice(E--,1);break}}}}}return c},has:function(t){var c=R(t);return this.filter(function(){for(var E=0,B=c.length;E<B;E++){if(R.contains(this,c[E])){return true}}})},not:function(c){return this.pushStack(aM(this,c,false),"not",c)},filter:function(c){return this.pushStack(aM(this,c,true),"filter",c)},is:function(c){return !!c&&R.filter(c,this).length>0},closest:function(V,U){var T=[],S,P,E=this[0];if(R.isArray(V)){var t,B={},c=1;if(E&&V.length){S=0;for(P=V.length;S<P;S++){t=V[S];B[t]||(B[t]=R.expr.match.POS.test(t)?R(t,U||this.context):t)}for(;E&&E.ownerDocument&&E!==U;){for(t in B){S=B[t];if(S.jquery?S.index(E)>-1:R(E).is(S)){T.push({selector:t,elem:E,level:c})}}E=E.parentNode;c++}}return T}t=J.test(V)?R(V,U||this.context):null;S=0;for(P=this.length;S<P;S++){for(E=this[S];E;){if(t?t.index(E)>-1:R.find.matchesSelector(E,V)){T.push(E);break}else{E=E.parentNode;if(!E||!E.ownerDocument||E===U){break}}}}T=T.length>1?R.unique(T):T;return this.pushStack(T,"closest",V)},index:function(c){if(!c||typeof c==="string"){return R.inArray(this[0],c?R(c):this.parent().children())}return R.inArray(c.jquery?c[0]:c,this)},add:function(t,c){var E=typeof t==="string"?R(t,c||this.context):R.makeArray(t),B=R.merge(this.get(),E);return this.pushStack(!E[0]||!E[0].parentNode||E[0].parentNode.nodeType===11||!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11?B:R.unique(B))},andSelf:function(){return this.add(this.prevObject)}});R.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return R.dir(c,"parentNode")},parentsUntil:function(t,c,B){return R.dir(t,"parentNode",B)},next:function(c){return R.nth(c,2,"nextSibling")},prev:function(c){return R.nth(c,2,"previousSibling")},nextAll:function(c){return R.dir(c,"nextSibling")},prevAll:function(c){return R.dir(c,"previousSibling")},nextUntil:function(t,c,B){return R.dir(t,"nextSibling",B)},prevUntil:function(t,c,B){return R.dir(t,"previousSibling",B)},siblings:function(c){return R.sibling(c.parentNode.firstChild,c)},children:function(c){return R.sibling(c.firstChild)},contents:function(c){return R.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:R.makeArray(c.childNodes)}},function(t,c){R.fn[t]=function(P,E){var B=R.map(this,c,P);aU.test(t)||(E=P);if(E&&typeof E==="string"){B=R.filter(E,B)}B=this.length>1?R.unique(B):B;if((this.length>1||aH.test(E))&&aA.test(t)){B=B.reverse()}return this.pushStack(B,t,ap.call(arguments).join(","))}});R.extend({filter:function(t,c,B){if(B){t=":not("+t+")"}return c.length===1?R.find.matchesSelector(c[0],t)?[c[0]]:[]:R.find.matches(t,c)},dir:function(t,c,E){var B=[];for(t=t[c];t&&t.nodeType!==9&&(E===aB||t.nodeType!==1||!R(t).is(E));){t.nodeType===1&&B.push(t);t=t[c]}return B},nth:function(t,c,E){c=c||1;for(var B=0;t;t=t[E]){if(t.nodeType===1&&++B===c){break}}return t},sibling:function(t,c){for(var B=[];t;t=t.nextSibling){t.nodeType===1&&t!==c&&B.push(t)}return B}});var aF=/ jQuery\d+="(?:\d+|null)"/g,aO=/^\s+/,aX=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,aK=/<([\w:]+)/,s=/<tbody/i,f=/<|&#?\w+;/,av=/<(?:script|object|embed|option|style)/i,N=/checked\s*(?:[^=]|=\s*.checked.)/i,aV=/\=([^="'>\s]+\/)>/g,aq={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};aq.optgroup=aq.option;aq.tbody=aq.tfoot=aq.colgroup=aq.caption=aq.thead;aq.th=aq.td;if(!R.support.htmlSerialize){aq._default=[1,"div<div>","</div>"]}R.fn.extend({text:function(c){if(R.isFunction(c)){return this.each(function(t){var B=R(this);B.text(c.call(this,t,B.text()))})}if(typeof c!=="object"&&c!==aB){return this.empty().append((this[0]&&this[0].ownerDocument||I).createTextNode(c))}return R.text(this)},wrapAll:function(t){if(R.isFunction(t)){return this.each(function(B){R(this).wrapAll(t.call(this,B))})}if(this[0]){var c=R(t,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var B=this;B.firstChild&&B.firstChild.nodeType===1;){B=B.firstChild}return B}).append(this)}return this},wrapInner:function(c){if(R.isFunction(c)){return this.each(function(t){R(this).wrapInner(c.call(this,t))})}return this.each(function(){var t=R(this),B=t.contents();B.length?B.wrapAll(c):t.append(c)})},wrap:function(c){return this.each(function(){R(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){R.nodeName(this,"body")||R(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this)})}else{if(arguments.length){var c=R(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,R(arguments[0]).toArray());return c}}},remove:function(t,c){for(var E=0,B;(B=this[E])!=null;E++){if(!t||R.filter(t,[B]).length){if(!c&&B.nodeType===1){R.cleanData(B.getElementsByTagName("*"));R.cleanData([B])}B.parentNode&&B.parentNode.removeChild(B)}}return this},empty:function(){for(var t=0,c;(c=this[t])!=null;t++){for(c.nodeType===1&&R.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(t){var c=this.map(function(){if(!R.support.noCloneEvent&&!R.isXMLDoc(this)){var E=this.outerHTML,B=this.ownerDocument;if(!E){E=B.createElement("div");E.appendChild(this.cloneNode(true));E=E.innerHTML}return R.clean([E.replace(aF,"").replace(aV,'="$1">').replace(aO,"")],B)[0]}else{return this.cloneNode(true)}});if(t===true){ay(this,c);ay(this.find("*"),c.find("*"))}return c},html:function(t){if(t===aB){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aF,""):null}else{if(typeof t==="string"&&!av.test(t)&&(R.support.leadingWhitespace||!aO.test(t))&&!aq[(aK.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(aX,"<$1></$2>");try{for(var c=0,E=this.length;c<E;c++){if(this[c].nodeType===1){R.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=t}}}catch(B){this.empty().append(t)}}else{R.isFunction(t)?this.each(function(S){var P=R(this);P.html(t.call(this,S,P.html()))}):this.empty().append(t)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(R.isFunction(c)){return this.each(function(t){var E=R(this),B=E.html();E.replaceWith(c.call(this,t,B))})}if(typeof c!=="string"){c=R(c).detach()}return this.each(function(){var t=this.nextSibling,B=this.parentNode;R(this).remove();t?R(t).before(c):R(B).append(c)})}else{return this.pushStack(R(R.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(V,U,T){var S,P,E,t=V[0],B=[];if(!R.support.checkClone&&arguments.length===3&&typeof t==="string"&&N.test(t)){return this.each(function(){R(this).domManip(V,U,T,true)})}if(R.isFunction(t)){return this.each(function(W){var X=R(this);V[0]=t.call(this,W,U?X.html():aB);X.domManip(V,U,T)})}if(this[0]){S=t&&t.parentNode;S=R.support.parentNode&&S&&S.nodeType===11&&S.childNodes.length===this.length?{fragment:S}:R.buildFragment(V,this,B);E=S.fragment;if(P=E.childNodes.length===1?E=E.firstChild:E.firstChild){U=U&&R.nodeName(P,"tr");P=0;for(var c=this.length;P<c;P++){T.call(U?R.nodeName(this[P],"table")?this[P].getElementsByTagName("tbody")[0]||this[P].appendChild(this[P].ownerDocument.createElement("tbody")):this[P]:this[P],P>0||S.cacheable||this.length>1?E.cloneNode(true):E)}}B.length&&R.each(B,aE)}return this}});R.buildFragment=function(t,c,S){var P,E,B;c=c&&c[0]?c[0].ownerDocument||c[0]:I;if(t.length===1&&typeof t[0]==="string"&&t[0].length<512&&c===I&&!av.test(t[0])&&(R.support.checkClone||!N.test(t[0]))){E=true;if(B=R.fragments[t[0]]){if(B!==1){P=B}}}if(!P){P=c.createDocumentFragment();R.clean(t,c,P,S)}if(E){R.fragments[t[0]]=B?P:1}return{fragment:P,cacheable:E}};R.fragments={};R.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,c){R.fn[t]=function(T){var S=[];T=R(T);var P=this.length===1&&this[0].parentNode;if(P&&P.nodeType===11&&P.childNodes.length===1&&T.length===1){T[c](this[0]);return this}else{P=0;for(var E=T.length;P<E;P++){var B=(P>0?this.clone(true):this).get();R(T[P])[c](B);S=S.concat(B)}return this.pushStack(S,t,T.selector)}}});R.extend({clean:function(X,V,U,T){V=V||I;if(typeof V.createElement==="undefined"){V=V.ownerDocument||V[0]&&V[0].ownerDocument||I}for(var S=[],P=0,B;(B=X[P])!=null;P++){if(typeof B==="number"){B+=""}if(B){if(typeof B==="string"&&!f.test(B)){B=V.createTextNode(B)}else{if(typeof B==="string"){B=B.replace(aX,"<$1></$2>");var E=(aK.exec(B)||["",""])[1].toLowerCase(),t=aq[E]||aq._default,W=t[0],c=V.createElement("div");for(c.innerHTML=t[1]+B+t[2];W--;){c=c.lastChild}if(!R.support.tbody){W=s.test(B);E=E==="table"&&!W?c.firstChild&&c.firstChild.childNodes:t[1]==="<table>"&&!W?c.childNodes:[];for(t=E.length-1;t>=0;--t){R.nodeName(E[t],"tbody")&&!E[t].childNodes.length&&E[t].parentNode.removeChild(E[t])}}!R.support.leadingWhitespace&&aO.test(B)&&c.insertBefore(V.createTextNode(aO.exec(B)[0]),c.firstChild);B=c.childNodes}}if(B.nodeType){S.push(B)}else{S=R.merge(S,B)}}}if(U){for(P=0;S[P];P++){if(T&&R.nodeName(S[P],"script")&&(!S[P].type||S[P].type.toLowerCase()==="text/javascript")){T.push(S[P].parentNode?S[P].parentNode.removeChild(S[P]):S[P])}else{S[P].nodeType===1&&S.splice.apply(S,[P+1,0].concat(R.makeArray(S[P].getElementsByTagName("script"))));U.appendChild(S[P])}}}return S},cleanData:function(V){for(var U,T,S=R.cache,P=R.event.special,E=R.support.deleteExpando,t=0,B;(B=V[t])!=null;t++){if(!(B.nodeName&&R.noData[B.nodeName.toLowerCase()])){if(T=B[R.expando]){if((U=S[T])&&U.events){for(var c in U.events){P[c]?R.event.remove(B,c):R.removeEvent(B,c,U.handle)}}if(E){delete B[R.expando]}else{B.removeAttribute&&B.removeAttribute(R.expando)}delete S[T]}}}}});var y=/alpha\([^)]*\)/i,aJ=/opacity=([^)]*)/,at=/-([a-z])/ig,L=/([A-Z])/g,k=/^-?\d+(?:px)?$/i,v=/^-?\d/,h={position:"absolute",visibility:"hidden",display:"block"},af=["Left","Right"],G=["Top","Bottom"],ak,a0,aI,aY=function(t,c){return c.toUpperCase()};R.fn.css=function(t,c){if(arguments.length===2&&c===aB){return this}return R.access(this,t,c,true,function(P,E,B){return B!==aB?R.style(P,E,B):R.css(P,E)})};R.extend({cssHooks:{opacity:{get:function(t,c){if(c){var B=ak(t,"opacity","opacity");return B===""?"1":B}else{return t.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":R.support.cssFloat?"cssFloat":"styleFloat"},style:function(V,U,T,S){if(!(!V||V.nodeType===3||V.nodeType===8||!V.style)){var P,E=R.camelCase(U),t=V.style,B=R.cssHooks[E];U=R.cssProps[E]||E;if(T!==aB){if(!(typeof T==="number"&&isNaN(T)||T==null)){if(typeof T==="number"&&!R.cssNumber[E]){T+="px"}if(!B||!("set" in B)||(T=B.set(V,T))!==aB){try{t[U]=T}catch(c){}}}}else{if(B&&"get" in B&&(P=B.get(V,false,S))!==aB){return P}return t[U]}}},css:function(t,c,S){var P,E=R.camelCase(c),B=R.cssHooks[E];c=R.cssProps[E]||E;if(B&&"get" in B&&(P=B.get(t,true,S))!==aB){return P}else{if(ak){return ak(t,c,E)}}},swap:function(t,c,P){var E={},B;for(B in c){E[B]=t.style[B];t.style[B]=c[B]}P.call(t);for(B in c){t.style[B]=E[B]}},camelCase:function(c){return c.replace(at,aY)}});R.curCSS=R.css;R.each(["height","width"],function(t,c){R.cssHooks[c]={get:function(S,P,E){var B;if(P){if(S.offsetWidth!==0){B=Q(S,c,E)}else{R.swap(S,h,function(){B=Q(S,c,E)})}if(B<=0){B=ak(S,c,c);if(B==="0px"&&aI){B=aI(S,c,c)}if(B!=null){return B===""||B==="auto"?"0px":B}}if(B<0||B==null){B=S.style[c];return B===""||B==="auto"?"0px":B}return typeof B==="string"?B:B+"px"}},set:function(E,B){if(k.test(B)){B=parseFloat(B);if(B>=0){return B+"px"}}else{return B}}}});if(!R.support.opacity){R.cssHooks.opacity={get:function(t,c){return aJ.test((c&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(t,c){var P=t.style;P.zoom=1;var E=R.isNaN(c)?"":"alpha(opacity="+c*100+")",B=P.filter||"";P.filter=y.test(B)?B.replace(y,E):P.filter+" "+E}}}if(I.defaultView&&I.defaultView.getComputedStyle){a0=function(t,c,E){var B;E=E.replace(L,"-$1").toLowerCase();if(!(c=t.ownerDocument.defaultView)){return aB}if(c=c.getComputedStyle(t,null)){B=c.getPropertyValue(E);if(B===""&&!R.contains(t.ownerDocument.documentElement,t)){B=R.style(t,E)}}return B}}if(I.documentElement.currentStyle){aI=function(t,c){var S,P,E=t.currentStyle&&t.currentStyle[c],B=t.style;if(!k.test(E)&&v.test(E)){S=B.left;P=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left;B.left=c==="fontSize"?"1em":E||0;E=B.pixelLeft+"px";B.left=S;t.runtimeStyle.left=P}return E===""?"auto":E}}ak=a0||aI;if(R.expr&&R.expr.filters){R.expr.filters.hidden=function(t){var c=t.offsetHeight;return t.offsetWidth===0&&c===0||!R.support.reliableHiddenOffsets&&(t.style.display||R.css(t,"display"))==="none"};R.expr.filters.visible=function(c){return !R.expr.filters.hidden(c)}}var aL=R.now(),aw=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,O=/^(?:select|textarea)/i,z=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,l=/^(?:GET|HEAD)$/,q=/\[\]$/,an=/\=\?(&|$)/,w=/\?/,a1=/([?&])_=[^&]*/,aP=/^(\w+:)?\/\/([^\/?#]+)/,aC=/%20/g,ad=/#.*$/,aN=R.fn.load;R.fn.extend({load:function(t,c,S){if(typeof t!=="string"&&aN){return aN.apply(this,arguments)}else{if(!this.length){return this}}var P=t.indexOf(" ");if(P>=0){var E=t.slice(P,t.length);t=t.slice(0,P)}P="GET";if(c){if(R.isFunction(c)){S=c;c=null}else{if(typeof c==="object"){c=R.param(c,R.ajaxSettings.traditional);P="POST"}}}var B=this;R.ajax({url:t,type:P,dataType:"html",data:c,complete:function(T,U){if(U==="success"||U==="notmodified"){B.html(E?R("<div>").append(T.responseText.replace(aw,"")).find(E):T.responseText)}S&&B.each(S,[T.responseText,U,T])}});return this},serialize:function(){return R.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?R.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||O.test(this.nodeName)||z.test(this.type))}).map(function(t,c){var B=R(this).val();return B==null?null:R.isArray(B)?R.map(B,function(E){return{name:c.name,value:E}}):{name:c.name,value:B}}).get()}});R.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,c){R.fn[c]=function(B){return this.bind(c,B)}});R.extend({get:function(t,c,E,B){if(R.isFunction(c)){B=B||E;E=c;c=null}return R.ajax({type:"GET",url:t,data:c,success:E,dataType:B})},getScript:function(t,c){return R.get(t,null,c,"script")},getJSON:function(t,c,B){return R.get(t,c,B,"json")},post:function(t,c,E,B){if(R.isFunction(c)){B=B||E;E=c;c={}}return R.ajax({type:"POST",url:t,data:c,success:E,dataType:B})},ajaxSetup:function(c){R.extend(R.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new ax.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(a8){var a7=R.extend(true,{},R.ajaxSettings,a8),a6,a5,a4,aa=a7.type.toUpperCase(),X=l.test(aa);a7.url=a7.url.replace(ad,"");a7.context=a8&&a8.context!=null?a8.context:a7;if(a7.data&&a7.processData&&typeof a7.data!=="string"){a7.data=R.param(a7.data,a7.traditional)}if(a7.dataType==="jsonp"){if(aa==="GET"){an.test(a7.url)||(a7.url+=(w.test(a7.url)?"&":"?")+(a7.jsonp||"callback")+"=?")}else{if(!a7.data||!an.test(a7.data)){a7.data=(a7.data?a7.data+"&":"")+(a7.jsonp||"callback")+"=?"}}a7.dataType="json"}if(a7.dataType==="json"&&(a7.data&&an.test(a7.data)||an.test(a7.url))){a6=a7.jsonpCallback||"jsonp"+aL++;if(a7.data){a7.data=(a7.data+"").replace(an,"="+a6+"$1")}a7.url=a7.url.replace(an,"="+a6+"$1");a7.dataType="script";var Y=ax[a6];ax[a6]=function(a9){if(R.isFunction(Y)){Y(a9)}else{ax[a6]=aB;try{delete ax[a6]}catch(ba){}}a4=a9;R.handleSuccess(a7,P,a5,a4);R.handleComplete(a7,P,a5,a4);T&&T.removeChild(U)}}if(a7.dataType==="script"&&a7.cache===null){a7.cache=false}if(a7.cache===false&&X){var V=R.now(),E=a7.url.replace(a1,"$1_="+V);a7.url=E+(E===a7.url?(w.test(a7.url)?"&":"?")+"_="+V:"")}if(a7.data&&X){a7.url+=(w.test(a7.url)?"&":"?")+a7.data}a7.global&&R.active++===0&&R.event.trigger("ajaxStart");V=(V=aP.exec(a7.url))&&(V[1]&&V[1].toLowerCase()!==location.protocol||V[2].toLowerCase()!==location.host);if(a7.dataType==="script"&&aa==="GET"&&V){var T=I.getElementsByTagName("head")[0]||I.documentElement,U=I.createElement("script");if(a7.scriptCharset){U.charset=a7.scriptCharset}U.src=a7.url;if(!a6){var S=false;U.onload=U.onreadystatechange=function(){if(!S&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){S=true;R.handleSuccess(a7,P,a5,a4);R.handleComplete(a7,P,a5,a4);U.onload=U.onreadystatechange=null;T&&U.parentNode&&T.removeChild(U)}}}T.insertBefore(U,T.firstChild);return aB}var t=false,P=a7.xhr();if(P){a7.username?P.open(aa,a7.url,a7.async,a7.username,a7.password):P.open(aa,a7.url,a7.async);try{if(a7.data!=null&&!X||a8&&a8.contentType){P.setRequestHeader("Content-Type",a7.contentType)}if(a7.ifModified){R.lastModified[a7.url]&&P.setRequestHeader("If-Modified-Since",R.lastModified[a7.url]);R.etag[a7.url]&&P.setRequestHeader("If-None-Match",R.etag[a7.url])}V||P.setRequestHeader("X-Requested-With","XMLHttpRequest");P.setRequestHeader("Accept",a7.dataType&&a7.accepts[a7.dataType]?a7.accepts[a7.dataType]+", */*; q=0.01":a7.accepts._default)}catch(B){}if(a7.beforeSend&&a7.beforeSend.call(a7.context,P,a7)===false){a7.global&&R.active--===1&&R.event.trigger("ajaxStop");P.abort();return false}a7.global&&R.triggerGlobal(a7,"ajaxSend",[P,a7]);var c=P.onreadystatechange=function(a9){if(!P||P.readyState===0||a9==="abort"){t||R.handleComplete(a7,P,a5,a4);t=true;if(P){P.onreadystatechange=R.noop}}else{if(!t&&P&&(P.readyState===4||a9==="timeout")){t=true;P.onreadystatechange=R.noop;a5=a9==="timeout"?"timeout":!R.httpSuccess(P)?"error":a7.ifModified&&R.httpNotModified(P,a7.url)?"notmodified":"success";var bb;if(a5==="success"){try{a4=R.httpData(P,a7.dataType,a7)}catch(ba){a5="parsererror";bb=ba}}if(a5==="success"||a5==="notmodified"){a6||R.handleSuccess(a7,P,a5,a4)}else{R.handleError(a7,P,a5,bb)}a6||R.handleComplete(a7,P,a5,a4);a9==="timeout"&&P.abort();if(a7.async){P=null}}}};try{var ab=P.abort;P.abort=function(){P&&Function.prototype.call.call(ab,P);c("abort")}}catch(Z){}a7.async&&a7.timeout>0&&setTimeout(function(){P&&!t&&c("timeout")},a7.timeout);try{P.send(X||a7.data==null?null:a7.data)}catch(W){R.handleError(a7,P,null,W);R.handleComplete(a7,P,a5,a4)}a7.async||c();return P}},param:function(t,c){var P=[],E=function(T,S){S=R.isFunction(S)?S():S;P[P.length]=encodeURIComponent(T)+"="+encodeURIComponent(S)};if(c===aB){c=R.ajaxSettings.traditional}if(R.isArray(t)||t.jquery){R.each(t,function(){E(this.name,this.value)})}else{for(var B in t){u(B,t[B],c,E)}}return P.join("&").replace(aC,"+")}});R.extend({active:0,lastModified:{},etag:{},handleError:function(t,c,E,B){t.error&&t.error.call(t.context,c,E,B);t.global&&R.triggerGlobal(t,"ajaxError",[c,t,B])},handleSuccess:function(t,c,E,B){t.success&&t.success.call(t.context,B,E,c);t.global&&R.triggerGlobal(t,"ajaxSuccess",[c,t])},handleComplete:function(t,c,B){t.complete&&t.complete.call(t.context,c,B);t.global&&R.triggerGlobal(t,"ajaxComplete",[c,t]);t.global&&R.active--===1&&R.event.trigger("ajaxStop")},triggerGlobal:function(t,c,B){(t.context&&t.context.url==null?R(t.context):R.event).trigger(c,B)},httpSuccess:function(t){try{return !t.status&&location.protocol==="file:"||t.status>=200&&t.status<300||t.status===304||t.status===1223}catch(c){}return false},httpNotModified:function(t,c){var E=t.getResponseHeader("Last-Modified"),B=t.getResponseHeader("Etag");if(E){R.lastModified[c]=E}if(B){R.etag[c]=B}return t.status===304},httpData:function(t,c,P){var E=t.getResponseHeader("content-type")||"",B=c==="xml"||!c&&E.indexOf("xml")>=0;t=B?t.responseXML:t.responseText;B&&t.documentElement.nodeName==="parsererror"&&R.error("parsererror");if(P&&P.dataFilter){t=P.dataFilter(t,c)}if(typeof t==="string"){if(c==="json"||!c&&E.indexOf("json")>=0){t=R.parseJSON(t)}else{if(c==="script"||!c&&E.indexOf("javascript")>=0){R.globalEval(t)}}}return t}});if(ax.ActiveXObject){R.ajaxSettings.xhr=function(){if(ax.location.protocol!=="file:"){try{return new ax.XMLHttpRequest}catch(t){}}try{return new ax.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}R.support.ajax=!!R.ajaxSettings.xhr();var g={},D=/^(?:toggle|show|hide)$/,o=/^([+\-]=)?([\d+.\-]+)(.*)$/,ar,A=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];R.fn.extend({show:function(t,c,E){if(t||t===0){return this.animate(ao("show",3),t,c,E)}else{E=0;for(var B=this.length;E<B;E++){t=this[E];c=t.style.display;if(!R.data(t,"olddisplay")&&c==="none"){c=t.style.display=""}c===""&&R.css(t,"display")==="none"&&R.data(t,"olddisplay",m(t.nodeName))}for(E=0;E<B;E++){t=this[E];c=t.style.display;if(c===""||c==="none"){t.style.display=R.data(t,"olddisplay")||""}}return this}},hide:function(t,c,B){if(t||t===0){return this.animate(ao("hide",3),t,c,B)}else{t=0;for(c=this.length;t<c;t++){B=R.css(this[t],"display");B!=="none"&&R.data(this[t],"olddisplay",B)}for(t=0;t<c;t++){this[t].style.display="none"}return this}},_toggle:R.fn.toggle,toggle:function(t,c,E){var B=typeof t==="boolean";if(R.isFunction(t)&&R.isFunction(c)){this._toggle.apply(this,arguments)}else{t==null||B?this.each(function(){var P=B?t:R(this).is(":hidden");R(this)[P?"show":"hide"]()}):this.animate(ao("toggle",3),t,c,E)}return this},fadeTo:function(t,c,E,B){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},t,E,B)},animate:function(t,c,P,E){var B=R.speed(c,P,E);if(R.isEmptyObject(t)){return this.each(B.complete)}return this[B.queue===false?"each":"queue"](function(){var V=R.extend({},B),T,U=this.nodeType===1,X=U&&R(this).is(":hidden"),S=this;for(T in t){var W=R.camelCase(T);if(T!==W){t[W]=t[T];delete t[T];T=W}if(t[T]==="hide"&&X||t[T]==="show"&&!X){return V.complete.call(this)}if(U&&(T==="height"||T==="width")){V.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(R.css(this,"display")==="inline"&&R.css(this,"float")==="none"){if(R.support.inlineBlockNeedsLayout){if(m(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}else{this.style.display="inline-block"}}}if(R.isArray(t[T])){(V.specialEasing=V.specialEasing||{})[T]=t[T][1];t[T]=t[T][0]}}if(V.overflow!=null){this.style.overflow="hidden"}V.curAnim=R.extend({},t);R.each(t,function(Z,a6){var ab=new R.fx(S,V,Z);if(D.test(a6)){ab[a6==="toggle"?X?"show":"hide":a6](t)}else{var aa=o.exec(a6),a4=ab.cur()||0;if(aa){var Y=parseFloat(aa[2]),a5=aa[3]||"px";if(a5!=="px"){R.style(S,Z,(Y||1)+a5);a4=(Y||1)/ab.cur()*a4;R.style(S,Z,a4+a5)}if(aa[1]){Y=(aa[1]==="-="?-1:1)*Y+a4}ab.custom(a4,Y,a5)}else{ab.custom(a4,a6,"")}}});return true})},stop:function(t,c){var B=R.timers;t&&this.queue([]);this.each(function(){for(var E=B.length-1;E>=0;E--){if(B[E].elem===this){c&&B[E](true);B.splice(E,1)}}});c||this.dequeue();return this}});R.each({slideDown:ao("show",1),slideUp:ao("hide",1),slideToggle:ao("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,c){R.fn[t]=function(P,E,B){return this.animate(c,P,E,B)}});R.extend({speed:function(t,c,E){var B=t&&typeof t==="object"?R.extend({},t):{complete:E||!E&&c||R.isFunction(t)&&t,duration:t,easing:E&&c||c&&!R.isFunction(c)&&c};B.duration=R.fx.off?0:typeof B.duration==="number"?B.duration:B.duration in R.fx.speeds?R.fx.speeds[B.duration]:R.fx.speeds._default;B.old=B.complete;B.complete=function(){B.queue!==false&&R(this).dequeue();R.isFunction(B.old)&&B.old.call(this)};return B},easing:{linear:function(t,c,E,B){return E+B*t},swing:function(t,c,E,B){return(-Math.cos(t*Math.PI)/2+0.5)*B+E}},timers:[],fx:function(t,c,B){this.options=c;this.elem=t;this.prop=B;if(!c.orig){c.orig={}}}});R.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(R.fx.step[this.prop]||R.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var c=parseFloat(R.css(this.elem,this.prop));return c&&c>-10000?c:0},custom:function(t,c,S){function P(T){return E.step(T)}var E=this,B=R.fx;this.startTime=R.now();this.start=t;this.end=c;this.unit=S||this.unit||"px";this.now=this.start;this.pos=this.state=0;P.elem=this.elem;if(P()&&R.timers.push(P)&&!ar){ar=setInterval(B.tick,B.interval)}},show:function(){this.options.orig[this.prop]=R.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());R(this.elem).show()},hide:function(){this.options.orig[this.prop]=R.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(B){var c=R.now(),T=true;if(B||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var S in this.options.curAnim){if(this.options.curAnim[S]!==true){T=false}}if(T){if(this.options.overflow!=null&&!R.support.shrinkWrapBlocks){var P=this.elem,E=this.options;R.each(["","X","Y"],function(U,V){P.style["overflow"+V]=E.overflow[U]})}this.options.hide&&R(this.elem).hide();if(this.options.hide||this.options.show){for(var t in this.options.curAnim){R.style(this.elem,t,this.options.orig[t])}}this.options.complete.call(this.elem)}return false}else{B=c-this.startTime;this.state=B/this.options.duration;c=this.options.easing||(R.easing.swing?"swing":"linear");this.pos=R.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||c](this.state,B,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};R.extend(R.fx,{tick:function(){for(var t=R.timers,c=0;c<t.length;c++){t[c]()||t.splice(c--,1)}t.length||R.fx.stop()},interval:13,stop:function(){clearInterval(ar);ar=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){R.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(R.expr&&R.expr.filters){R.expr.filters.animated=function(c){return R.grep(R.timers,function(t){return c===t.elem}).length}}var a=/^t(?:able|d|h)$/i,az=/^(?:body|html)$/i;R.fn.offset="getBoundingClientRect" in I.documentElement?function(t){var c=this[0],S;if(t){return this.each(function(T){R.offset.setOffset(this,t,T)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return R.offset.bodyOffset(c)}try{S=c.getBoundingClientRect()}catch(P){}var E=c.ownerDocument,B=E.documentElement;if(!S||!R.contains(B,c)){return S||{top:0,left:0}}c=E.body;E=aW(E);return{top:S.top+(E.pageYOffset||R.support.boxModel&&B.scrollTop||c.scrollTop)-(B.clientTop||c.clientTop||0),left:S.left+(E.pageXOffset||R.support.boxModel&&B.scrollLeft||c.scrollLeft)-(B.clientLeft||c.clientLeft||0)}}:function(V){var U=this[0];if(V){return this.each(function(W){R.offset.setOffset(this,V,W)})}if(!U||!U.ownerDocument){return null}if(U===U.ownerDocument.body){return R.offset.bodyOffset(U)}R.offset.initialize();var T,S=U.offsetParent,P=U.ownerDocument,E=P.documentElement,t=P.body;T=(P=P.defaultView)?P.getComputedStyle(U,null):U.currentStyle;for(var B=U.offsetTop,c=U.offsetLeft;(U=U.parentNode)&&U!==t&&U!==E;){if(R.offset.supportsFixedPosition&&T.position==="fixed"){break}T=P?P.getComputedStyle(U,null):U.currentStyle;B-=U.scrollTop;c-=U.scrollLeft;if(U===S){B+=U.offsetTop;c+=U.offsetLeft;if(R.offset.doesNotAddBorder&&!(R.offset.doesAddBorderForTableAndCells&&a.test(U.nodeName))){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}S=U.offsetParent}if(R.offset.subtractsBorderForOverflowNotVisible&&T.overflow!=="visible"){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}T=T}if(T.position==="relative"||T.position==="static"){B+=t.offsetTop;c+=t.offsetLeft}if(R.offset.supportsFixedPosition&&T.position==="fixed"){B+=Math.max(E.scrollTop,t.scrollTop);c+=Math.max(E.scrollLeft,t.scrollLeft)}return{top:B,left:c}};R.offset={initialize:function(){var t=I.body,c=I.createElement("div"),S,P,E,B=parseFloat(R.css(t,"marginTop"))||0;R.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";t.insertBefore(c,t.firstChild);S=c.firstChild;P=S.firstChild;E=S.nextSibling.firstChild.firstChild;this.doesNotAddBorder=P.offsetTop!==5;this.doesAddBorderForTableAndCells=E.offsetTop===5;P.style.position="fixed";P.style.top="20px";this.supportsFixedPosition=P.offsetTop===20||P.offsetTop===15;P.style.position=P.style.top="";S.style.overflow="hidden";S.style.position="relative";this.subtractsBorderForOverflowNotVisible=P.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=t.offsetTop!==B;t.removeChild(c);R.offset.initialize=R.noop},bodyOffset:function(t){var c=t.offsetTop,B=t.offsetLeft;R.offset.initialize();if(R.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(R.css(t,"marginTop"))||0;B+=parseFloat(R.css(t,"marginLeft"))||0}return{top:c,left:B}},setOffset:function(W,U,T){var S=R.css(W,"position");if(S==="static"){W.style.position="relative"}var P=R(W),E=P.offset(),t=R.css(W,"top"),B=R.css(W,"left"),c=S==="absolute"&&R.inArray("auto",[t,B])>-1;S={};var V={};if(c){V=P.position()}t=c?V.top:parseInt(t,10)||0;B=c?V.left:parseInt(B,10)||0;if(R.isFunction(U)){U=U.call(W,T,E)}if(U.top!=null){S.top=U.top-E.top+t}if(U.left!=null){S.left=U.left-E.left+B}"using" in U?U.using.call(W,S):P.css(S)}};R.fn.extend({position:function(){if(!this[0]){return null}var t=this[0],c=this.offsetParent(),E=this.offset(),B=az.test(c[0].nodeName)?{top:0,left:0}:c.offset();E.top-=parseFloat(R.css(t,"marginTop"))||0;E.left-=parseFloat(R.css(t,"marginLeft"))||0;B.top+=parseFloat(R.css(c[0],"borderTopWidth"))||0;B.left+=parseFloat(R.css(c[0],"borderLeftWidth"))||0;return{top:E.top-B.top,left:E.left-B.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||I.body;c&&!az.test(c.nodeName)&&R.css(c,"position")==="static";){c=c.offsetParent}return c})}});R.each(["Left","Top"],function(t,c){var B="scroll"+c;R.fn[B]=function(S){var P=this[0],E;if(!P){return null}if(S!==aB){return this.each(function(){if(E=aW(this)){E.scrollTo(!t?S:R(E).scrollLeft(),t?S:R(E).scrollTop())}else{this[B]=S}})}else{return(E=aW(P))?"pageXOffset" in E?E[t?"pageYOffset":"pageXOffset"]:R.support.boxModel&&E.document.documentElement[B]||E.document.body[B]:P[B]}}});R.each(["Height","Width"],function(t,c){var B=c.toLowerCase();R.fn["inner"+c]=function(){return this[0]?parseFloat(R.css(this[0],B,"padding")):null};R.fn["outer"+c]=function(E){return this[0]?parseFloat(R.css(this[0],B,E?"margin":"border")):null};R.fn[B]=function(S){var P=this[0];if(!P){return S==null?null:this}if(R.isFunction(S)){return this.each(function(T){var U=R(this);U[B](S.call(this,T,U[B]()))})}if(R.isWindow(P)){return P.document.compatMode==="CSS1Compat"&&P.document.documentElement["client"+c]||P.document.body["client"+c]}else{if(P.nodeType===9){return Math.max(P.documentElement["client"+c],P.body["scroll"+c],P.documentElement["scroll"+c],P.body["offset"+c],P.documentElement["offset"+c])}else{if(S===aB){P=R.css(P,B);var E=parseFloat(P);return R.isNaN(E)?P:E}else{return this.css(B,typeof S==="string"?S:S+"px")}}}}})})(window);window.dhtmlHistory={isIE:false,isOpera:false,isSafari:false,isKonquerer:false,isGecko:false,isSupported:false,create:function(d){var g=this;var f=navigator.userAgent.toLowerCase();var a=navigator.platform.toLowerCase();var h=navigator.vendor||"";if(h==="KDE"){this.isKonqueror=true;this.isSupported=false}else{if(typeof window.opera!=="undefined"){this.isOpera=true;this.isSupported=true}else{if(typeof document.all!=="undefined"){this.isIE=true;this.isSupported=true}else{if(h.indexOf("Apple Computer, Inc.")>-1){this.isSafari=true;this.isSupported=(a.indexOf("mac")>-1)}else{if(f.indexOf("gecko")!=-1){this.isGecko=true;this.isSupported=true}}}}}window.historyStorage.setup(d);if(this.isSafari){this.createSafari()}else{if(this.isOpera){this.createOpera()}}var b=this.getCurrentLocation();this.currentLocation=b;if(this.isIE){this.createIE(b)}var e=function(){g.firstLoad=null};this.addEventListener(window,"unload",e);if(this.isIE){this.ignoreLocationChange=true}else{if(!historyStorage.hasKey(this.PAGELOADEDSTRING)){this.ignoreLocationChange=true;this.firstLoad=true;historyStorage.put(this.PAGELOADEDSTRING,true)}else{this.ignoreLocationChange=false;this.fireOnNewListener=true}}var c=function(){g.checkLocation()};setInterval(c,100)},initialize:function(){if(this.isIE){if(!historyStorage.hasKey(this.PAGELOADEDSTRING)){this.fireOnNewListener=false;this.firstLoad=true;historyStorage.put(this.PAGELOADEDSTRING,true)}else{this.fireOnNewListener=true;this.firstLoad=false}}},addListener:function(a){this.listener=a;if(this.fireOnNewListener){this.fireHistoryEvent(this.currentLocation);this.fireOnNewListener=false}},addEventListener:function(c,b,a){if(c.addEventListener){c.addEventListener(b,a,false)}else{if(c.attachEvent){c.attachEvent("on"+b,function(){a(window.event)})}}},add:function(c,d){if(this.isSafari){c=this.removeHash(c);historyStorage.put(c,d);this.currentLocation=c;window.location.hash=c;this.putSafariState(c)}else{var b=this;var a=function(){if(b.currentWaitTime>0){b.currentWaitTime=b.currentWaitTime-b.waitTime}c=b.removeHash(c);if(document.getElementById(c)&&b.debugMode){var f="Exception: History locations can not have the same value as _any_ IDs that might be in the document, due to a bug in IE; please ask the developer to choose a history location that does not match any HTML IDs in this document. The following ID is already taken and cannot be a location: "+c;throw new Error(f)}historyStorage.put(c,d);b.ignoreLocationChange=true;b.ieAtomicLocationChange=true;b.currentLocation=c;window.location.hash=c;if(b.isIE){b.iframe.src="blank.html?"+c}b.ieAtomicLocationChange=false};window.setTimeout(a,this.currentWaitTime);this.currentWaitTime=this.currentWaitTime+this.waitTime}},isFirstLoad:function(){return this.firstLoad},getVersion:function(){return"0.6"},getCurrentLocation:function(){var a=(this.isSafari?this.getSafariState():this.getCurrentHash());return a},getCurrentHash:function(){var b=window.location.href;var a=b.indexOf("#");return(a>=0?b.substr(a+1):"")},PAGELOADEDSTRING:"DhtmlHistory_pageLoaded",listener:null,waitTime:200,currentWaitTime:0,currentLocation:null,iframe:null,safariHistoryStartPoint:null,safariStack:null,safariLength:null,ignoreLocationChange:null,fireOnNewListener:null,firstLoad:null,ieAtomicLocationChange:null,createIE:function(a){this.waitTime=400;var b=(historyStorage.debugMode?"width: 800px;height:80px;border:1px solid black;":historyStorage.hideStyles);var d="rshHistoryFrame";var c='<iframe frameborder="0" id="'+d+'" style="'+b+'" src="blank.html?'+a+'"></iframe>';document.write(c);this.iframe=document.getElementById(d)},createOpera:function(){this.waitTime=400;var a='<img src="javascript:location.href=\'javascript:dhtmlHistory.checkLocation();\';" style="'+historyStorage.hideStyles+'" />';document.write(a)},createSafari:function(){var e="rshSafariForm";var d="rshSafariStack";var c="rshSafariLength";var b=historyStorage.debugMode?historyStorage.showStyles:historyStorage.hideStyles;var a=(historyStorage.debugMode?"width:800px;height:20px;border:1px solid black;margin:0;padding:0;":historyStorage.hideStyles);var f='<form id="'+e+'" style="'+b+'"><input type="text" style="'+a+'" id="'+d+'" value="[]"/><input type="text" style="'+a+'" id="'+c+'" value=""/></form>';document.write(f);this.safariStack=document.getElementById(d);this.safariLength=document.getElementById(c);if(!historyStorage.hasKey(this.PAGELOADEDSTRING)){this.safariHistoryStartPoint=history.length;this.safariLength.value=this.safariHistoryStartPoint}else{this.safariHistoryStartPoint=this.safariLength.value}},getSafariStack:function(){var a=this.safariStack.value;return historyStorage.fromJSON(a)},getSafariState:function(){var a=this.getSafariStack();var b=a[history.length-this.safariHistoryStartPoint-1];return b},putSafariState:function(b){var a=this.getSafariStack();a[history.length-this.safariHistoryStartPoint]=b;this.safariStack.value=historyStorage.toJSON(a)},fireHistoryEvent:function(a){var b=historyStorage.get(a);this.listener.call(null,a,b)},checkLocation:function(){if(!this.isIE&&this.ignoreLocationChange){this.ignoreLocationChange=false;return}if(!this.isIE&&this.ieAtomicLocationChange){return}var a=this.getCurrentLocation();if(a==this.currentLocation){return}this.ieAtomicLocationChange=true;if(this.isIE&&this.getIframeHash()!=a){this.iframe.src="blank.html?"+a}else{if(this.isIE){return}}this.currentLocation=a;this.ieAtomicLocationChange=false;this.fireHistoryEvent(a)},getIframeHash:function(){var b=this.iframe.contentWindow.document;var a=String(b.location.search);if(a.length==1&&a.charAt(0)=="?"){a=""}else{if(a.length>=2&&a.charAt(0)=="?"){a=a.substring(1)}}return a},removeHash:function(b){var a;if(b===null||b===undefined){a=null}else{if(b===""){a=""}else{if(b.length==1&&b.charAt(0)=="#"){a=""}else{if(b.length>1&&b.charAt(0)=="#"){a=b.substring(1)}else{a=b}}}}return a},iframeLoaded:function(a){if(this.ignoreLocationChange){this.ignoreLocationChange=false;return}var b=String(a.search);if(b.length==1&&b.charAt(0)=="?"){b=""}else{if(b.length>=2&&b.charAt(0)=="?"){b=b.substring(1)}}window.location.hash=b;this.fireHistoryEvent(b)}};window.historyStorage={setup:function(b){if(typeof b!=="undefined"){if(b.debugMode){this.debugMode=b.debugMode}if(b.toJSON){this.toJSON=b.toJSON}if(b.fromJSON){this.fromJSON=b.fromJSON}}var d="rshStorageForm";var f="rshStorageField";var a=this.debugMode?historyStorage.showStyles:historyStorage.hideStyles;var e=(historyStorage.debugMode?"width: 800px;height:80px;border:1px solid black;":historyStorage.hideStyles);var c='<form id="'+d+'" style="'+a+'"><textarea id="'+f+'" style="'+e+'"></textarea></form>';document.write(c);this.storageField=document.getElementById(f);if(typeof window.opera!=="undefined"){this.storageField.focus()}},put:function(a,b){this.assertValidKey(a);if(this.hasKey(a)){this.remove(a)}this.storageHash[a]=b;this.saveHashTable()},get:function(a){this.assertValidKey(a);this.loadHashTable();var b=this.storageHash[a];if(b===undefined){b=null}return b},remove:function(a){this.assertValidKey(a);this.loadHashTable();delete this.storageHash[a];this.saveHashTable()},reset:function(){this.storageField.value="";this.storageHash={}},hasKey:function(a){this.assertValidKey(a);this.loadHashTable();return(typeof this.storageHash[a]!=="undefined")},isValidKey:function(a){return(typeof a==="string")},showStyles:"border:0;margin:0;padding:0;",hideStyles:"left:-1000px;top:-1000px;width:1px;height:1px;border:0;position:absolute;",debugMode:false,storageHash:{},hashLoaded:false,storageField:null,assertValidKey:function(a){var b=this.isValidKey(a);if(!b&&this.debugMode){throw new Error("Please provide a valid key for window.historyStorage. Invalid key = "+a+".")}},loadHashTable:function(){if(!this.hashLoaded){var a=this.storageField.value;if(a!==""&&a!==null){this.storageHash=this.fromJSON(a);this.hashLoaded=true}}},saveHashTable:function(){this.loadHashTable();var a=this.toJSON(this.storageHash);this.storageField.value=a},toJSON:function(a){return a.toJSONString()},fromJSON:function(a){return a.parseJSON()}};if(typeof(TrimPath)=="undefined"){TrimPath={}}(function(){if(TrimPath.evalEx==null){TrimPath.evalEx=function(src){return eval(src)}}var UNDEFINED;if(Array.prototype.pop==null){Array.prototype.pop=function(){if(this.length===0){return UNDEFINED}return this[--this.length]}}if(Array.prototype.push==null){Array.prototype.push=function(){for(var i=0;i<arguments.length;++i){this[this.length]=arguments[i]}return this.length}}TrimPath.parseTemplate=function(tmplContent,optTmplName,optEtc){if(optEtc==null){optEtc=TrimPath.parseTemplate_etc}var funcSrc=parse(tmplContent,optTmplName,optEtc);var func=TrimPath.evalEx(funcSrc,optTmplName,1);if(func!=null){return new optEtc.Template(optTmplName,tmplContent,funcSrc,func,optEtc)}return null};var exceptionDetails=function(e){return(e.toString())+";\n "+(e.message)+";\n "+(e.name)+";\n "+(e.stack||"no stack trace")+";\n "+(e.description||"no further description")+";\n "+(e.fileName||"no file name")+";\n "+(e.lineNumber||"no line number")};try{String.prototype.process=function(context,optFlags){var template=TrimPath.parseTemplate(this,null);if(template!=null){return template.process(context,optFlags)}return this}}catch(e){}TrimPath.parseTemplate_etc={};TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro";TrimPath.parseTemplate_etc.statementDef={"if":{delta:1,prefix:"if (",suffix:") {",paramMin:1},"else":{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},"for":{delta:1,paramMin:3,prefixFunc:function(stmtParts,state,tmplName,etc){if(stmtParts[2]!="in"){throw new etc.ParseError(tmplName,state.line,"bad for loop statement: "+stmtParts.join(" "))}var iterVar=stmtParts[1];var listVar="__LIST__"+iterVar;return["var ",listVar," = ",stmtParts[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",listVar,") != null) { ","var ",iterVar,"_ct = 0;","for (var ",iterVar,"_index in ",listVar,") { ",iterVar,"_ct++;","if (typeof(",listVar,"[",iterVar,"_index]) == 'function') {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var ",iterVar," = ",listVar,"[",iterVar,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},"var":{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(stmtParts,state,tmplName,etc){var macroName=stmtParts[1].split("(")[0];return["var ",macroName," = function",stmtParts.slice(1).join(" ").substring(macroName.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}};TrimPath.parseTemplate_etc.modifierDef={eat:function(v){return""},escape:function(s){return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(s){return String(s).toUpperCase()},"default":function(s,d){return s!=null?s:d}};TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape;TrimPath.parseTemplate_etc.Template=function(tmplName,tmplContent,funcSrc,func,etc){this.process=function(context,flags){if(context==null){context={}}if(context._MODIFIERS==null){context._MODIFIERS={}}if(context.defined==null){context.defined=function(str){return(context[str]!=undefined)}}for(var k in etc.modifierDef){if(context._MODIFIERS[k]==null){context._MODIFIERS[k]=etc.modifierDef[k]}}if(flags==null){flags={}}var resultArr=[];var resultOut={write:function(m){resultArr.push(m)}};try{func(resultOut,context,flags)}catch(e){if(flags.throwExceptions==true){throw e}var result=new String(resultArr.join("")+"[ERROR: template: <pre>"+exceptionDetails(e)+"</pre>]");result.exception=e;return result}return resultArr.join("")};this.name=tmplName;this.source=tmplContent;this.sourceFunc=funcSrc;this.toString=function(){return"TrimPath.Template ["+tmplName+"]"}};TrimPath.parseTemplate_etc.ParseError=function(name,line,message){this.name=name;this.line=line;this.message=message};TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return("TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message)};var parse=function(body,tmplName,etc){body=cleanWhiteSpace(body);var funcText=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"];var state={stack:[],line:1};var endStmtPrev=-1;while(endStmtPrev+1<body.length){var begStmt=endStmtPrev;begStmt=body.indexOf("{",begStmt+1);while(begStmt>=0){var endStmt=body.indexOf("}",begStmt+1);var stmt=body.substring(begStmt,endStmt);var blockrx=stmt.match(/^\{(cdata|minify|eval)/);if(blockrx){var blockType=blockrx[1];var blockMarkerBeg=begStmt+blockType.length+1;var blockMarkerEnd=body.indexOf("}",blockMarkerBeg);if(blockMarkerEnd>=0){var blockMarker;if(blockMarkerEnd-blockMarkerBeg<=0){blockMarker="{/"+blockType+"}"}else{blockMarker=body.substring(blockMarkerBeg+1,blockMarkerEnd)}var blockEnd=body.indexOf(blockMarker,blockMarkerEnd+1);if(blockEnd>=0){emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);var blockText=body.substring(blockMarkerEnd+1,blockEnd);if(blockType=="cdata"){emitText(blockText,funcText)}else{if(blockType=="minify"){emitText(scrubWhiteSpace(blockText),funcText)}else{if(blockType=="eval"){if(blockText!=null&&blockText.length>0){funcText.push("_OUT.write( (function() { "+blockText+" })() );")}}}}begStmt=endStmtPrev=blockEnd+blockMarker.length-1}}}else{if(body.charAt(begStmt-1)!="$"&&body.charAt(begStmt-1)!="\\"){var offset=(body.charAt(begStmt+1)=="/"?2:1);if(body.substring(begStmt+offset,begStmt+10+offset).search(TrimPath.parseTemplate_etc.statementTag)==0){break}}}begStmt=body.indexOf("{",begStmt+1)}if(begStmt<0){break}var endStmt=body.indexOf("}",begStmt+1);if(endStmt<0){break}emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);emitStatement(body.substring(begStmt,endStmt+1),state,funcText,tmplName,etc);endStmtPrev=endStmt}emitSectionText(body.substring(endStmtPrev+1),funcText);if(state.stack.length!=0){throw new etc.ParseError(tmplName,state.line,"unclosed, unmatched statement(s): "+state.stack.join(","))}funcText.push("}}; TrimPath_Template_TEMP");return funcText.join("")};var emitStatement=function(stmtStr,state,funcText,tmplName,etc){var parts=stmtStr.slice(1,-1).split(" ");var stmt=etc.statementDef[parts[0]];if(stmt==null){emitSectionText(stmtStr,funcText);return}if(stmt.delta<0){if(state.stack.length<=0){throw new etc.ParseError(tmplName,state.line,"close tag does not match any previous statement: "+stmtStr)}state.stack.pop()}if(stmt.delta>0){state.stack.push(stmtStr)}if(stmt.paramMin!=null&&stmt.paramMin>=parts.length){throw new etc.ParseError(tmplName,state.line,"statement needs more parameters: "+stmtStr)}if(stmt.prefixFunc!=null){funcText.push(stmt.prefixFunc(parts,state,tmplName,etc))}else{funcText.push(stmt.prefix)}if(stmt.suffix!=null){if(parts.length<=1){if(stmt.paramDefault!=null){funcText.push(stmt.paramDefault)}}else{for(var i=1;i<parts.length;i++){if(i>1){funcText.push(" ")}funcText.push(parts[i])}}funcText.push(stmt.suffix)}};var emitSectionText=function(text,funcText){if(text.length<=0){return}var nlPrefix=0;var nlSuffix=text.length-1;while(nlPrefix<text.length&&(text.charAt(nlPrefix)=="\n")){nlPrefix++}while(nlSuffix>=0&&(text.charAt(nlSuffix)==" "||text.charAt(nlSuffix)=="\t")){nlSuffix--}if(nlSuffix<nlPrefix){nlSuffix=nlPrefix}if(nlPrefix>0){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(0,nlPrefix).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}var lines=text.substring(nlPrefix,nlSuffix+1).split("\n");for(var i=0;i<lines.length;i++){emitSectionTextLine(lines[i],funcText);if(i<lines.length-1){funcText.push('_OUT.write("\\n");\n')}}if(nlSuffix+1<text.length){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(nlSuffix+1).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}};var emitSectionTextLine=function(line,funcText){var endMarkPrev="}";var endExprPrev=-1;while(endExprPrev+endMarkPrev.length<line.length){var begMark="${",endMark="}";var begExpr=line.indexOf(begMark,endExprPrev+endMarkPrev.length);if(begExpr<0){break}if(line.charAt(begExpr+2)=="%"){begMark="${%";endMark="%}"}var endExpr=line.indexOf(endMark,begExpr+begMark.length);if(endExpr<0){break}emitText(line.substring(endExprPrev+endMarkPrev.length,begExpr),funcText);var exprArr=line.substring(begExpr+begMark.length,endExpr).replace(/\|\|/g,"#@@#").split("|");for(var k in exprArr){if(exprArr[k].replace){exprArr[k]=exprArr[k].replace(/#@@#/g,"||")}}funcText.push("_OUT.write(");emitExpression(exprArr,exprArr.length-1,funcText);funcText.push(");");endExprPrev=endExpr;endMarkPrev=endMark}emitText(line.substring(endExprPrev+endMarkPrev.length),funcText)};var emitText=function(text,funcText){if(text==null||text.length<=0){return}text=text.replace(/\\/g,"\\\\");text=text.replace(/\n/g,"\\n");text=text.replace(/"/g,'\\"');funcText.push('_OUT.write("');funcText.push(text);funcText.push('");')};var emitExpression=function(exprArr,index,funcText){var expr=exprArr[index];if(index<=0){funcText.push(expr);return}var parts=expr.split(":");funcText.push('_MODIFIERS["');funcText.push(parts[0]);funcText.push('"](');emitExpression(exprArr,index-1,funcText);if(parts.length>1){funcText.push(",");funcText.push(parts[1])}funcText.push(")")};var cleanWhiteSpace=function(result){result=result.replace(/\t/g,"    ");result=result.replace(/\r\n/g,"\n");result=result.replace(/\r/g,"\n");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};var scrubWhiteSpace=function(result){result=result.replace(/^\s+/g,"");result=result.replace(/\s+$/g,"");result=result.replace(/\s+/g," ");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};TrimPath.parseDOMTemplate=function(elementId,optDocument,optEtc){if(optDocument==null){optDocument=document}var element=optDocument.getElementById(elementId);var content=element.value;if(content==null){content=element.innerHTML}content=content.replace(/&lt;/g,"<").replace(/&gt;/g,">");return TrimPath.parseTemplate(content,elementId,optEtc)};TrimPath.processDOMTemplate=function(elementId,context,optFlags,optDocument,optEtc){return TrimPath.parseDOMTemplate(elementId,optDocument,optEtc).process(context,optFlags)}})();var Light={Version:"1.4.0",_PORTAL_ON:"PORTAL_ON",_PERSON_ID:"personId",_LOGINED_USER_ID:"loginedUserId",_REMEMBERED_USER_ID:"rememberedUserId",_REMEMBERED_USER_PASSWORD:"rememberedUserPassword",_IS_SIGN_OUT:"isSignOut",_USER_LOCALE:"userLocale",_CURRENT_TAB:"currentTab",_PRIVACY_PREFIX:"privacy_",_PAGE_PREFIX:"page_",_MODE_PREFIX:"mode_",_STATE_PREFIX:"state_",_PARAM_PREFIX:"param_",_FUNCTION_PREFIX:"function_",_PW_PREFIX:"pwid_",_TAB_PREFIX:"tab_",_TAB_HEADER_PREFIX:"tabHeader_",_TAB_TITLE_PREFIX:"tabTitle_",_TAB_LIST:"tabList",_TAB_PANELS:"tabPanels",_PANEL_PREFIX:"panel_",_VIEW_MODE:"view",_EDIT_MODE:"edit",_HELP_MODE:"help",_CONFIG_MODE:"config",_HEADER_MODE:"header",_NORMAL_STATE:"normal",_MINIMIZED_STATE:"minimized",_MAXIMIZED_STATE:"maximized",_INIT_VIEW:"initView",_PORTAL_VIEW:"portalView",_PORTLET_VIEW:"portletView",maxZIndex:1,cacheStorage:{}};L$=function(b){if(arguments.length>1){for(var a=0,d=[],c=arguments.length;a<c;a++){d.push(L$(arguments[a]))}return d}return document.getElementById(b)};L$$=(typeof(document.querySelectorAll)!="undefined")?function(e){if(arguments.length>1){for(var d=0,g=[],f=arguments.length;d<f;d++){var c=L$$(arguments[d]);if(c){for(var b=0,a=c.length;b<a;b++){g.push(c[b])}}}return g}return document.querySelectorAll(e)}:function(){return[]};window.dhtmlHistory.create({toJSON:function(a){return JSON.stringify(a)},fromJSON:function(a){return JSON.parse(a)}});$(function(){Light.startup()});Light.startup=function(){Light.init();Light.start()};Light.init=function(){Light.permission={VIEW:1<<0,EDIT:1<<1,HELP:1<<2,CONFIG:1<<3,ADD:1<<4,UPDATE:1<<5,DELETE:1<<6,PORTAL_SIGN_UP:1<<7,PORTAL_SIGN_IN:1<<8,PORTAL_CHANGE_LANGUAGE:1<<9,PORTAL_TURN_OFF:1<<10,PORTAL_TITLE:1<<11,PORTAL_OPTIONS:1<<12,PORTAL_TAB_ADD:1<<13,PORTAL_TAB_DELETE:1<<14,PORTAL_TAB_DELETE_ALL:1<<15,PORTAL_CONTENT_ADD:1<<16,PORTAL_CONTENT_DELETE:1<<17,PORTAL_CONTENT_DELETE_ALL:1<<18};Light.needRender=(L$("portalContainer"))?false:true;var c=L$("REQUEST_SUFFIX");var b=Light._REQUEST_SUFFIX=(c)?c.title:".lp";Light._GET_INIT_VIEW_TMPL="getInitViewTemplates"+b;if(!L$(Light._INIT_VIEW)){Light.getInitViewTemplates(false)}Light.needReload=!Light.needRender?false:((L$("portalJSON"))?false:true);if(!Light.needRender){Light.maxZIndex=1000}Light._LOAD_PORTAL="/loadPortal"+b;Light._LOAD_TAB_CONTENT="/loadPortalTabContent"+b;Light._GET_TAB_BY_ID="/getPortalTabById"+b;Light._GET_TABS_BY_PARENT="/getPortalTabsByParent"+b;Light._SHOW_SUB_TAB="/showSubTab"+b;Light._GET_PORTLETS_BY_TAB="/getPortletsByTab"+b;Light._GET_PORTAL_VIEW_TMPL="/getPortalViewTemplates"+b;Light._GET_PORTLET_VIEW_TMPL="/getPortletViewTemplates"+b;Light._CHANGE_TITLE="/changeTitle"+b;Light._CHANGE_LANGUAGE="/changeLanguage"+b;Light._CHANGE_REGION="/changeRegion"+b;Light._CHANGE_TIMEZONE="/changeTimeZone"+b;Light._CHANGE_GENERAL="/changeGeneral"+b;Light._CHANGE_THEME="/changeTheme"+b;Light._ADD_TAB="/addTab"+b;Light._MANAGE_TAB="/manageTab"+b;Light._ADD_SUB_TAB="/addSubTab"+b;Light._EDIT_TAB_TITLE="/editTabTitle"+b;Light._DELETE_TAB="/deleteTab"+b;Light._ADD_CONTENT="/addContent"+b;Light._CONFIG_PORTLET="/configPortlet"+b;Light._LOGIN="/login"+b;Light._LOGOUT="/logout"+b;Light._DELETE_PORTLET="/deletePortlet"+b;Light._CHANGE_POSITION="/changePosition"+b;Light._GET_USER_DETAIL="/getUserDetail"+b;Light._REMEBER_STATE="/rememberState"+b;Light._REMEBER_MODE="/rememberMode"+b;Light._CHAT_WITH_BUDDY="/chatWithBuddy"+b;Light._CHAT_WITH_MEMBER="/chatWithMember"+b;Light._CHAT_WITH_PROFILE="/chatWithProfile"+b;Light._ACCEPT_CHAT="/acceptChat"+b;Light._REFUSE_CHAT="/refuseChat"+b;Light._CLOSE_CHAT="/closeChat"+b;Light._DELETE_BUDDY="/deleteBuddy"+b;Light._LISTEN_SERVER="/listenServer"+b;Light._CHECK_MY_URL="/checkMyUrl"+b;Light._SAVE_MY_URL="/saveMyUrl"+b;Light._GET_OBJECT_DESC="/getObjectDesc"+b;Light._SAVE_OBJECT_COMMENT="/saveObjectComment"+b;Light._GET_OBJECT_COMMENTS="/getObjectComments"+b;Light._SEND_MESSAGE="/sendMessage"+b;Light._ADD_FRIEND="/addFriendRequest"+b;Light._ADD_TO_FAVORITES="/addToFavorites"+b;Light._FORWARD_TO_FRIENDS="/forwardToFriends"+b;Light._BLOCK_USER="/blockUser"+b;Light._JOIN_TO_GROUP="/joinToGroup"+b;Light._INVITE_TO_GROUP="/inviteToGroup"+b;Light._VALIDATE_USER_ID="/validateUserId"+b;Light._VALIDATE_INTERNAL_URI="/validateInternalUri"+b;Light._RESIGN_GROUP="/resignGroup"+b;Light._GET_GROUP_PRIVACY="/getGroupPrivacy"+b;Light._SAVE_GROUP_PRIVACY="/saveGroupPrivacy"+b;Light._DELETE_GROUP_PROFILE="/deleteGroupProfile"+b;Light._SAVE_NOTE="/saveNote"+b;Light._TRACK_RSS_ITEM="/trackRssItem"+b;Light._READ_RECOMMENDED_ITEM="/readRecommendedItem"+b;Light._READ_VIEWED_ITEM="/readViewedItem"+b;Light._READ_POP_ITEM="/readPopItem"+b;Light._POP_BLOG="/popBlog"+b;Light._POP_AD="/popAd"+b;Light._POP_RSS_ITEM="/popRssItem"+b;Light._POP_BLOG_ITEM="/popBlogItem"+b;Light._POP_DELI_ITEM="/popDeliItem"+b;Light._POP_BOOKMARK_ITEM="/popBookmarkItem"+b;Light._POP_YOUTUBE_ITEM="/popYouTubeItem"+b;Light._POP_FORUM_ITEM="/popForumItem"+b;Light._POP_TOPIC_ITEM="/popTopicItem"+b;Light._FWD_RSS_FRIEND="/forwardAdToFriend"+b;Light._FWD_BLOG_FRIEND="/forwardBlogToFriend"+b;Light._FWD_BOOKMARK_FRIEND="/forwardBookmarkToFriend"+b;Light._FWD_DELI_FRIEND="/forwardDeliToFriend"+b;Light._FWD_FORUM_FRIEND="/forwardForumToFriend"+b;Light._FWD_TOPIC_FRIEND="/forwardTopicToFriend"+b;Light._FWD_YOUTUBE_FRIEND="/forwardYouTubeToFriend"+b;Light._SAVE_AD_BOOKMARK="/saveAdToBookmark"+b;Light._SAVE_BLOG_BOOKMARK="/saveBlogToBookmark"+b;Light._SAVE_FORUM_BOOKMARK="/saveForumToBookmark"+b;Light._SAVE_TOPIC_BOOKMARK="/saveTopicToBookmark"+b;Light._SAVE_YOUTUBE_BOOKMARK="/saveYouTubeToBookmark"+b;Light._SAVE_TO_HEADER="/saveToHeader"+b;Light._SAVE_TO_BACKGROUND="/saveToBackground"+b;Light._SAVE_TO_BOOKMARK="/saveToBookmark"+b;Light._SAVE_TO_MY_PICTURE="/saveToMyPicture"+b;Light._SAVE_BUDDY_TYPE="/saveBuddyType"+b;Light._CONFIG_MY_PICTURE="/configMyPicture"+b;Light._GET_PPT_CONTENT="/getPicturePositionTaggingContent"+b;Light._GET_PPT_EDIT="/getPicturePositionTaggingEdit"+b;Light._SAVE_PPT="/savePPT"+b;Light._DELETE_PPT="/deletePPT"+b;Light._SAVE_PPT_COORDINATE="/savePPTCoordinate"+b;Light._SHOW_INVITE_LIST="/showInviteList"+b;Light._INVITE_BUDDYS_TO_CHAT="/inviteBuddysToChat"+b;Light._ENTER_CHATTING_ROOM="/enterChattingRoom"+b;Light._ADD_USER_TAG="/addUserTag"+b;Light._SUBSCRIBE="/subscribe"+b;Light._CROP_PROFILE_PHOTO="/cropProfilePhoto"+b;c=L$(Light._PORTAL_ON);Light._ON=(c)?parseInt(c.title):1;var a=Light.getCookie(Light._PORTAL_ON);if(a){Light._ON=parseInt(a)}c=L$("PORTAL_WIDTH");Light._PORTAL_WIDTH=(c)?parseInt(c.title):1016;if(isIPad()){Light._PORTAL_WIDTH=Light.getScreenWidth()-Light.getBarWidth()}c=L$("PORTAL_BAR_WIDTH");Light._BAR_WIDTH=(c)?parseInt(c.title):120;c=L$("PORTLET_RENDER_ID_PREFIX");Light._PR_PREFIX=(c)?c.title:"prid_";c=L$("PORTLET_TITLE_ID_PREFIX");Light._PT_PREFIX=(c)?c.title:"ptid_";c=L$("PORTLET_HEADER_ID_PREFIX");Light._PH_PREFIX=(c)?c.title:"phid_";c=L$("PORTLET_BUTTON_ID_PREFIX");Light._PB_PREFIX=(c)?c.title:"pbid_";c=L$("LISTEN_SERVER_INTERVAL");Light.LISTEN_SERVER_INTERVAL=(c)?parseInt(c.title):10000;c=L$("SESSION_TIMEOUT");Light._SESSION_TIMEOUT=(c)?parseInt(c.title):1800000;c=L$("SESSION_TIMEOUT_WARNING");Light._SESSION_TIMEOUT_WARNING=(c)?parseInt(c.title):120000;c=L$("REQUEST_TIMEOUT");Light._REQUEST_TIMEOUT=(c)?parseInt(c.title):10000;c=L$("FONT_SIZE");Light._FONT_SIZE=(c)?parseInt(c.title):12;c=L$("THEME_ROOT");Light._THEME_ROOT=(c)?c.title:"/light/theme/";c=L$("EMAIL_PATTERN");Light._EMAIL_PATTERN=(c)?c.title:"/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/";c=L$("URI_PATTERN");Light._URI_PATTERN=(c)?c.title:"/^([a-zA-Z0-9]{3,})+$/";c=L$("PASSWORD_PATTERN");Light._PASSWORD_PATTERN=(c)?c.title:"/^([a-zA-Z0-9]{3,})+$/";c=L$("DOMAIN_LIST");Light._DOMAIN_LIST=(c)?c.title:".com,.net,.me,.info,.org,.mobi,.biz,.us,.ca,.asia,.in,.ws,.ag,.com.ag,.net.ag,.org.ag,.at,.be,.cc,.cn,.com.cn,.org.cn,.net.cn,.de,.eu,.fm,.gs,.co.in,.firm.in,.gen.in,.ind.in,.net.in,.org.in,.jobs,.jp,.ms,.nu,.co.nz,.net.nz,.org.nz,.tc,.tv,.tw,.com.tw,.org.tw,.idv.tw,.co.uk,.me.uk,.org.uk,.vg";c=L$("JS_HISTORY_DISABLE_LIST");Light._JS_HISTORY_DISABLE_LIST=(c)?c.title:false;c=L$("IM_RING_TONE");Light._IM_RING_TONE=(c)?c.title:"/ringtone/default.mp3";c=L$("JAVASCRIPT_LIBRARYS");Light._JAVASCRIPT_LIBRARYS=(c)?c.title:"";c=L$("CONTEXT_PATH");Light._CONTEXT_PATH=(c)?c.title:"";c=L$("PORTAL_COMMON_THEME");Light._PORTAL_COMMON_THEME=(c)?c.title:"common.css";c=L$("PORTAL_THEME_BASE");Light._PORTAL_THEME_BASE=(c)?c.title:"theme.css";c=L$("PORTAL_THEME");Light._PORTAL_THEME=(c)?c.title:"theme1";if($("link[href$=/theme/common.css]").length==0){Light.addCSS(Light.getContextPath()+Light._THEME_ROOT+(isIE()?"MSIE/":isOpera()?"Opera/":"")+Light._PORTAL_COMMON_THEME);Light.addCSS(Light.getThemePath(Light._PORTAL_THEME)+(isIE()?"/MSIE/":"/")+Light._PORTAL_THEME_BASE)}Light.getPortalViewTemplates();Light.getPortletViewTemplates();Light.getScripts();Light.loading=Light.getViewTemplate("loadingPortlet.view");Light.empty="<br/>"};Light.start=function(){if(Light._ON){if(Light.needRender){Light.showLoadingBar()}Light.portal=new LightPortal();Light.portal.startup();Light.afterStartup();if(Light.needRender){Light.hideLoadingBar()}}else{Light.offMode()}};Light.onMode=function(){Light._ON=true;Light.setCookie(Light._PORTAL_ON,1);$("#offMode").remove();Light.start()};Light.offMode=function(){Light._ON=false;Light.setCookie(Light._PORTAL_ON,0);$("<span>",{id:"offMode"}).html(Light.getViewTemplate("offMode.view",null)).appendTo("body")};Light.afterStartup=function(){dhtmlHistory.initialize();dhtmlHistory.addListener(Light.historyListener);setTimeout((function(){Light.refreshAd()}),1000);Light.autoListenServer();Light.setSessionTimer()};Light.historyListener=function(location,historyData){if(Light.disableHistory()){return}if(isSafari()){var url=document.location.href;var i=url.indexOf("#");location=(i>=0)?url.substr(i+1):""}if(location.indexOf(Light._PRIVACY_PREFIX)>=0){var index=location.indexOf(Light._PRIVACY_PREFIX);var privacy=location.substr(index+Light._PRIVACY_PREFIX.length,1);if(privacy>0&&!Light.isLogin()){Light.portal.allTabs[0].focus(false);Light.showLogin(false);return}}var len=Light.portal.allPortlets.length-1;for(var i=len;i>=0;i--){var portlet=Light.portal.allPortlets[i];if(portlet){if(portlet.isPopupWindow){portlet.close(true)}break}}var actions=location.split("/");var pid;var mode="";var state="";var params="";var done;len=actions.length;for(var i=0;i<len;i++){if(actions[i].indexOf(Light._PAGE_PREFIX)>=0){var tabIds=actions[i].substr(Light._PAGE_PREFIX.length).split("-");var found=false;var tLen=tabIds.length;for(var j=0;j<tLen;j++){var tab=Light.getTabById(tabIds[j]);if(tab){var segment=L$(Light._TAB_HEADER_PREFIX+tab.serverId);if(segment){found=true;if(segment.className!="current"){tab.focus(false)}}}}if(!found&&tLen>0){var opt={method:"post",asynchronous:false,postBody:"tabId="+tabIds[tLen-1]};var tabJSON=Light.ajax.sendRequest(Light._GET_TAB_BY_ID,opt);if(tabJSON&&tabJSON.length>10){tabDatas=JSON.parse(tabJSON);var tab=new LightPortalTab(tabDatas[0]);tab.open();Light.portal.tabs.push(tab);tab.focus(false);found=true}}if(!found&&Light.portal.tabs.length>0){Light.portal.tabs[0].focus()}}else{if(actions[i].indexOf(Light._PR_PREFIX)>=0){pid=actions[i]}else{if(actions[i].indexOf(Light._MODE_PREFIX)>=0){mode=actions[i].substr(Light._MODE_PREFIX.length)}else{if(actions[i].indexOf(Light._STATE_PREFIX)>=0){state=actions[i].substr(Light._STATE_PREFIX.length)}else{if(actions[i].indexOf(Light._PARAM_PREFIX)>=0){params=actions[i].substr(Light._PARAM_PREFIX.length)}else{if(actions[i].indexOf(Light._FUNCTION_PREFIX)>=0){var method=actions[i].substr(Light._FUNCTION_PREFIX.length);try{eval(method+"()");done=true}catch(err){setTimeout((function(){Light.getCurrentTab().refreshPortlets()}),200)}}}}}}}}if(pid){if(!done){setTimeout((function(){Light.executeRender(pid,mode,state,params)}),200)}}else{var tab=Light.getCurrentTab();if(tab){tab.normalAll()}}};Light.addHistory=function(c){if(Light.disableHistory()){return}if(isSafari()&&typeof c!="undefined"&&c.indexOf(Light._FUNCTION_PREFIX)>=0){return}var a=Light.getCurrentTab();var b=Light._PRIVACY_PREFIX+a.privacy+"/"+Light._PAGE_PREFIX+((a.parentId>0)?a.parentId+"-"+a.serverId:a.serverId);if(typeof c!="undefined"&&c.length>0){b+="/"+c}dhtmlHistory.add(b,"")};Light.addFunctionHistory=function(a){Light.addHistory(Light._FUNCTION_PREFIX+a)};Light.disableHistory=function(){if(!Light._ON){return true}if(Light._JS_HISTORY_DISABLE_LIST){var c=Light._JS_HISTORY_DISABLE_LIST.split(",");var a=document.location.href;for(var b in c){if(a.indexOf(c[b])>0){return true}}}return false};Light.refreshPortal=function(a){Light.reloadPortal(a)};Light.reloadPortal=function(a){if(a){var b=document.location.href;if(b.indexOf("#")>0){b=b.substring(0,b.indexOf("#"))}window.location=b}else{window.location.reload(true)}};Light.getContextPath=function(){var a=L$("CONTEXT_PATH");return(a)?a.title:Light._CONTEXT_PATH};Light.getAllViewTemplates=function(){Light.getInitViewTemplates();Light.getPortalViewTemplates();Light.getPortletViewTemplates()};Light.getInitViewTemplates=function(a){var b=Light.ajax.sendRequest(Light._GET_INIT_VIEW_TMPL,{method:"get",asynchronous:(a==null||a)?true:false,onSuccess:Light.getInitViewTemplatesHandler});if(b){Light.setInitViewTemplates(b)}};Light.getInitViewTemplatesHandler=function(a){Light.setInitViewTemplates(a.responseText)};Light.setInitViewTemplates=function(a){$("#"+Light._INIT_VIEW).remove();$("<div>",{id:Light._INIT_VIEW}).html(a).appendTo("body")};Light.getPortalViewTemplates=function(){Light.ajax.sendRequest(Light._GET_PORTAL_VIEW_TMPL,{method:"get",onSuccess:Light.getPortalViewTemplatesHandler})};Light.getPortalViewTemplatesHandler=function(a){$("#"+Light._PORTAL_VIEW).remove();$("<div>",{id:Light._PORTAL_VIEW}).html(a.responseText).appendTo("body")};Light.getPortletViewTemplates=function(){Light.ajax.sendRequest(Light._GET_PORTLET_VIEW_TMPL,{method:"get",onSuccess:Light.getPortletViewTemplatesHandler})};Light.getPortletViewTemplatesHandler=function(a){$("#"+Light._PORTLET_VIEW).remove();$("<div>",{id:Light._PORTLET_VIEW}).html(a.responseText).appendTo("body")};Light.getScripts=function(){if(Light._JAVASCRIPT_LIBRARYS){var c=Light._JAVASCRIPT_LIBRARYS.split(",");for(var b=0;b<c.length;b++){if(c[b]){var a=document.createElement("script");a.setAttribute("language","JavaScript");a.setAttribute("src",(c[b].startsWith("http"))?c[b]:document.location.protocol+"//"+document.domain+((document.location.port)?":"+document.location.port:"")+Light.getContextPath()+"/"+c[b]);document.getElementsByTagName("head")[0].appendChild(a)}}}};Light.getViewTemplate=function(a,b){return(L$(a))?TrimPath.processDOMTemplate(a,b):""};Light.isLogin=function(){return(Light.getCookie(Light._LOGINED_USER_ID))?true:false};Light.getUserId=function(){return(Light.userId)?Light.userId:Light.getCookie(Light._LOGINED_USER_ID)};Light.getRememberedUserId=function(){var a=Light.getCookie(Light._REMEMBERED_USER_ID);return(a)?Base64.decode(a):""};Light.getCurrentTab=function(){return(Light.currentTab)?Light.currentTab:Light.portal.allTabs.get(Light.getCurrentTabId(),"serverId")};Light.getTabById=function(a){return Light.portal.allTabs.get(a,"serverId")};Light.getTabByName=function(a){return Light.portal.allTabs.get(a,"label")};Light.getPortletById=function(f){var c=f.split("_");if(c.length>2){var d=c[1];var a=c[2];var b=c[3];var e=Light.portal.tabs[d].portlets[a][b];return e}else{if(c.length==2){return Light.portal.allPortlets.get(c[1],"serverId")}}};Light.getPortletByName=function(c){var e=Light.getCurrentTab();var a=e.portlets.length;for(var d=0;d<a;d++){var b=e.portlets[d];if(b){var f=b.get(c,"name");if(f){return f}}}return Light.portal.allPortlets.get(c,"name")};Light.getPopupPortletByName=function(a){for(var b=Light.portal.allPortlets.length;b--;){var c=Light.portal.allPortlets[b];if(c&&c.isPopupWindow&&c.name==a){return c}}};Light.noticePortlet=function(b,g,d,f,c,a){var e=Light.getPortletByName(b);if(e){if(c==null){c=true}if(a==null){a=true}Light.executeRender(e.id,g,d,f,"",true,c,a)}};Light.createParams=function(c,b){var a=[];a.push("responseId="+c);a.push("tabId="+Light.getCurrentTab().serverId);a.push("portletId="+b.serverId);a.push("userId="+Light.getUserId());a.push("mode="+b.mode);if(b.maximized){a.push("state=maximized")}if(b.parameter){a.push(b.parameter)}return a};Light.executeAction=function(b,c,g,m,n,l,a,e){var o=Light.getPortletById(b);if(!o){return}if(document.state){a=document.state}if(a){if(((a==Light._MAXIMIZED_STATE&&!o.maximized)||(a==Light._NORMAL_STATE&&o.maximized))&&o.allowMaximized){o.windowMaximize()}else{if(a==Light._MINIMIZED_STATE&&o.allowMinimized){o.windowMinimize(o)}}}o.mode=(document.mode)?document.mode:((l)?l:Light._VIEW_MODE);o.refreshButtons();var p=Light.createParams(b,o);if(!c){c=$("#"+b+" form")}if(c){var k=$(c).serializeArray();$.each(k,function(q,r){p.push(r.name+"="+escape(encodeURIComponent(r.value)))})}if(g){p.push("action="+g)}if(n){p.push("parameter="+escape(encodeURIComponent(n)))}if(e){var f=e.split(";");for(var j=0;j<f.length;j++){if(f[j].length>0){var h=f[j].split("=");if(h.length==2){p.push(h[0]+"="+escape(encodeURIComponent(h[1])))}}}}var d=p.join("&");Light.ajax.sendRequestAndUpdate(o.requestUrl,b,{method:"post",evalScripts:o.allowJS,parameters:d});if(document.resetLastAction){o.lastAction=null}document.currentForm=null;document.pressed=null;document.pressedName=null;document.parameter=null;document.mode=null;document.state=null;document.resetLastAction=null};Light.executeRender=function(b,j,a,d,n,q,k,l){if(q==null){q=true}if(k==null){k=true}if(l==null){l=true}var o=Light.getPortletById(b);if(!o){return}if(a){if(((a==Light._MAXIMIZED_STATE&&!o.maximized)||(a==Light._NORMAL_STATE&&o.maximized))&&o.allowMaximized){o.windowMaximize()}if(a==Light._MINIMIZED_STATE){if(!o.maximized&&o.allowMinimized){o.windowMaximize()}return}}if(!j){o.mode=Light._VIEW_MODE}else{if(j!=Light._HEADER_MODE){o.mode=j;o.refreshButtons()}}var m=o.name+"."+o.mode;if(o.maximized){if(L$(o.name+".max."+o.mode)){m=o.name+".max."+o.mode;var h={id:o.id,userId:Light.getRememberedUserId()};Light.setPortletContent(h.id,Light.getViewTemplate(m,h));return}}if(L$(m)){var h={id:o.id,userId:Light.getRememberedUserId()};Light.setPortletContent(h.id,Light.getViewTemplate(m,h));return}var p=Light.createParams(b,o);if(k){p.push("isRenderUrl=true")}if(d){var e=d.split(";");for(var g=0;g<e.length;g++){if(e[g].length>0){var f=e[g].split("=");if(f.length==2){p.push(f[0]+"="+escape(encodeURIComponent(f[1])))}}}}if(n){p.push("parameter="+escape(encodeURIComponent(n)))}var c=p.join("&");if(q&&o.mode!=Light._HEADER_MODE){o.lastAction=c}Light.ajax.sendRequestAndUpdate(o.requestUrl,b,{asynchronous:l,evalScripts:o.allowJS,parameters:c});document.parameter=null;if(!o.isPopupWindow&&o.mode!=Light._HEADER_MODE&&!isSafari()){Light.addHistory(b+"/"+Light._MODE_PREFIX+o.mode+"/"+Light._STATE_PREFIX+a+"/"+Light._PARAM_PREFIX+((d)?d:""))}};Light.executeRefresh=function(e){var d=Light.getPortletById(e);if(!d){return}if(d.lastAction){var c=d.lastAction.split("&");for(var b=c.length;b--;){if(c[b].indexOf("state")>=0||c[b].indexOf("portletClientWidth")>=0){delete c[b]}}if(d.maximized){c.push("state=maximized")}if(d.refreshAction){d.refreshAction=false;c.push("refresh=true")}c.push("portletClientWidth="+d.width,"disablePageRefresh=1");var a=c.join("&");Light.ajax.sendRequestAndUpdate(d.requestUrl,e,{evalScripts:d.allowJS,parameters:a})}else{Light.executePortlet(e)}};Light.executePortlet=function(d){var c=Light.getPortletById(d);if(!c){return}var b=Light.createParams(d,c);b.push("isRenderUrl=true","disablePageRefresh=1");if(c.refreshAction){c.refreshAction=false;b.push("refresh=true")}var a=b.join("&");c.lastAction=a;a+="&portletClientWidth="+c.width;if(c.state==Light._MINIMIZED_STATE&&!c.minimized){c.minimize()}else{if(c.state==Light._MAXIMIZED_STATE&&!c.maximized){c.maximize()}else{Light.ajax.sendRequestAndUpdate(c.requestUrl,d,{evalScripts:c.allowJS,parameters:a})}}};Light.executeAtClient=function(g){if(!g.notFirstLoad){var h="portlet"+g.serverId;var d=L$(h+".title");if(d){var f=d.value;if(f&&f.trim().length>0){var e=JSON.parse(f);Light.setPortletTitle(g.id,e)}}if(g.type==2){var a=h+".data";if(g.maximized&&L$(h+".max.data")){a=h+".max.data"}d=L$(a);if(d){try{var c=Light.getViewTemplate(a,null);var e=(c)?JSON.parse(c):{};if(typeof e.id=="undefined"){e.id=g.id}if(typeof e.userId=="undefined"){e.userId=Light.getRememberedUserId()}if(typeof e.view=="undefined"){e.view=g.name+"."+g.mode}if(typeof e.success=="undefined"){e.success=""}if(typeof e.error=="undefined"){e.error=""}g.data=e;if(L$(e.view)){Light.setPortletContent(e.id,Light.getViewTemplate(e.view,e));g.notFirstLoad=true;return true}}catch(b){}}}if(g.maximized&&L$(h+".max."+g.mode)){h=h+".max."+g.mode}else{h=h+"."+g.mode}if(L$(h)){Light.setPortletContent(g.id,L$(h).value);Light.refreshTextFontSize();g.notFirstLoad=true;return true}}h=g.requestUrl;if(h.lastIndexOf("/")>=0){h=h.substr(h.lastIndexOf("/")+1)}if(h.indexOf(".")>0){h=h.substring(0,h.indexOf("."))}if(g.maximized&&L$(h+".max."+g.mode)){h=h+".max."+g.mode}else{h=h+"."+g.mode}if(L$(h)){var e={id:g.id,success:"",error:"",userId:Light.getRememberedUserId()};Light.setPortletContent(e.id,Light.getViewTemplate(h,e));return true}return false};Light.autoListenServer=function(){if(Light.isLogin()){Light.listenServer()}};Light.listenServer=function(){var a={method:"post",postBody:"",onSuccess:function(b){Light.listenServerHandler(b)},on404:function(b){Light.serverError=true;Light.alert('Error 404: location "'+b.statusText+'" was not found.')},onFailure:function(b){Light.serverError=true;Light.alert("Error "+b.status+" -- "+b.statusText)}};Light.ajax.sendRequest(Light._LISTEN_SERVER,a)};Light.listenServerHandler=function(d){if(!Light.serverError){setTimeout("Light.autoListenServer()",Light.LISTEN_SERVER_INTERVAL)}if(!d.responseText){return}var f=JSON.parse(d.responseText);if(f.chat){var b=f.chat;if(b.event=="chat"){if(!b.ring){b.ring=Light._IM_RING_TONE}b.yes=Light.getMessage("BUTTON_OK"),b.no=Light.getMessage("BUTTON_CANCEL");createPopupDiv("instantMessage","instantMessage.jst",280,b,null,null)}}if(f.tabNotification){Light.portal.tabs.forEach(function(l,k,j){l.setNotification()});if(f.tabNotification.length>0){var a=f.tabNotification.length;for(var c=0;c<a;c++){var g=f.tabNotification[c];if(g.tabId){var e=Light.getTabById(g.tabId);if(e){e.setNotification(g.notification)}}}}}if(f.portletNotification&&f.portletNotification.length>0){var a=f.portletNotification.length;for(var c=0;c<a;c++){var g=f.portletNotification[c];if(g.portletId){var h=Light.portal.allPortlets.get(g.portletId,"serverId");if(h&&g.refresh){h.refresh(false)}}}}};Light.refreshWindowTransparent=function(){$("#tabPanels").find("*").css({backgroundColor:(Light.portal.data.portletWindowTransparent)?"transparent":""});Light.getCurrentTab().refreshWindowTransparent()};Light.refreshTextColor=function(){$("#tabPanels").find("*").css({color:Light.portal.data.textColor});for(var a=Light.portal.allPortlets.length;a--;){var b=Light.portal.allPortlets[a];if(b){b.refreshTextColor()}}};Light.setTextFont=function(){var a=Light._FONT_SIZE+parseInt(Light.portal.data.fontSize);$("#portalContainer").css({fontSize:a+"px",fontFamily:Light.portal.data.textFont})};Light.refreshTextFontSize=function(){var a=Light._FONT_SIZE+parseInt(Light.portal.data.fontSize);$("#portalContainer").find("*").css({fontSize:a+"px",fontFamily:Light.portal.data.textFont});$("#portalFooter").find("*").css({fontSize:a*0.8+"px"});$("#portalTitle").css({fontSize:a*1.5+"px"});Light.getCurrentTab().rePositionAll()};Light.getCurrentTabId=function(){return(Light.currentTab)?Light.currentTab.serverId:Light.seekCurrentTabId(Light._TAB_LIST)};Light.seekCurrentTabId=function(f){var b=L$(f);if(b){var a=b.children.length;for(i=0;i<a;i++){var e=b.children[i];if(e&&e.tagName=="LI"){if("current"==e.className){var d=e.id;var c=d.split("_")[1];if(L$(Light._TAB_LIST+c)){return Light.seekCurrentTabId(Light._TAB_LIST+c)}else{return c}}}}}return 0};Light.setSessionTimer=function(){if(!Light.isLogin()){return}if(Light._SESSION_TIMEOUT==0){return}if(Light.sessionTimer!=null){clearTimeout(Light.sessionTimer);Light.sessionTimer=null}Light.sessionStartdate=new Date();Light.sessionTimer=setTimeout((function(){Light.checkSessionTimeout(Light.sessionStartdate)}),Light._SESSION_TIMEOUT)};Light.checkSessionTimeout=function(a){if(Light.sessionStartdate==a){Light.sessionTimeoutWarningTime=Light._SESSION_TIMEOUT_WARNING;Light.sessionTimeoutWarning()}};Light.sessionTimeoutWarning=function(){if(Light.sessionTimeoutWarningTime>0){var a={ok:Light.getMessage("BUTTON_OK"),cancel:Light.getMessage("BUTTON_CANCEL"),timeLeft:Light.sessionTimeoutWarningTime/1000};hidePopupDiv("sessionTimeoutWarning");createPopupDiv("sessionTimeoutWarning","sessionTimeoutWarning.jst",400,a,null,null);Light.sessionTimeoutWarningTime=Light.sessionTimeoutWarningTime-1000;Light.sessionWarningTimer=setTimeout((function(){Light.sessionTimeoutWarning()}),1000)}else{Light.sessionTimeout()}};Light.sessionTimeout=function(){Light.logout()};Light.refreshSessionTiimeout=function(){hidePopupDiv("sessionTimeoutWarning");clearTimeout(Light.sessionWarningTimer);Light.sessionWarningTimer=null;Light.setSessionTimer()};Light.refreshPortletTitle=function(a){var b=JSON.parse(a.responseText);Light.setPortletTitle(b.id,b)};Light.setPortletTitle=function(a,b){var c=Light.getPortletById(a);if(c){c.setTitle(b)}};Light.setPortletContent=function(responseId,inHTML){var portlet=Light.getPortletById(responseId);if(portlet&&!portlet.minimized){if(portlet.allowJS){var scriptFragment="(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)";var matchAll=new RegExp(scriptFragment,"img");var scripts=inHTML.match(matchAll);if(scripts!=null){portlet.setContent(inHTML.replace(matchAll,""));for(var i=0,len=scripts.length;i<len;i++){var script=scripts[i];var scriptBegin="(?:<script.*?>)";script=script.replace(new RegExp(scriptBegin,"img"),"");var scriptEnd="(?:<\/script>)";script=script.replace(new RegExp(scriptEnd,"img"),"");try{eval(script)}catch(e){}}}else{var scriptFragment2="(?:<script.*?>)";matchAll=new RegExp(scriptFragment2,"im");var scripts=inHTML.match(matchAll);if(scripts!=null){portlet.setContent(inHTML.replace(matchAll,""));for(var i=0,len=scripts.length;i<len;i++){var script=scripts[i];var s=document.createElement("script");s.type="text/javascript";var indx=script.indexOf("src=");script=script.substr(indx+5);indx=script.indexOf(".js");script=script.substring(0,indx+3);s.src=script;document.getElementsByTagName("head")[0].appendChild(s)}}else{portlet.setContent(inHTML)}}}else{portlet.setContent(inHTML)}Light.refreshTextFontSize();Light.refreshTextColor();setTimeout((function(){Light.repositionPortlets(portlet)}),100)}};Light.repositionPortlets=function(a){a.parent.repositionPortlets(a)};Light.getThemePath=function(a){if(!a){a=Light.portal.data.theme}return Light.getContextPath()+Light._THEME_ROOT+a};Light.showLoadingBar=function(){$("<div>",{id:"loadingDiv",className:"loading"}).html(Light.getViewTemplate("loading.view")).appendTo("body")};Light.hideLoadingBar=function(){$("#loadingDiv").remove()};Light.getScreenWidth=function(){var a=document.documentElement.scrollWidth;a=a-Light.getScrollbarWidth();return a};Light.getBarWidth=function(){return Light._BAR_WIDTH};Light.getContainerWidth=function(){return Light._PORTAL_WIDTH};Light.getContainerLeft=function(){if(Light.getScreenWidth()>(Light.getContainerWidth()+(Light.getBarWidth()*2))){return(Light.getScreenWidth()-Light.getContainerWidth())/2}else{return Light.getBarWidth()}};Light.getScrollbarWidth=function(){return 24};Light.getHighLightBar=function(){return Light.newElement({element:"div",className:"highlight"})};Light.getProgressBar=function(){return Light.newElement({element:"div",className:"progressBar",innerHTML:Light.getViewTemplate("progressBar.view")})};Light.getLatestActionObject=function(){return{event:null,id:null,method:null,portlet:null}};Light.refreshAd=function(){var b=document.getElementsByTagName("iframe");if(b&&b.length){for(var a=b.length;a--;){if(b[a].id.startsWith("google_ads_frame")){var c=b[a].src+"&date="+new Date().getTime();b[a].contentWindow.location.replace(c)}}}};Light.showPopupPortlet=function(e,b,h,d,a,c,g){window.scrollTo(0,0);var f=new PortletPopupWindow(11,e,b,h,d,"",a,c,true,false,false,false,false,false,false,0,false,"","","","",false,false);if(g){f.mode=g}f.refresh()};Light.playMusic=function(a){if(!a&&Light.portal.data.bgMusic&&Light.portal.data.bgMusic!="none"){a=Light.portal.data.bgMusic}if(a){if(Light.music){document.body.removeChild(Light.music)}if(!a.startsWith("http")&&!a.startsWith("HTTP")){a=Light._CONTEXT_PATH+a}Light.music=Light.newElement({element:"div",innerHTML:"<embed src='"+a+"' autostart='true' loop='true' onreadystatechange='javascript:Light.checkMusic(this);' width='2' height='0'></embed><noembed><bgsound src='"+a+"' loop='1' onreadystatechange='javascript:Light.checkMusic(this);'></noembed>"});document.body.appendChild(Light.music)}};Light.addCSS=function(a){$("<link>",{rel:"stylesheet",type:"text/css",href:a}).appendTo("head")};Light.hasPermission=function(a){return(Light.portal.data.permissions&a)?true:false};if(window.DOMParser&&window.XMLSerializer&&window.Node&&Node.prototype&&Node.prototype.__defineGetter__){if(!Document.prototype.loadXML){Document.prototype.loadXML=function(b){var c=(new DOMParser()).parseFromString(b,"text/xml");while(this.hasChildNodes()){this.removeChild(this.lastChild)}for(var a=0;a<c.childNodes.length;a++){this.appendChild(this.importNode(c.childNodes[a],true))}}}Document.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}Light.ajax={sendRequestAndUpdate:function(f,a,c){var d=this.getXmlHttpObject();if(!c.method){c.method="post"}if(c.asynchronous==null){c.asynchronous=true}var b=(f.lastIndexOf("/")<=0)?Light.getContextPath()+f:f;if(c.method=="get"){if(b.indexOf("?")>0){b+="&_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}else{b+="?_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}}d.open(c.method,b,c.asynchronous);if(c.asynchronous){d.onreadystatechange=function(){if(d.readyState==4){Light.ajax.onRequestComplete(d)}}}if(c.method=="post"){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}else{d.setRequestHeader("Content-Type","text/xml")}var e=c.parameters;if(c.postBody){e=c.postBody}if(e){e+="&_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}else{e="_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}d.send(c.method=="post"?e:null);log("url: "+b+" method: "+c.method+((c.method=="post")?" parameter: "+e:"")+" asyn: "+c.asynchronous);setTimeout((function(){Light.ajax.timeout(d,a)}),Light._REQUEST_TIMEOUT);if(!c.asynchronous){Light.ajax.onRequestComplete(d)}},timeout:function(b,a){if(b){if(b.status<200||b.status>=300){b.abort();Light.setPortletContent(a,"Content is not available.");b=null}}else{Light.setPortletContent(a,"Content is not available.")}},sendRequest:function(f,b){var d=this.getXmlHttpObject();if(!b.method){b.method="post"}if(b.asynchronous==null){b.asynchronous=true}var c=Light.getContextPath();var a=(f.lastIndexOf("/")<=0)?((c)?c+f:f):f;if(b.method=="get"){if(a.indexOf("?")>0){a+="&_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}else{a+="?_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}}d.open(b.method,a,b.asynchronous);if(b.asynchronous){d.onreadystatechange=function(){if(d.readyState==4&&d.status==200){if(b.onSuccess!=null){b.onSuccess(d)}d=null}}}if(b.method=="post"){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}else{d.setRequestHeader("Content-Type","text/xml")}var e=b.parameters;if(b.postBody){e=b.postBody}if(e){e+="&_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}else{e="_requestOwnerId="+Light.getUserId()+"&clientUrl="+document.location.href}d.send(b.method=="post"?e:null);log("url: "+a+" method: "+b.method+((b.method=="post")?" parameter: "+e:"")+" asyn: "+b.asynchronous);if(!b.asynchronous){return d.responseText}},onRequestComplete:function(f){if(!f){return}if(f.status!=200){return}if(f.responseText){var e=f.responseText;var c=e.indexOf("id='");while(c>0){var h=e.substr(c+4);c=h.indexOf("'");var a=h.substring(0,c);c=h.indexOf("'>");h=h.substr(c+2);c=h.indexOf("</response>");var d=h.substring(0,c);if(a.startsWith(Light._PT_PREFIX)){if(d&&d.trim().length>0){var g=JSON.parse(d);Light.setPortletTitle(a,g)}}else{Light.setPortletContent(a,d)}e=h.substr(c);c=e.indexOf("id='")}}else{if(f.responseXML){var b=f.responseXML.getElementsByTagName("ajax-response");if(b){Light.ajax.processAjaxResponse(b[0].childNodes)}}}f=null},processAjaxResponse:function(c){for(var b=0;b<c.length;b++){var f=c[b];if(f.nodeType!=1){continue}var a=f.getAttribute("id");var d=Light.ajax.getContentAsString(f);if(a.startsWith(Light._PT_PREFIX)){if(d&&d.trim().length>0){var e=JSON.parse(d);Light.setPortletTitle(a,e)}}else{Light.setPortletContent(a,d)}}},getContentAsString:function(a){return a.xml!=undefined?Light.ajax.getContentAsStringIE(a):Light.ajax.getContentAsStringMozilla(a)},getContentAsStringIE:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){var d=a.childNodes[b];if(d.nodeType==4){c+=d.nodeValue}else{c+=d.xml}}return c},getContentAsStringMozilla:function(b){var a=new XMLSerializer();var d="";for(var c=0;c<b.childNodes.length;c++){var e=b.childNodes[c];if(e.nodeType==4){d+=e.nodeValue}else{d+=a.serializeToString(e)}}return d},getXmlHttpObject:function(){var a;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){a=false}}if(!a&&typeof XMLHttpRequest!="undefined"){try{a=new XMLHttpRequest()}catch(c){a=false}}return a}};function showDealFacets(b){var j=Light.getPortletByName("dealPortlet");if(j&&j.data&&!Light.portal.mobile){var f=j.data;f.view="dealFacets.view";var a="dealFacetsPortlet";var h=Light.getPopupPortletByName(a);if(h){h.close()}var d=L$(a);if(d){document.body.removeChild(d)}var c=Light.getBarWidth()-10;var e=Light.portal.layout.containerLeft-c-5;var g=L$("portalContent").offsetTop;h=new PortletPopupWindow(11,e,c,Light.getMessage("TITLE_SEARCH_FILTERS"),"","",a,"/dealFacetsPortlet.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false,true,4,2,g);h.refreshData(f)}}initMap=function(c){if(GBrowserIsCompatible()){var a=document.getElementById("map");a.style.width=280;a.style.height=300;var b=Light.getPortletById(c);b.parent.repositionPortlets(b);map=new GMap2(document.getElementById("map"));map.addControl(new GSmallMapControl());map.addControl(new GMapTypeControl());map.setCenter(new GLatLng(37.4419,-122.1419),13);geocoder=new GClientGeocoder()}};showAddress=function(a,b){initMap(b);if(geocoder){geocoder.getLatLng(a,function(c){if(!c){alert(a+" not found")}else{map.setCenter(c,13);var d=new GMarker(c);map.addOverlay(d);d.openInfoWindowHtml(a)}})}};initMaxMap=function(){if(GBrowserIsCompatible()){map=new GMap2(document.getElementById("map"));map.addControl(new GSmallMapControl());map.addControl(new GMapTypeControl());map.setCenter(new GLatLng(37.4419,-122.1419),13);geocoder=new GClientGeocoder()}};showMaxAddress=function(a){initMaxMap();if(geocoder){geocoder.getLatLng(a,function(b){if(!b){alert(a+" not found")}else{map.setCenter(b,13);var c=new GMarker(b);map.addOverlay(c);c.openInfoWindowHtml(a)}})}};function Marquee(){this.ID=document.getElementById(arguments[0]);if(!this.ID){this.ID=-1;return}this.Direction=this.Width=this.Height=this.DelayTime=this.WaitTime=this.CTL=this.StartID=this.Stop=this.MouseOver=0;this.Step=1;this.Timer=30;this.DirectionArray={top:0,up:0,bottom:1,down:1,left:2,right:3};if(typeof arguments[1]=="number"||typeof arguments[1]=="string"){this.Direction=arguments[1]}if(typeof arguments[2]=="number"){this.Step=arguments[2]}if(typeof arguments[3]=="number"){this.Width=arguments[3]}if(typeof arguments[4]=="number"){this.Height=arguments[4]}if(typeof arguments[5]=="number"){this.Timer=arguments[5]}if(typeof arguments[6]=="number"){this.DelayTime=arguments[6]}if(typeof arguments[7]=="number"){this.WaitTime=arguments[7]}if(typeof arguments[8]=="number"){this.ScrollStep=arguments[8]}this.ID.style.overflow=this.ID.style.overflowX=this.ID.style.overflowY="hidden";this.ID.noWrap=true;this.IsNotOpera=(navigator.userAgent.toLowerCase().indexOf("opera")==-1);if(arguments.length>=7){this.Start()}}Marquee.prototype.Start=function(){if(this.ID==-1){return}if(this.WaitTime<800){this.WaitTime=800}if(this.Timer<20){this.Timer=20}if(this.Width==0){this.Width=parseInt(this.ID.style.width)}if(this.Height==0){this.Height=parseInt(this.ID.style.height)}if(typeof this.Direction=="string"){this.Direction=this.DirectionArray[this.Direction.toString().toLowerCase()]}this.HalfWidth=Math.round(this.Width/2);this.HalfHeight=Math.round(this.Height/2);this.BakStep=this.Step;this.ID.style.width=this.Width+"px";this.ID.style.height=this.Height+"px";if(typeof this.ScrollStep!="number"){this.ScrollStep=this.Direction>1?this.Width:this.Height}var d="<table cellspacing='0' cellpadding='0' style='border-collapse:collapse;display:inline;'><tr><td noWrap=true style='white-space: nowrap;word-break:keep-all;'>MSCLASS_TEMP_HTML</td><td noWrap=true style='white-space: nowrap;word-break:keep-all;'>MSCLASS_TEMP_HTML</td></tr></table>";var b="<table cellspacing='0' cellpadding='0' style='border-collapse:collapse;'><tr><td>MSCLASS_TEMP_HTML</td></tr><tr><td>MSCLASS_TEMP_HTML</td></tr></table>";var e=this;e.tempHTML=e.ID.innerHTML;if(e.Direction<=1){e.ID.innerHTML=b.replace(/MSCLASS_TEMP_HTML/g,e.ID.innerHTML)}else{if(e.ScrollStep==0&&e.DelayTime==0){e.ID.innerHTML+=e.ID.innerHTML}else{e.ID.innerHTML=d.replace(/MSCLASS_TEMP_HTML/g,e.ID.innerHTML)}}var f=this.Timer;var a=this.DelayTime;var c=this.WaitTime;e.StartID=function(){e.Scroll()};e.Continue=function(){if(e.MouseOver==1){setTimeout(e.Continue,a)}else{clearInterval(e.TimerID);e.CTL=e.Stop=0;e.TimerID=setInterval(e.StartID,f)}};e.Pause=function(){e.Stop=1;clearInterval(e.TimerID);setTimeout(e.Continue,a)};e.Begin=function(){e.ClientScroll=e.Direction>1?e.ID.scrollWidth/2:e.ID.scrollHeight/2;if((e.Direction<=1&&e.ClientScroll<=e.Height+e.Step)||(e.Direction>1&&e.ClientScroll<=e.Width+e.Step)){e.ID.innerHTML=e.tempHTML;delete (e.tempHTML);return}delete (e.tempHTML);e.TimerID=setInterval(e.StartID,f);if(e.ScrollStep<0){return}e.ID.onmousemove=function(g){if(e.ScrollStep==0&&e.Direction>1){var g=g||window.event;if(window.event){if(e.IsNotOpera){e.EventLeft=g.srcElement.id==e.ID.id?g.offsetX-e.ID.scrollLeft:g.srcElement.offsetLeft-e.ID.scrollLeft+g.offsetX}else{e.ScrollStep=null;return}}else{e.EventLeft=g.layerX-e.ID.scrollLeft}e.Direction=e.EventLeft>e.HalfWidth?3:2;e.AbsCenter=Math.abs(e.HalfWidth-e.EventLeft);e.Step=Math.round(e.AbsCenter*(e.BakStep*2)/e.HalfWidth)}};e.ID.onmouseover=function(){if(e.ScrollStep==0){return}e.MouseOver=1;clearInterval(e.TimerID)};e.ID.onmouseout=function(){if(e.ScrollStep==0){if(e.Step==0){e.Step=1}return}e.MouseOver=0;if(e.Stop==0){clearInterval(e.TimerID);e.TimerID=setInterval(e.StartID,f)}}};setTimeout(e.Begin,c)};Marquee.prototype.Scroll=function(){switch(this.Direction){case 0:this.CTL+=this.Step;if(this.CTL>=this.ScrollStep&&this.DelayTime>0){this.ID.scrollTop+=this.ScrollStep+this.Step-this.CTL;this.Pause();return}else{if(this.ID.scrollTop>=this.ClientScroll){this.ID.scrollTop-=this.ClientScroll}this.ID.scrollTop+=this.Step}break;case 1:this.CTL+=this.Step;if(this.CTL>=this.ScrollStep&&this.DelayTime>0){this.ID.scrollTop-=this.ScrollStep+this.Step-this.CTL;this.Pause();return}else{if(this.ID.scrollTop<=0){this.ID.scrollTop+=this.ClientScroll}this.ID.scrollTop-=this.Step}break;case 2:this.CTL+=this.Step;if(this.CTL>=this.ScrollStep&&this.DelayTime>0){this.ID.scrollLeft+=this.ScrollStep+this.Step-this.CTL;this.Pause();return}else{if(this.ID.scrollLeft>=this.ClientScroll){this.ID.scrollLeft-=this.ClientScroll}this.ID.scrollLeft+=this.Step}break;case 3:this.CTL+=this.Step;if(this.CTL>=this.ScrollStep&&this.DelayTime>0){this.ID.scrollLeft-=this.ScrollStep+this.Step-this.CTL;this.Pause();return}else{if(this.ID.scrollLeft<=0){this.ID.scrollLeft+=this.ClientScroll}this.ID.scrollLeft-=this.Step}break}};Light.startScroll=function(b,d,a){var c=Light.getPortletById(b);if(c==null){return}if(c.viewScroller==null){c.viewScroller=new Marquee(d,2,1,a,150,20,0,0,50)}c.viewScroller.ScrollStep=50};Light.pauseScroll=function(a){var b=Light.getPortletById(a);if(b==null){return}if(b.viewScroller!=null){b.viewScroller.ScrollStep=0}};Light.turnScroll=function(a){var b=Light.getPortletById(a);if(b==null){return}if(b.viewScroller!=null){if(b.viewScroller.Direction==2){b.viewScroller.Direction=3}else{b.viewScroller.Direction=2}}};Light.turnScrollStart=function(b,a){var c=Light.getPortletById(a);if(c==null){return}c.scrollerX=getMousePositionX(b)};Light.turnScrollEnd=function(b,a){var c=Light.getPortletById(a);if(c==null){return}x=getMousePositionX(b);if(x<c.scrollerX){c.viewScroller.Direction=2}else{c.viewScroller.Direction=3}};function LightPortal(){this.layout={containerLeft:Light.getContainerLeft(),containerTop:0,containerWidth:Light.getContainerWidth(),bodyLeft:0,bodyTop:80,maxLeft:0,maxTop:40,maxWidth:Light.getContainerWidth(),maxHeight:getWindowHeight(),minHeight:40,scrollbarWidth:Light.getScrollbarWidth(),barWidth:Light.getBarWidth(),footerMarginTop:100};this.tabs=[];this.allTabs=[];this.allPortlets=[];this.latestAction=Light.getLatestActionObject();this.highLightBar=Light.getHighLightBar();this.progressBar=Light.getProgressBar();this.moveTimer=-1}LightPortal.prototype.startup=function(){this.initialize();this.clear();this.open();this.afterStartup()};LightPortal.prototype.initialize=function(){this.initEvents();this.initPosition()};LightPortal.prototype.initEvents=function(){var a=this;document.body.ondragstart=function(){return false};document.body.onmousemove=function(b){if(a.moveTimer==-1){return}if(document.all){b=event}if(a.dragDropPortlet!=null){a.dragDropPortlet.move(b)}return false};document.body.onmouseup=function(b){a.moveTimer=-1;if(document.all){b=event}if(a.dragDropPortlet!=null){a.dragDropPortlet.moveEnd(b);a.dragDropPortlet=null;document.body.onselectstart=null;document.body.ondragstart=null}return false};document.onmousedown=function(){Light.setSessionTimer()};document.onkeydown=function(){Light.setSessionTimer()};window.onresize=function(){a.resize()};window.onorientationchange=function(){a.resize()}};LightPortal.prototype.initPosition=function(){if(this.originalLeft!=null){this.layout.containerLeft=this.originalLeft;this.originalLeft=null}};LightPortal.prototype.clear=function(){};LightPortal.prototype.open=function(){if(Light.needReload){this.load()}else{if(Light.needRender){this.render(L$("portalJSON").title,L$("tabsJSON").title)}else{this.bind(L$("portalJSON").title,L$("tabsJSON").title)}}};LightPortal.prototype.initUser=function(a){if(a){Light.userId=a;Light.setCookie(Light._LOGINED_USER_ID,Light.userId)}else{Light.deleteCookie(Light._LOGINED_USER_ID);Light.deleteCookie(Light._CURRENT_TAB)}};LightPortal.prototype.afterStartup=function(){};LightPortal.prototype.load=function(){var d=this;var c=Light.getRememberedUserId();var a=Light.getCookie(Light._REMEMBERED_USER_PASSWORD);log("Start Portal:"+c);var e="check=1";if(c&&a&&!Light.getCookie(Light._IS_SIGN_OUT)){e="userId="+escape(encodeURIComponent(c))+"&password="+escape(encodeURIComponent(a))}var b={method:"post",parameters:e,onSuccess:function(f){d.loadHandler(f)},onFailure:function(f){Light.alert("Error "+f.status+" -- "+f.statusText)}};Light.ajax.sendRequest(Light._LOAD_PORTAL,b)};LightPortal.prototype.loadHandler=function(a){log("load Portal:"+a.responseText);var b=JSON.parse(a.responseText);this.initUser(b[0].userId);this.render(b[0],b[1],true);Light.needReload=false};LightPortal.prototype.render=function(a,c,b){this.renderPortal(a,b);this.renderPortalTab(c,b);Light.refreshTextColor();this.show()};LightPortal.prototype.renderPortal=function(b,a){log("render Portal:"+b);this.data=(a)?b:JSON.parse(b);this.initUser(this.data.userId);Light.setTextFont();Light.playMusic();this.container=this.createPortalContainer();this.header=Light.service.getPortalHeader(this);this.menu=Light.service.getPortalMenu(this);this.body=this.createPortalBody();this.content=this.createPortalContent();this.footer=Light.service.getPortalFooter(this);this.body.appendChild(this.content);this.container.appendChild(this.header);this.container.appendChild(this.menu);this.container.appendChild(this.body);this.container.appendChild(this.footer);this.hide();document.body.appendChild(this.container);this.turnedOn=true;this.startTab=0;log("render Portal:end")};LightPortal.prototype.renderPortalTab=function(h,k){log("render Portal Tab:"+h);var a=(k)?h:JSON.parse(h);var j=null;var f=null;if(Light.getCookie(Light._CURRENT_TAB)){j=Light.getCookie(Light._CURRENT_TAB);f=j.split("-");if(f.length>0&&f[0]<a.length){j=parseInt(f[0])}}if(j&&j>=a.length){j=0}if(j&&j>=this.data.maxShowTabs){this.startTab=j+1-this.data.maxShowTabs}if(a.length>this.data.maxShowTabs){this.addLeftButton()}for(var e=0,g=a.length;e<g;e++){var c=new LightPortalTab(a[e]);if(e>=this.startTab&&e<this.data.maxShowTabs+this.startTab){c.open()}if(c.defaulted&&j==null){j=e}}if(a.length>this.data.maxShowTabs){this.addRightButton()}this.addTabMenu();log("render Portal defaut:"+f);if(f&&f.length>1){var d="";for(var e=1;e<f.length;e++){if(e==1){d=f[e]}else{d+="-"+f[e]}}this.tabs[j].defaultTab=d}if(!j||(j&&!this.tabs[j])){j=0}var b=document.location.href;var e=b.indexOf("#");var l=(e>=0)?b.substr(e+1):"";if(l.indexOf(Light._PAGE_PREFIX)>=0){Light.historyListener(l)}else{this.tabs[j].focus()}if(a.length<=1&&(!Light.hasPermission(Light.permission.PORTAL_TAB_ADD)||!L$("tabMenuAddTab"))){this.tabs[0].hide()}log("render Portal Tab: done")};LightPortal.prototype.bind=function(a,c,b){this.bindPortal(a,b);this.bindPortalTab(c,b);Light.refreshTextColor()};LightPortal.prototype.bindPortal=function(b,a){log("bind Portal:"+b);this.data=(a)?b:JSON.parse(b);this.initUser(this.data.userId);Light.setTextFont();Light.playMusic();this.container=L$("portalContainer");this.header=L$("portalHeader");this.menu=L$("portalMenu");this.body=L$("portalBody");this.content=L$("portalContent");this.footer=L$("portalFooter");this.turnedOn=true;this.startTab=0;log("bind Portal:end")};LightPortal.prototype.bindPortalTab=function(g,a){log("bind Portal Tab:"+g);var f=(a)?g:JSON.parse(g);var e=null;var h=null;if(Light.getCookie(Light._CURRENT_TAB)){e=Light.getCookie(Light._CURRENT_TAB);h=e.split("-");if(h.length>0&&h[0]<f.length){e=parseInt(h[0])}}if(e&&e>=f.length){e=0}if(e&&e>=this.data.maxShowTabs){this.startTab=e+1-this.data.maxShowTabs}if(f.length>this.data.maxShowTabs){this.addLeftButton()}for(var b=0;b<f.length;b++){var c=new LightPortalTab(f[b]);if(b>=this.startTab&&b<this.data.maxShowTabs+this.startTab){c.bind()}if(c.defaulted&&e==null){e=b}}if(f.length>this.data.maxShowTabs){this.addRightButton()}this.addTabMenu();log("bind Portal defaut:"+h);if(h&&h.length>1){var d="";for(var b=1;b<h.length;b++){if(b==1){d=h[b]}else{d+="-"+h[b]}}this.tabs[e].defaultTab=d}if(!e||(e&&!this.tabs[e])){e=0}this.tabs[e].bindFocus();if(f.length<=1&&(!Light.hasPermission(Light.permission.PORTAL_TAB_ADD)||!L$("tabMenuAddTab"))){this.tabs[0].hide()}log("render Portal Tab: done")};LightPortal.prototype.addLeftButton=function(){var a=Light.newElement({element:"span",id:"leftTabButton",className:"portal-tab-button",style:{background:"no-repeat",marginTop:"8px",marginLeft:"0",marginRight:"0",padding:"0"},onclick:function(){Light.focusLeftTab()}});var b=Light.newElement({element:"img",src:Light.getThemePath()+"/images/left.png",title:Light.getMessage("BUTTON_PREVIOUS"),align:"middle",style:{height:16,width:16}});a.appendChild(b);if(!this.startTab){a.className="";a.onclick="";a.style.MozOpacity=0.3;if(a.filters){a.filters.alpha.opacity=30}}L$("tabs").insertBefore(a,L$(Light._TAB_LIST))};LightPortal.prototype.addRightButton=function(){var a=Light.newElement({element:"span",id:"rightTabButton",style:{background:"no-repeat",marginTop:"5px",marginLeft:"0",marginRight:"0",padding:"0"},onclick:function(){Light.focusRightTab()}});var b=Light.newElement({element:"img",src:Light.getThemePath()+"/images/right.png",title:Light.getMessage("BUTTON_NEXT"),className:"portal-tab-button",align:"middle",style:{height:16,width:16}});a.appendChild(b);L$("tabs").appendChild(a)};LightPortal.prototype.addTabMenu=function(b,a){if(Light.hasPermission(Light.permission.PORTAL_TAB_ADD)){var c=Light.newElement({element:"input",type:"button",title:Light.getMessage("MENU_ADD_SUBTAB"),className:"icons_addTab",style:{width:16,display:"inline",borderStyle:"none",borderWidth:0}});var d=document.createElement("li");d.appendChild(c);if(b==null){d.id="tabMenuAddTab";d.setAttribute("id","tabMenuAddTab");d.setAttribute("tabId","");d.onclick=function(){addAutoTab(0)};L$(Light._TAB_LIST).appendChild(d)}else{d.id="tabMenuAddTab"+b;d.setAttribute("tabId",b);d.setAttribute("parentId",a);d.onclick=function(){addAutoTab(b)};L$("tabList"+b).appendChild(d)}}};LightPortal.prototype.show=function(){this.container.style.visibility="visible"};LightPortal.prototype.hide=function(){this.container.style.visibility="hidden"};LightPortal.prototype.createPortalContainer=function(){log("render Portal:create portal container");var a=Light.newElement({element:"div",id:"portalContainer",className:"portal-container",style:{position:"absolute",zIndex:++Light.maxZIndex,fontSize:12+parseInt(this.data.fontSize),width:this.layout.containerWidth,left:this.layout.containerLeft,height:this.layout.maxHeight}});if(this.data.bgImage.length>0){if(this.data.bgImage!="no"){var b=this.data.bgImage;if(this.data.bgImage.indexOf("http")<0){b=Light.getContextPath()+this.data.bgImage}if(this.data.bgRepeat==1){document.body.style.background="url('"+b+"') no-repeat "+this.data.bgPosition}else{if(this.data.bgRepeat==2){document.body.style.background="url('"+b+"') repeat-x right top"}else{if(this.data.bgRepeat==3){document.body.style.background="url('"+b+"') repeat-y left top"}else{document.body.style.background="url('"+b+"')"}}}}else{document.body.style.backgroundColor="#ffffff"}}else{document.body.style.backgroundColor="#ffffff"}setPosition(a,this.layout.containerLeft,this.layout.containerTop);return a};LightPortal.prototype.createPortalBody=function(){log("render Portal:create portal body");return Light.newElement({element:"div",id:"portalBody",className:"portal-body"})};LightPortal.prototype.createPortalContent=function(){log("render Portal:create portal content");return Light.newElement({element:"div",id:"portalContent",className:"portal-content",innerHTML:"<div id='tabs' class='portal-tabs'><ul id='tabList'></ul></div><div id='tabPanels' class='portal-tab-panels' ></div>",style:{position:"absolute",zIndex:++Light.maxZIndex,width:this.layout.maxWidth}})};LightPortal.prototype.refreshPortalHeader=function(){this.container.removeChild(this.header);this.header=Light.service.getPortalHeader(this);this.container.insertBefore(this.header,this.menu);Light.refreshTextColor()};LightPortal.prototype.refreshPortalMenu=function(){this.container.removeChild(this.menu);this.menu=Light.service.getPortalMenu(this);this.container.insertBefore(this.menu,this.body);Light.refreshTextFontSize()};LightPortal.prototype.resize=function(){if(!this.turnedOn){return}this.layout.containerLeft=Light.getContainerLeft();setPosition(this.container,this.layout.containerLeft,this.layout.containerTop);var a=Light.getCurrentTab();this.refreshPortalMenu();a.resize()};LightPortal.prototype.collapseAll=function(){Light.getCurrentTab().collapseAll()};LightPortal.prototype.expandAll=function(){Light.getCurrentTab().expandAll()};LightPortal.prototype.shutdown=function(){var a=this.allPortlets.length;for(var b=0;b<a;b++){var c=this.allPortlets[b];if(c.popup&&c.location&&c.location==4){c.close()}}this.container.removeChild(this.header);this.container.removeChild(this.menu);this.container.removeChild(this.body);this.container.removeChild(this.footer);document.body.removeChild(this.container);document.body.onselectstart=null;document.body.ondragstart=null;document.body.onmousemove=null;document.body.onmouseup=null;document.body.style.backgroundColor="";this.tabs=[];this.allTabs=[];this.allPortlets=[];this.turnedOn=false;Light.offMode()};LightPortal.prototype.editTitle=function(a){a.className="portal-header-title-edit";a.innerHTML="<input type='text' id='portalTitle' class='portal-header-title-edit' value=\""+this.data.title+'" onchange="javascript:Light.portal.saveTitle();" onblur="javascript:Light.portal.saveTitle();"/>';L$("portalTitle").focus()};LightPortal.prototype.viewTitle=function(a){a.className="portal-header-title-view";a.style.backgroundColor="";a.innerHTML=this.data.title};LightPortal.prototype.saveTitle=function(b){var b=L$("portalTitle").value;this.data.title=b;this.refreshPortalHeader();var a="title="+encodeURIComponent(b);Light.ajax.sendRequest(Light._CHANGE_TITLE,{parameters:a})};function LightPortalFooter(){}LightPortalFooter.prototype.render=function(a){};LightPortalFooterImpl.prototype=new LightPortalFooter;LightPortalFooterImpl.prototype.constructor=LightPortalFooter;function LightPortalFooterImpl(){LightPortalFooter.call(this)}LightPortalFooterImpl.prototype.render=function(a){log("render Portal: create portal footer");var b=Light.newElement({element:"div",id:"portalFooter",className:"portal-footer",innerHTML:Light.getViewTemplate("footer.view"),style:{width:a.layout.containerWidth,zIndex:1}});return b};Light.showAbout=function(){Light.addFunctionHistory("Light.showAbout");if(Light.showCurrentPopupWindow("aboutPortlet")){return}Light.showPopupPortlet(150,600,L$("MENU_ABOUT").title,"icons about","aboutPortlet","/aboutPortlet.lp")};Light.showFAQ=function(){Light.addFunctionHistory("Light.showFAQ");if(Light.showCurrentPopupWindow("faqPortlet")){return}Light.showPopupPortlet(150,600,L$("MENU_FAQ").title,"icons faq","faqPortlet","/faqPortlet.lp")};Light.showTerms=function(){Light.addFunctionHistory("Light.showTerms");if(Light.showCurrentPopupWindow("termsPortlet")){return}Light.showPopupPortlet(150,600,L$("MENU_TERMS").title,"icons terms","termsPortlet","/termsPortlet.lp")};Light.showPrivacy=function(){Light.addFunctionHistory("Light.showPrivacy");if(Light.showCurrentPopupWindow("privacyPortlet")){return}Light.showPopupPortlet(150,600,L$("MENU_PRIVACY").title,"icons private","privacyPortlet","/privacyPortlet.lp")};Light.showContactUs=function(){Light.addFunctionHistory("Light.showContactUs");if(Light.showCurrentPopupWindow("contactPortlet")){return}Light.showPopupPortlet(150,600,L$("MENU_CONTACT_US").title,"icons message","contactPortlet","/contactPortlet.lp")};Light.showCommunityBlog=function(){Light.addFunctionHistory("Light.showCommunityBlog");if(Light.showCurrentPopupWindow("blogOrgPortlet")){return}Light.showPopupPortlet(150,600,L$("MENU_BLOG").title,"icons blog","blogOrgPortlet","/blogOrgPortlet.lp")};Light.showFeedback=function(){Light.addFunctionHistory("Light.showFeedback");if(Light.showCurrentPopupWindow("feedbackPortlet")){return}Light.showPopupPortlet(150,600,L$("TITLE_FEEDBACK").title,"icons todolist","feedbackPortlet","/feedbackPortlet.lp",Light._EDIT_MODE)};function LightPortalHeader(){}LightPortalHeader.prototype.render=function(){};LightPortalHeaderImpl.prototype=new LightPortalHeader;LightPortalHeaderImpl.prototype.constructor=LightPortalHeader;function LightPortalHeaderImpl(){LightPortalHeader.call(this)}LightPortalHeaderImpl.prototype.render=function(a){log("render Portal: create portal header");var c=document.createElement("div");c.id="portalHeader";c.className="portal-header";if(a.data.headerImage){if(a.data.headerImage!="no"){var b=a.data.headerImage;if(b.indexOf("http")<0){b=Light.getContextPath()+b}if(a.data.headerRepeat==1){c.style.background="url('"+b+"') no-repeat "+a.data.headerPosition}else{if(a.data.headerRepeat==2){c.style.background="url('"+b+"') repeat-x right top"}else{if(a.data.headerRepeat==3){c.style.background="url('"+b+"') repeat-y left top"}else{c.style.background="url('"+b+"')";c.style.backgroundRepeat="repeat-x"}}}}else{c.style.backgroundColor=""}}else{c.style.backgroundColor=""}c.innerHTML=Light.getViewTemplate("header.view");c.style.zIndex=++Light.maxZIndex;return c};function LightPortalMenu(){}LightPortalMenu.prototype.render=function(a){var b=Light.newElement({element:"div",id:"portalMenu",className:"portal-header-menu"});this.renderMenuItems(b,a);b.style.zIndex=++Light.maxZIndex;return b};LightPortalMenu.prototype.renderSearchBar=function(b,a){if(a.data.showSearchBar){b.appendChild(Light.newElement({element:"span",className:"portal-header-search",innerHTML:Light.getViewTemplate("searchBar.view",null)}))}};LightPortalMenu.prototype.renderMenuItems=function(c,a){var b=Light.newElement({element:"span",className:"portal-header-menu-item"});this.renderMenuItemUser(b,a);this.renderMenuItemOptions(b,a);this.renderMenuItemContent(b,a);this.renderMenuItemSignUp(b,a);this.renderMenuItemSignIn(b,a);this.renderMenuItemClose(b,a);this.renderMenuItemLanguage(b,a);this.renderSearchBar(b,a);c.appendChild(b)};LightPortalMenu.prototype.renderMenuItemUser=function(b,a){if(Light.isLogin()){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.toMyAccount()},innerHTML:a.data.title}));return true}return false};LightPortalMenu.prototype.renderMenuItemOptions=function(b,a){if(Light.hasPermission(Light.permission.PORTAL_OPTIONS)){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.showChangeOptions()},innerHTML:Light.getMessage("MENU_OPTIONS")}));return true}return false};LightPortalMenu.prototype.renderMenuItemContent=function(b,a){tab=Light.currentTab;if(Light.hasPermission(Light.permission.PORTAL_CONTENT_ADD)&&(tab==null||tab.allowAddContent)){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.showAddContent()},innerHTML:Light.getMessage("MENU_ADD_CONTENT")}));return true}return false};LightPortalMenu.prototype.renderMenuItemSignUp=function(b,a){if(Light.hasPermission(Light.permission.PORTAL_SIGN_UP)&&!Light.isLogin()){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.showSignUp()},innerHTML:Light.getMessage("MENU_SIGN_UP")}));b.appendChild(Light.newElement({element:"span",className:"portal-header-menu-item-separater"}));return true}return false};LightPortalMenu.prototype.renderMenuItemSignIn=function(b,a){if(Light.isLogin()){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.showMyAccount()},innerHTML:Light.getMessage("MENU_MY_ACCOUNT")}));b.appendChild(Light.newElement({element:"a",onclick:function(){Light.logout()},innerHTML:Light.getMessage("MENU_SIGN_OUT")}))}else{if(Light.hasPermission(Light.permission.PORTAL_SIGN_IN)){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.showLogin(false)},innerHTML:Light.getMessage("MENU_SIGN_IN")}));b.appendChild(Light.newElement({element:"span",innerHTML:Light.getViewTemplate("facebookConnect.view",null)}));b.appendChild(Light.newElement({element:"span",innerHTML:Light.getViewTemplate("twitterLogin.view",null)}))}}};LightPortalMenu.prototype.renderMenuItemNoMenu=function(b,a){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.toMyAccount()},innerHTML:Light.getMessage("MENU_MY_ACCOUNT")}))};LightPortalMenu.prototype.renderMenuItemClose=function(b,a){if(Light.hasPermission(Light.permission.PORTAL_TURN_OFF)||L$("WIDGET_MODE")!=null){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.portal.shutdown()},innerHTML:Light.getMessage("MENU_TURN_OFF")}))}};LightPortalMenu.prototype.renderMenuItemCollapse=function(b,a){if(Light.isLogin()){b.appendChild(Light.newElement({element:"span",onclick:function(){Light.portal.collapseAll()},innerHTML:"<input type='button' title='"+Light.getMessage("MENU_COLLAPSE_ALL")+"' class='icons_collapseAll' value=''></input>"}));b.appendChild(Light.newElement({element:"span",onclick:function(){Light.portal.expandAll()},innerHTML:"<input type='button' title='"+Light.getMessage("MENU_EXPAND_ALL")+"' class='icons_expandAll' value=''></input>"}));b.appendChild(Light.newElement({element:"span",className:"portal-header-menu-item-separater"}))}};LightPortalMenu.prototype.renderMenuItemLanguage=function(b,a){if(Light.hasPermission(Light.permission.PORTAL_CHANGE_LANGUAGE)){b.appendChild(Light.newElement({element:"span",onclick:function(){Light.showChangeLanguage()},innerHTML:"<input type='button' title='"+Light.getMessage("TITLE_LANGUAGE")+"' class='icons_world' value=''></input>"}))}};Light.showLogin=function(a){if(a==null||a){Light.addFunctionHistory("Light.showLogin")}if(Light.showCurrentPopupWindow("login")){return}var b=new PortletPopupWindow(11,200,400,Light.getMessage("MENU_SIGN_IN"),"icons user","","loginPortlet","/loginPortlet.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false,true,5,2);b.refresh()};Light.showLocalLogin=function(a){if(a==null||a){Light.addFunctionHistory("Light.showLocalLogin")}if(Light.showCurrentPopupWindow("localLogin")){return}var b=new PortletPopupWindow(11,200,400,Light.getMessage("MENU_SIGN_IN"),"icons user","","localLogin","/localLogin.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false);b.refresh();Light.portal.latestAction.portlet=b};Light.showAllLogin=function(a){if(a==null||a){Light.addFunctionHistory("Light.showAllLogin")}if(Light.showCurrentPopupWindow("allLogin")){return}var b=new PortletPopupWindow(11,200,400,Light.getMessage("MENU_SIGN_IN"),"icons user","","allLogin","/loginPortlet.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false);b.refresh();window.scrollTo(0,0);Light.portal.latestAction.portlet=b};Light.showMyAccount=function(){if(Light.showCurrentPopupWindow("accountPortlet")){return}var a=new PortletPopupWindow(11,50,1000,Light.getMessage("MENU_MY_ACCOUNT"),"icons user","","accountPortlet","/accountPortlet.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false,false,0,2);a.refresh()};Light.showChangeLanguage=function(){Light.addFunctionHistory("Light.showChangeLanguage");if(Light.showCurrentPopupWindow("changeLanguagePortlet")){return}var a=new PortletPopupWindow(11,200,750,Light.getMessage("TITLE_LANGUAGE"),"icons language","","changeLanguagePortlet","/changeLanguagePortlet.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false);a.refresh()};Light.showChangeOptions=function(){if(Light.showCurrentPopupWindow("optionsPortlet")){return}var a=new PortletPopupWindow(11,50,1000,Light.getMessage("MENU_OPTIONS"),"icons options","","optionsPortlet","/optionsPortlet.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false,false,0,2);a.refresh()};Light.showAddContent=function(){if(Light.showCurrentPopupWindow("contentPortlet")){return}var a=new PortletPopupWindow(11,0,400,Light.getMessage("MENU_ADD_CONTENT"),"icons application_add","","contentPortlet","/contentPortlet.lp",true,false,false,false,false,false,false,0,false,"","","","",false,false,false,1,2);a.refresh()};Light.showCurrentPopupWindow=function(a){var b=Light.getCurrentTab();var c=Light.getPopupPortletByName(a);if(c){if(c.parent.serverId!=b.serverId){c.close();return false}else{if(c.popup){c.show();c.parent.hideOtherPortlets(c)}Light.portal.allPortlets[i]=null;window.scrollTo(0,0);Light.portal.allPortlets.push(c);return true}}return false};Light.globalSearch=function(a,b){Light.addFunctionHistory("Light.globalSearch");if(Light.showCurrentPopupWindow("globalSearchPortlet")){return}var d=new PortletPopupWindow(11,0,400,Light.getMessage("MENU_SEARCH"),"icons search","","globalSearchPortlet","/globalSearchPortlet"+Light._REQUEST_SUFFIX,true,false,false,false,false,false,false,0,false,"","","","",false,false,true,5,2);var c="action=find";if(b){c+=";type="+b}if(a){c+=";keyword="+a}Light.executeRender(d.id,"view","maximized",c,null,true,false)};LightPortalMenuImpl.prototype=new LightPortalMenu;LightPortalMenuImpl.prototype.constructor=LightPortalMenuImpl;function LightPortalMenuImpl(){LightPortalMenu.call(this)}LightPortalMenuImpl.prototype.renderMenuItemSignIn=function(b,a){if(Light.hasPermission(Light.permission.PORTAL_SIGN_IN)){if(Light.isLogin()){b.appendChild(Light.newElement({element:"a",onclick:function(){Light.logout()},innerHTML:Light.getMessage("MENU_SIGN_OUT")}))}else{b.appendChild(Light.newElement({element:"a",onclick:function(){Light.showAllLogin(false)},innerHTML:Light.getMessage("MENU_SIGN_IN")}));b.appendChild(Light.newElement({element:"span",innerHTML:Light.getViewTemplate("facebookConnect.view",null)}));b.appendChild(Light.newElement({element:"span",innerHTML:Light.getViewTemplate("twitterLogin.view",null)}))}return true}return false};LightPortal.prototype.clear=function(){Light.deleteCookie(Light._CURRENT_TAB)};LightPortalTab=function(b){this.id=Light._TAB_PREFIX+b.id;this.serverId=b.id;this.label=b.label;this.client=b.client;this.tabURL=b.URL;this.isCloseable=b.isCloseable;this.isEditable=b.isEditable;this.isMoveable=b.isMoveable;this.allowAddContent=b.allowAddContent;this.defaulted=b.defaulted;this.between=b.between;this.widths=b.widths;this.fitScreen=b.fitScreen;this.windowSkin=b.windowSkin;this.privacy=b.privacy;this.parentId=b.parentId;var a=(this.parentId)?Light.getTabById(this.parentId):null;if(a){this.parent=a;this.tabList=Light._TAB_LIST+this.parent.serverId;this.tabPanels=Light._TAB_PANELS+this.parent.serverId}else{this.parent=Light.portal;this.tabList=Light._TAB_LIST;this.tabPanels=Light._TAB_PANELS}this.index=this.parent.tabs.length;this.parent.tabs[this.index]=this;Light.portal.allTabs.push(this);this.portlets=[];this.tabs=[];this.adjustWidth();delete b;log("rendered portal tab "+this.label)};LightPortalTab.prototype.open=function(b){if(!this.container){var c=this;this.title=Light.newElement({element:"div",id:Light._TAB_TITLE_PREFIX+this.serverId,className:"portal-tab-handle",innerHTML:this.label,onclick:function(d){showProgressBar(d);c.focus();hideProgressBar()},onmouseover:function(){c.hover()},onmouseout:function(){c.hoverout()}});this.header=Light.newElement({element:"span",id:Light._TAB_HEADER_PREFIX+this.serverId});this.header.appendChild(this.title);this.container=Light.newElement({element:"li",id:this.id});this.container.appendChild(this.header);if(b){L$(this.tabList).insertBefore(this.container,b.container)}else{var a=(this.parentId)?L$("tabMenuAddTab"+this.parent.serverId):L$("tabMenuAddTab");if(a){L$(this.tabList).insertBefore(this.container,a)}else{L$(this.tabList).appendChild(this.container)}}}if(!this.panel){this.panel=Light.newElement({element:"div",id:Light._PANEL_PREFIX+this.serverId});if(b){L$(this.tabPanels).insertBefore(this.panel,b.panel)}else{L$(this.tabPanels).appendChild(this.panel)}}this.opened=true;log("opened portal tab "+this.label)};LightPortalTab.prototype.bind=function(){var a=this;this.title=L$(Light._TAB_TITLE_PREFIX+this.serverId);if(this.title){this.title.onclick=function(b){showProgressBar(b);a.focus();hideProgressBar()};this.title.onmouseover=function(){a.hover()};this.title.onmouseout=function(){a.hoverout()}}this.header=L$(Light._TAB_HEADER_PREFIX+this.serverId);this.container=L$(this.id);this.panel=L$(Light._PANEL_PREFIX+this.serverId);this.opened=true;if(this.parentId){this.parent.popupMenu=null;this.parent.popupMenuLoaded=false}log("bind portal tab "+this.label)};LightPortalTab.prototype.insert=function(){this.open();this.focus()};LightPortalTab.prototype.hide=function(){L$(this.tabList).style.visibility="hidden"};LightPortalTab.prototype.hover=function(){this.hoverAction=true;var a=this;setTimeout((function(){a.showSubTab()}),500)};LightPortalTab.prototype.hoverout=function(){this.hoverAction=false;Light.hoverTab=null};LightPortalTab.prototype.showSubTab=function(){if(this.hoverAction){Light.hoverTab=this;if(this.popupMenu){this.popupSubTab(this.popupMenu)}else{if(!this.popupMenuLoaded){var a="tabId="+this.serverId;Light.ajax.sendRequest(Light._SHOW_SUB_TAB,{parameters:a,onSuccess:Light.hoverTab.showSubTabHandler})}}}};LightPortalTab.prototype.showSubTabHandler=function(a){if(Light.hoverTab){Light.hoverTab.popupMenuLoaded=true;if(a.responseText){Light.hoverTab.popupMenu=a.responseText;Light.hoverTab.popupSubTab(Light.hoverTab.popupMenu)}}};LightPortalTab.prototype.popupSubTab=function(f){if(Light.hoverTab&&Light.hoverTab.hoverAction&&f){var a=JSON.parse(f);var c={title:Light.getMessage("CLOSE"),tabs:a,popupName:"viewSubTab"};var b=L$(Light._TAB_HEADER_PREFIX+a[0].parentId);var d={pageX:getX(b)-5,pageY:getY(b)+20};createTopPopupDiv("viewSubTab","viewTab.jst",100,c,d,null,true);L$("viewSubTab").style.padding=0;document.body.onclick=function(g){hideTopPopupDiv("viewSubTab")}}else{hideTopPopupDiv("viewSubTab")}Light.hoverTab=null};LightPortalTab.prototype.getFocusId=function(){var a=(this.parentId>0)?Light.getTabById(this.parentId):null;return(a)?a.getFocusId()+"-"+this.index:this.index};LightPortalTab.prototype.bindFocus=function(){var a="tab"+this.serverId+"PortletsJSON";log("bind Portal Tab Focus: "+a);if(L$(a)){this.loaded=true;this.focusRender();this.bindPortlets(JSON.parse(L$(a).title))}else{this.focus()}};LightPortalTab.prototype.bindPortlets=function(c){if(c.length>0){var a=c.length;log("bind tab portlets:"+a);Light.currentTab=this;for(var d=0;d<a;d++){var b=(L$(Light._PR_PREFIX+c[d].serverId))?true:false;log("bind portlet:"+c[d]+","+b);var e=new PortletWindow(c[d],false,b);if(!b){e.refresh()}}}this.rePositionAll()};LightPortalTab.prototype.focusRender=function(a){log("start focus render portal tab "+this.label);Light.currentTab=this;Light.setCookie(Light._CURRENT_TAB,this.getFocusId());if(a==null||a){Light.addHistory()}if(!this.focused){this.container.className="current";this.header.className="current";this.container.style.display="block";this.panel.style.display="block";this.addButtons()}else{if(this.isEditable&&!this.editTitle){this.editTitle=true;this.header.innerHTML="<input type='text' id='portalTabTitle' size='12' value=\""+this.label+'" onchange="javascript:Light.currentTab.saveTitle();" onblur="javascript:Light.getTabById(\''+this.serverId+"').saveTitle();\"/>";L$("portalTabTitle").focus()}}var c=this.parent.tabs;for(var b=c.length;b--;){if(c[b]&&c[b].serverId!=this.serverId){c[b].blur()}}c=Light.portal.tabs;for(var b=c.length;b--;){if(c[b]&&c[b].serverId!=this.serverId&&c[b].serverId!=this.parentId){c[b].blur()}}this.focused=true;window.scrollTo(0,0);log("end focus render portal tab "+this.label)};LightPortalTab.prototype.focus=function(a){log("start focus portal tab "+this.label);if(!this.opened||!this.container){this.open()}this.focusRender(a);this.refresh();log("end focus portal tab "+this.label)};LightPortalTab.prototype.blur=function(){if(this.opened&&(this.container&&(this.focused||this.container.className=="current"))){this.container.className="";this.header.className="";this.header.style.paddingBottom=10;this.panel.style.display="none";var a=this.header.children;for(var b=a.length;b--;){if(a[b].tagName=="img"||a[b].tagName=="IMG"||a[b].tagName=="input"||a[b].tagName=="INPUT"||a[b].className=="icons"){this.header.removeChild(a[b])}}this.focused=false;if(this.tabs.length>0){for(var b=this.tabs.length;b--;){if(this.tabs[b]){this.tabs[b].blur()}}}}};LightPortalTab.prototype.addButtons=function(){var b=this;if(this.isEditable&&this.parentId==0&&Light.hasPermission(Light.permission.PORTAL_TAB_ADD)){if(!this.addButton){var a=document.createElement("input");a.title=Light.getMessage("MENU_ADD_SUBTAB");a.type="button";a.className="icons_addTab";a.style.display="inline";a.style.width=16;a.style.borderStyle="none";a.style.borderWidth=0;a.onclick=function(){b.addSubPage()};this.addButton=a}this.header.appendChild(this.addButton)}if(this.isCloseable){if(!this.closeButton){var c=document.createElement("input");c.title=Light.getMessage("CLOSE");c.type="button";c.className="icons_closeTab";c.style.display="inline";c.style.width=16;c.style.borderStyle="none";c.style.borderWidth=0;c.onclick=function(){b.close()};this.closeButton=c}this.header.appendChild(this.closeButton)}};LightPortalTab.prototype.saveTitle=function(){if(!L$("portalTabTitle")){return}var b=L$("portalTabTitle").value;this.editTitle=false;this.label=b;this.refreshTitle();var a="title="+encodeURIComponent(b)+"&tabId="+Light.currentTab.serverId;Light.ajax.sendRequest(Light._EDIT_TAB_TITLE,{parameters:a})};LightPortalTab.prototype.refreshTitle=function(){if(this.container){this.title.innerHTML=this.label;this.header.innerHTML="";this.header.appendChild(this.title);if(this.focused){this.addButtons()}}};LightPortalTab.prototype.refresh=function(){if(!this.loaded){this.load();this.loaded=true}else{this.refreshPortletMethod();this.rePositionAll()}Light.portal.refreshPortalMenu()};LightPortalTab.prototype.load=function(){var a=this.serverId;if(L$("tab"+a+"TabsJSON")){this.renderSubTabs(JSON.parse(Light.getMessage("tab"+a+"TabsJSON")),true)}else{if(this.parentId>0){this.getPortletsByTab()}else{var b={method:"post",asynchronous:false,postBody:"parentId="+a};this.render(Light.ajax.sendRequest(Light._LOAD_TAB_CONTENT,b))}}};LightPortalTab.prototype.render=function(d){var a=d.lastIndexOf("</textarea>");if(a>0){var c=d.substring(0,a+11);document.body.appendChild(Light.newElement({element:"div",innerHTML:c}));d=d.substr(a+11)}var b=JSON.parse(d);this.portletsJSON=b.portlets;this.renderSubTabs(b.subTabs)};LightPortalTab.prototype.getSubTabs=function(){var a=this.serverId;if(L$("tab"+a+"TabsJSON")){this.renderSubTabs(Light.getMessage("tab"+a+"TabsJSON"));return}var c=this;var b={method:"post",asynchronous:false,postBody:"parentId="+a};this.renderSubTabs(Light.ajax.sendRequest(Light._GET_TABS_BY_PARENT,b))};LightPortalTab.prototype.renderSubTabs=function(f){if(f.length<=0){this.getPortletsByTab();return}log("render sub tabs:"+f);this.panel.innerHTML="<div id='tabs"+this.serverId+"' class='portal-tabs-sub' ><ul id='tabList"+this.serverId+"'></ul></div><div id='tabPanels"+this.serverId+"' class='portal-tab-panels' ></div>";var e=0;for(var b=0,a=f.length;b<a;b++){var c=new LightPortalTab(f[b]);c.open();if(c.defaulted){e=b}}this.addTabMenu();if(this.defaultTab){if(this.defaultTab.indexOf("-")>0){var g=this.defaultTab.split("-");if(g[0]<f.length){e=g[0]}if(g.length>1){var d="";for(var b=1;b<g.length;b++){if(b==1){d=g[b]}else{d+="-"+g[b]}}this.tabs[e].defaultTab=d}}else{e=this.defaultTab}}this.tabs[e].focus();if(f.length<=1&&!Light.hasPermission(Light.permission.PORTAL_TAB_ADD)){this.tabs[0].hide()}};LightPortalTab.prototype.addTabMenu=function(){if(this.isEditable&&Light.hasPermission(Light.permission.PORTAL_TAB_ADD)){Light.portal.addTabMenu(this.serverId,this.parentId)}};LightPortalTab.prototype.getPortletsByTab=function(){var a=this.serverId;if(this.portletsJSON){this.renderPortlets(this.portletsJSON)}else{if(this.parentId>0&&this.parent.portletsJSON){this.renderPortlets(this.parent.portletsJSON);delete this.parent.portletsJSON}else{if(L$("tab"+a+"PortletsJSON")){this.renderPortlets(JSON.parse(L$("tab"+a+"PortletsJSON").title))}else{var c=this;var b={method:"post",asynchronous:false,postBody:"tabId="+a};this.renderPortlets(JSON.parse(Light.ajax.sendRequest(Light._GET_PORTLETS_BY_TAB,b)))}}}};LightPortalTab.prototype.renderPortlets=function(b){if(b.length>0){var a=b.length;log("render tab portlets:"+a);var d=null;Light.currentTab=this;for(var c=0;c<a;c++){var e=new PortletWindow(b[c]);if(e.state!=Light._MAXIMIZED_STATE){e.refresh()}else{d=e}}if(d){d.refresh()}}else{this.repositionFooter()}};LightPortalTab.prototype.addSubPage=function(){var a="tabId="+this.serverId;Light.ajax.sendRequest(Light._ADD_SUB_TAB,{parameters:a,onSuccess:Light.refreshPortal})};LightPortalTab.prototype.resize=function(){this.adjustWidth();this.reLayout();Light.portal.refreshPortalMenu()};LightPortalTab.prototype.reRender=function(){this.adjustWidth();for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;b--;){var d=c[a];if(d&&!d.isPopupWindow){d.reRender()}}}}};LightPortalTab.prototype.adjustWidth=function(){if(this.fitScreen==1){var c=0;var b=this.widths.length;for(var e=b;e--;){c+=parseInt(this.widths[e]);if(e){c+=this.between}}var a=Light.portal.layout.maxWidth;var f=a-c;if(f){var d=parseInt(f/b);for(var e=b;e--;){this.widths[e]+=d;if(this.widths[e]>a){this.widths[e]=a}}}}};LightPortalTab.prototype.reLayout=function(){for(var c=this.portlets.length;c--;){var d=this.portlets[c];if(d){for(var b=d.length;b--;){var e=d[b];if(e&&!e.maximized&&!e.isNew){e.width=this.widths[c];e.left=0;for(var a=0;a<e.position;a++){e.left+=this.widths[a]+this.between}}}}}this.rePositionAll()};LightPortalTab.prototype.refreshPortletMethod=function(){for(var i=this.portlets.length;i--;){var p=this.portlets[i];if(p){for(var j=p.length;j--;){var portlet=p[j];if(portlet&&portlet.data&&portlet.data.method){eval(portlet.data.method+"('"+portlet.data.id+"')")}}}}};LightPortalTab.prototype.rePositionAll=function(){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){var d=c[a];if(d&&!d.maximized&&!d.isNew){this.repositionPortlets(d);break}}}}this.repositionFooter()};LightPortalTab.prototype.getTop=function(){return(this.parentId>0)?30:0};LightPortalTab.prototype.repositionPortlets=function(q){if(typeof q.popup!="undefined"&&q.popup){q.focus();return}var g=q.position;var h=q.index;var r=0;var c=0;var n=0;for(var f=0,l=this.portlets[g].length;f<l;f++){var q=this.portlets[g][f];if(q){if(g>0){for(var e=0;e<g;e++){var a=this.portlets[e];if(a&&a[f]){if(a[f].colspan+a[f].position>g){r=a[f].top+a[f].getHeight()}}}}if(f>=h&&!q.maximized){if(r>0){q.top=r+q.marginTop}else{q.top=q.window.top+q.marginTop+this.getTop()}q.refreshPosition()}if(g>0){for(var e=0;e<g;e++){var a=this.portlets[e];if(a&&a[f+1]){if(a[f+1].colspan+a[f+1].position>g){if(a[f+1].top<parseInt(q.top)+parseInt(q.getHeight())+q.marginTop){a[f+1].top=parseInt(q.top)+parseInt(q.getHeight())+q.marginTop;a[f+1].refreshPosition();for(var d=0;d<=e;d++){var o=a[f+1].top+a[f+1].getHeight()+a[f+1].marginTop;if(this.portlets[d]){for(var b=f+2;b<this.portlets[d].length;b++){if(this.portlets[d][b]){this.portlets[d][b].top=o;this.portlets[d][b].refreshPosition();o=this.portlets[d][b].top+this.portlets[d][b].getHeight()+a[f+1].marginTop}}}}}}}}}if(!q.maximized&&!q.isNew){r=q.top+q.getHeight()}if(q.maximized&&!q.isNew){r=q.getHeight();c=f;n=0}}if(q==null){n++}}if(q&&q.colspan>0){for(var f=g+1;f<g+q.colspan;f++){if(this.portlets[f]&&this.portlets[f][q.index]){this.repositionPortlets(this.portlets[f][q.index])}}}this.repositionFooter()};LightPortalTab.prototype.repositionFooter=function(){var a=Light.getCurrentTabId();if(a!=this.serverId){return}var b=this.getMaxHeight();if(document.all){Light.portal.footer.style.posTop=b}else{Light.portal.footer.style.top=b}if((b-Light.portal.layout.maxTop)>Light.portal.layout.maxHeight){Light.portal.container.style.height=b-Light.portal.layout.maxTop}Light.portal.footer.style.width=Light.portal.layout.containerWidth};LightPortalTab.prototype.getMaxHeight=function(){var f=[];var e=0;for(var d=0,a=this.portlets.length;d<a;d++){var g=this.portlets[d];if(g){for(var c=0,b=g.length;c<b;c++){if(g[c]){if(g[c].maximized){e=g[c].top+g[c].getHeight();break}else{f[d]=g[c].top+g[c].getHeight()}}}}if(e>0){break}}if(e==0){for(var d=0,a=f.length;d<a;d++){if(f[d]>e){e=f[d]}}}e=e+Light.portal.layout.footerMarginTop;if(e<600){e=600}return e};LightPortalTab.prototype.getPortletIndex=function(b){var f=true;var c=0;var e=this.portlets[b];if(e){for(var d=0,a=e.length;d<a;d++){if(e[d]==null){f=false;c=d;break}}if(f){c=e.length}}else{this.portlets[b]=[]}return c};LightPortalTab.prototype.showOtherPortlets=function(){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]&&c[a].maximized){c[a].show();return}}}}for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]){c[a].show()}}}}Light.portal.menu.style.zIndex=++Light.maxZIndex};LightPortalTab.prototype.hideOtherPortlets=function(d){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]&&c[a].serverId!=d.serverId){c[a].hide()}}}}};LightPortalTab.prototype.collapseAll=function(){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]&&c[a].minimized){c[a].minimize()}}}}};LightPortalTab.prototype.expandAll=function(){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]&&c[a].minimized){c[a].minimize()}if(c[a]&&c[a].maximized){c[a].maximize()}}}}};LightPortalTab.prototype.normalAll=function(){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]&&c[a].maximized){c[a].maximize()}}}}};LightPortalTab.prototype.refreshWindowTransparent=function(){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]){c[a].refreshWindowTransparent()}}}}};LightPortalTab.prototype.refreshPortlets=function(){for(var b=this.portlets.length;b--;){var c=this.portlets[b];if(c){for(var a=c.length;a--;){if(c[a]){c[a].lastAction=null;c[a].refresh(false)}}}}};LightPortalTab.prototype.setNotification=function(b){var c=false;if(this.label.indexOf("(")>0){var a=this.label.indexOf("(");this.label=this.label.substring(0,a);c=true}if(b){this.label+="("+b+")"}if(b||c){this.refreshTitle()}};LightPortalTab.prototype.close=function(){if(!Light.confirm(Light.getMessage("COMMAND_CLOSE_TAB"))){return}L$(this.tabList).removeChild(this.container);L$(this.tabPanels).removeChild(this.panel);delete this.parent.tabs[this.index];var a=false;var c=this.parent.tabs;for(var b=this.index;b--;){if(c[b]){c[b].focus()}a=true;break}if(!a){for(var b=this.index+1;b<c.length;b++){if(c[b]){c[b].focus()}break}}Light.ajax.sendRequest(Light._DELETE_TAB,{parameters:"tabId="+this.serverId})};Light.showTab=function(h){hideTopPopupDiv("viewMoreTab");var e=Light.getTabById(h);if(e.opened){e.focus();return}var d=L$(Light._TAB_LIST);var b=null;for(var g=d.children.length;g--;){var f=d.children[g];if(!f.style.display||f.style.display!="none"){b=f;break}}if(b){var c=b.id;var a=c.split("_");if(a.length>1){c=a[a.length-1]}var j=Light.getTabById(c);j.blur();j.opened=false;j.container.style.display="none"}e.open();e.focus()};Light.gotoTab=function(e,a){if(e==0){return Light.showTab(a)}hideTopPopupDiv("viewSubTab");var c=Light.portal.allTabs;for(var b=c.length;b--;){var d=c[b];if(d){if(d.serverId==e&&!d.focused){d.focus();break}}}Light.gotoSubTab(a)};Light.gotoSubTab=function(b){var a=true;var d=Light.portal.allTabs;for(var c=d.length;c--;){var e=d[c];if(e.serverId==b){a=false}if(e.serverId==b&&!e.focused){e.focus();break}}if(a){setTimeout((function(){Light.gotoSubTab(b)}),100)}};Light.focusLeftTab=function(){var g=Light.portal.tabs;var a=L$(Light._TAB_LIST);var f=a.children.length;for(var d=0;d<f;d++){var c=a.children[d];if(c&&c.tagName=="LI"){if("current"==c.className){if(d>0){var e=d+Light.portal.startTab-1;g[e].focus()}else{if(d==0){var e=Light.portal.startTab-1;if(e>=0){if(e==0){var b=L$("leftTabButton");b.className="";b.onclick="";b.style.MozOpacity=0.3;if(b.filters){b.filters.alpha.opacity=30}}a.removeChild(a.children[Light.portal.data.maxShowTabs-1]);if(!g[e].opened){g[e].open(g[e+1])}else{a.insertBefore(g[e].container,g[e+1].container)}g[e].focus();Light.portal.startTab--}}}}}}if(Light.portal.startTab==0){var b=L$("leftTabButton");b.className="";b.onclick="";b.style.MozOpacity=0.3;if(b.filters){b.filters.alpha.opacity=30}}var j=f-1;if(Light.hasPermission(Light.permission.PORTAL_TAB_ADD)&&!Light.portal.mobile){j--}if(Light.portal.startTab+j<Light.portal.tabs.length){var h=L$("rightTabButton");h.className="portal-tab-button";h.onclick=function(){Light.focusRightTab()};h.style.MozOpacity=1;if(h.filters){b.filters.alpha.opacity=100}}};Light.focusRightTab=function(){var h=Light.portal.tabs;var a=L$(Light._TAB_LIST);for(var d=0,g=a.children.length;d<g;d++){var c=a.children[d];if(c&&c.tagName=="LI"){if("current"==c.className){var j=a.children.length-1;if(Light.hasPermission(Light.permission.PORTAL_TAB_ADD)&&!Light.portal.mobile){j--}if(d<j){var f=Light.portal.startTab+d+1;Light.portal.tabs[f].focus()}else{if(d==j){var f=Light.portal.startTab+d+1;if(f<=Light.portal.tabs.length-1){if(f==Light.portal.tabs.length-1){var k=L$("rightTabButton");k.className="";k.onclick="";k.style.MozOpacity=0.3;if(k.filters){b.filters.alpha.opacity=30}}a.removeChild(a.children[0]);if(!Light.portal.tabs[f].opened){Light.portal.tabs[f].open()}else{var e=document.getElementById("tabMenuAddTab");if(e){a.insertBefore(Light.portal.tabs[f].container,e)}else{a.appendChild(Light.portal.tabs[f].container)}}Light.portal.tabs[f].focus();Light.portal.startTab++}}}}}}if(Light.portal.startTab){var b=L$("leftTabButton");b.className="portal-tab-button";b.onclick=function(){Light.focusLeftTab()};b.style.MozOpacity=1;if(b.filters){b.filters.alpha.opacity=100}}if(Light.portal.startTab+Light.portal.data.maxShowTabs>=Light.portal.tabs.length){var k=L$("rightTabButton");k.className="";k.onclick="";k.style.MozOpacity=0.3;if(k.filters){b.filters.alpha.opacity=30}}};function LightPortlet(){}LightPortlet.prototype.reRender=function(windowSkin){this.refreshWidth();var skin;if(windowSkin){skin=windowSkin;this.windowSkin=windowSkin}if(!this.windowSkin&&this.window.type!=this.parent.windowSkin){skin=this.parent.windowSkin}if(skin&&this.window.type!=skin){this.window.close(this);this.window=eval("new "+skin+"()");this.window.render(this);this.refresh();return true}return false};LightPortlet.prototype.refreshWidth=function(){this.width=this.parent.widths[this.position];if(this.colspan){for(var a=this.position+1;a<this.position+this.colspan;a++){if(this.parent.widths.length>a){this.width+=this.parent.between+this.parent.widths[a]}}}};LightPortlet.prototype.focus=function(){this.window.focus(this)};LightPortlet.prototype.show=function(){this.window.show(this)};LightPortlet.prototype.hide=function(){this.window.hide(this)};LightPortlet.prototype.refreshPortletTitle=function(){if(!this.notFirstLoad){this.notFirstLoad=true;var d="portlet"+this.serverId;var a=L$(d+".title");if(a){var c=a.value;if(c&&c.trim().length>0){var b=JSON.parse(c);this.setTitle(b)}a.parentNode.removeChild(a)}else{Light.executeRender(this.id,Light._HEADER_MODE,"","","")}}else{Light.executeRender(this.id,Light._HEADER_MODE,"","","")}};LightPortlet.prototype.setTitle=function(c){var a=false;if(c&&c.title){this.title=c.title;a=true}else{if(this.title.indexOf("(")>0){var b=this.title.indexOf("(");this.title=this.title.substring(0,b);a=true}if(c&&c.suffix){this.title=this.title+"("+c.suffix+")";a=true}}if(a){this.refreshHeader()}};LightPortlet.prototype.moveBegin=function(c){document.body.onselectstart=function(){return false};document.body.ondragstart=function(){return false};var a=this.left;var d=this.top;if(c!=null){if(document.all){c=event}a=c.clientX;d=c.clientY}this.window.focus(this);this.moveable=true;this.mouseDownX=a;this.mouseDownY=d;this.moveBeginX=a;this.moveBeginY=d;Light.portal.moveTimer=0;this.startMoveTimer();var b=L$(Light._PANEL_PREFIX+this.parent.serverId);Light.portal.highLightBar.style.visibility="hidden";b.appendChild(Light.portal.highLightBar)};LightPortlet.prototype.moveEnd=function(){if(this.moveable){var xDifference=this.mouseDownX-this.moveBeginX;var yDifference=this.mouseDownY-this.moveBeginY;if(this.left<0){this.left=0}if(this.moveToColumn!=this.position){if(this.moveToColumn>this.position){this.moveRight(this.moveToColumn)}else{if(this.moveToColumn<this.position){this.moveLeft(this.moveToColumn)}}}else{if(this.mouseDownY>this.moveBeginY){this.moveDown()}else{if(this.mouseDownY<this.moveBeginY){this.moveUp()}}}this.lastAction=null;this.moveable=false;var vdocument=L$(Light._PANEL_PREFIX+this.parent.serverId);vdocument.removeChild(Light.portal.highLightBar);if(!this.minimized){this.refresh(this.isNew)}this.popup=false;if(this.isNew){this.window.close(this);this.window=eval("new "+(this.windowSkin?this.windowSkin:this.parent.windowSkin)+"()");this.window.render(this);this.isNew=false}}};LightPortlet.prototype.move=function(d){if(this.moveable){var h=d.clientX;var f=d.clientY;this.left+=h-this.mouseDownX;this.top+=f-this.mouseDownY;var g="left";if(h>this.mouseDownX){g="right"}this.refreshPosition(this);this.mouseDownX=h;this.mouseDownY=f;var j=this.mouseDownX-this.moveBeginX;var c=this.mouseDownY-this.moveBeginY;var k=0;var a=-1;for(var b=0;b<this.parent.widths.length;b++){if(b>0){k+=this.parent.widths[b-1]+this.parent.between*(b-1)}if(g=="left"){if(this.left<k+this.parent.widths[b]){a=b;break}}else{if(this.left+this.width>k){a=b}}}this.moveToColumn=a;Light.portal.highLightBar.style.visibility="visible";if(a!=this.position){if(a>this.position){this.highLightBarX(1,a)}else{if(a<this.position){this.highLightBarX(2,a)}}}else{if(this.mouseDownY>this.moveBeginY){this.highLightBarY(3)}else{if(this.mouseDownY<this.moveBeginY){this.highLightBarY(4)}}}}};LightPortlet.prototype.startMoveTimer=function(){if(Light.portal.moveTimer>=0&&Light.portal.moveTimer<10){Light.portal.moveTimer++;var a=this;setTimeout((function(){a.startMoveTimer()}),15)}if(Light.portal.moveTimer==10){Light.portal.dragDropPortlet=this;this.refreshPosition()}};LightPortlet.prototype.refreshPosition=function(){this.window.position(this);this.focus()};LightPortlet.prototype.autoRefresh=function(){if(this.mode!=Light._VIEW_MODE){return}if(this.autoRefreshed){if(this.firstTimeAutoRefreshed){this.firstTimeAutoRefreshed=false}else{this.selfRefresh()}var a=this;this.timer=setTimeout((function(){a.autoRefresh()}),this.periodTime)}};LightPortlet.prototype.selfRefresh=function(){if(!this.minimized&&(!this.maximized||this.autoRefreshWhenMaximized)){if(this.mode==Light._VIEW_MODE){if(this.refreshAtClient){Light.refreshAtClient(this)}else{this.refreshAction=true;Light.executeRefresh(this.id)}}}};LightPortlet.prototype.refresh=function(a){this.setTitle({});if(this.minimized){this.window.container.innerHTML=Light.empty;this.refreshPortletTitle();return}if(this.type==3){if(!Light.executeAtClient(this)){var b=this;setTimeout((function(){b.refresh()}),100)}return}if(Light.executeAtClient(this)){return}if(a==null||a==true){this.window.container.innerHTML=Light.loading;this.parent.repositionPortlets(this)}this.refreshAction=true;Light.executeRefresh(this.id);if(this.autoRefreshed){this.firstTimeAutoRefreshed=true;this.autoRefresh()}};LightPortlet.prototype.changePosition=function(){var a="responseId="+this.id+"&tabId="+this.parent.serverId+"&portletId="+this.serverId+"&column="+this.position+"&row="+this.index;Light.ajax.sendRequest(Light._CHANGE_POSITION,{parameters:a});this.parent.repositionPortlets(this)};LightPortlet.prototype.rememberMode=function(a){};LightPortlet.prototype.rememberState=function(a){if(Light.isLogin()){var b="state="+a+"&portletId="+this.serverId;Light.ajax.sendRequest(Light._REMEBER_STATE,{parameters:b})}};LightPortlet.prototype.refreshButtons=function(){this.window.refreshButtons(this);if(this.mode==Light._EDIT_MODE){this.rememberMode(1)}else{if(this.mode==Light._HELP_MODE){this.rememberMode(2)}else{this.rememberMode(0)}}};LightPortlet.prototype.edit=function(){if(this.editMode){this.mode=Light._EDIT_MODE;this.cancelMinimized();Light.executePortlet(this.id);this.refreshButtons()}};LightPortlet.prototype.cancelEdit=function(){if(this.editMode){this.mode=Light._VIEW_MODE;this.cancelMinimized();this.lastAction=null;this.refresh(false);this.refreshButtons()}};LightPortlet.prototype.help=function(){if(this.helpMode){this.mode=Light._HELP_MODE;this.cancelMinimized();Light.executePortlet(this.id);this.refreshButtons()}};LightPortlet.prototype.cancelHelp=function(){if(this.helpMode){this.mode=Light._VIEW_MODE;this.cancelMinimized();this.lastAction=null;this.refresh(false);this.refreshButtons()}};LightPortlet.prototype.config=function(){if(this.configMode){this.mode=Light._CONFIG_MODE;this.cancelMinimized();var a={id:this.id,title:this.title,barBgColor:this.barBgColor,barFontColor:this.barFontColor,contentBgColor:this.contentBgColor,textColor:this.textColor,transparent:this.transparent,autoRefreshed:this.autoRefreshed?1:0,periodTime:parseInt(this.periodTime/1000),showNumber:this.showNumber,skin:this.window.type,windowStatus:(this.maximized)?2:((this.minimized)?1:0),colspan:this.colspan,marginTop:this.marginTop,maxColumns:this.parent.widths.length,showIcon:this.showIcon,client:this.client};Light.setPortletContent(a.id,Light.getViewTemplate("configMode.jst",a));this.refreshButtons()}};LightPortlet.prototype.cancelConfig=function(){if(this.configMode){this.mode=Light._VIEW_MODE;this.cancelMinimized();this.lastAction=null;this.refresh(false);this.refreshWindow()}};LightPortlet.prototype.cancelMinimized=function(){if(this.minimized){this.minimized=false;this.state=Light._NORMAL_STATE;this.window.minimize(this)}};LightPortlet.prototype.highLightBarX=function(l,b){var n=null;var c=null;var k=true;var f=0;if(this.parent.portlets[b]==null){this.parent.portlets[b]=[]}if(this.parent.portlets[b]!=null){var d=b;var j=this.parent.portlets[d].length;for(var g=0;g<j;g++){if(this.parent.portlets[d][g]!=null){if(f==0){f=this.parent.portlets[d][g].left}if(this.top<this.parent.portlets[d][g].top){n=this.parent.portlets[d][g];break}}}if(n==null){for(var g=j-1;g>=0;g--){if(this.parent.portlets[d][g]!=null){c=this.parent.portlets[d][g];break}}}}else{k=false}if(k){var h=f;var e=this.window.top;var m=this.parent.widths[b];var a=5;if(n!=null){e=n.top-this.marginTop+2;h=n.left;m=n.width}else{if(c!=null){e=c.top+c.getHeight()+2}else{for(var g=0;g<b;g++){h+=this.parent.widths[g]+this.parent.between}}}if(document.all){Light.portal.highLightBar.style.posLeft=h;Light.portal.highLightBar.style.posTop=e}else{Light.portal.highLightBar.style.left=h;Light.portal.highLightBar.style.top=e}Light.portal.highLightBar.style.width=m;Light.portal.highLightBar.style.height=a;Light.portal.highLightBar.style.zIndex=++Light.maxZIndex}else{Light.portal.highLightBar.style.visibility="hidden"}};LightPortlet.prototype.highLightBarY=function(h){var k=null;var f=true;if(h==3){var g=this.index+1;for(var d=g;d<this.parent.portlets[this.position].length;d++){if(this.parent.portlets[this.position][d]!=null){k=this.parent.portlets[this.position][d];break}}if(k==null){f=false}}if(h==4){if(this.index>0){var g=this.index-1;for(var d=g;d>=0;d--){if(this.parent.portlets[this.position][d]!=null){k=this.parent.portlets[this.position][d];break}}}}if(f){var e;var c=this.window.top+5;var j=this.parent.widths[this.position];var a=5;if(k!=null){if(h!=3){c=k.top-this.marginTop+2}else{var b=null;var g=k.index+1;for(var d=g;d<this.parent.portlets[this.position].length;d++){if(this.parent.portlets[this.position][d]!=null){b=this.parent.portlets[this.position][d];break}}if(b!=null){c=b.top-this.marginTop+2}else{c=k.top+k.getHeight()+2}}e=k.left;j=k.width}else{for(var d=0;d<this.position;d++){e+=this.parent.widths[d]+this.parent.between}}if(document.all){Light.portal.highLightBar.style.posLeft=e;Light.portal.highLightBar.style.posTop=c}else{Light.portal.highLightBar.style.left=e;Light.portal.highLightBar.style.top=c}Light.portal.highLightBar.style.width=j;Light.portal.highLightBar.style.height=a;Light.portal.highLightBar.style.zIndex=++Light.maxZIndex}else{Light.portal.highLightBar.style.visibility="hidden"}};LightPortlet.prototype.moveCancel=function(){this.buttonIsClicked=true};LightPortlet.prototype.moveAllowed=function(){this.buttonIsClicked=false};LightPortlet.prototype.moveUp=function(){if(this.index>0){var c=null;var e=0;var b=this.index;var a=this.index-1;for(var d=a;d>=0;d--){if(this.parent.portlets[this.position][d]!=null){c=this.parent.portlets[this.position][d];e=d;break}}if(c!=null){c.index=this.index;this.index=e;this.parent.portlets[this.position][e]=this;this.parent.portlets[this.position][b]=c;c.changePosition();c.lastAction=null;this.left=0;for(var d=0;d<this.position;d++){this.left+=this.parent.widths[d]+this.parent.between}this.changePosition();this.parent.repositionPortlets(this)}}};LightPortlet.prototype.moveDown=function(){var c=null;var e=0;var b=this.index;var a=this.index+1;for(var d=a;d<this.parent.portlets[this.position].length;d++){if(this.parent.portlets[this.position][d]!=null){c=this.parent.portlets[this.position][d];e=d;break}}if(c!=null){c.index=this.index;this.index=e;this.parent.portlets[this.position][e]=this;this.parent.portlets[this.position][b]=c;this.changePosition();this.left=0;for(var d=0;d<this.position;d++){this.left+=this.parent.widths[d]+this.parent.between}c.changePosition();c.lastAction=null;c.parent.repositionPortlets(c)}};LightPortlet.prototype.moveLeft=function(b){if(this.position>0){var n=null;var m=0;var e=this.position;var l=this.index;var f=b;if(this.parent.portlets[f]==null){this.parent.portlets[f]=[]}var k=this.parent.portlets[f].length;for(var h=0;h<k;h++){if(this.parent.portlets[f][h]!=null&&this.top<this.parent.portlets[f][h].top){n=this.parent.portlets[f][h];m=n.index;break}}if(n!=null){for(var h=k-1;h>=0;h--){if(this.parent.portlets[f][h]!=null){var c=this.parent.portlets[f][h];c.index++;this.parent.portlets[f][h+1]=c;this.parent.portlets[f][h+1].changePosition();this.parent.portlets[f][h]=null;c.lastAction=null;if(!c.minimized){c.refresh(false)}if(c.serverId==n.serverId){break}}}this.position=f;this.index=m;this.parent.portlets[this.position][this.index]=this;this.parent.portlets[e][l]=null;this.left=0;for(var h=0;h<this.position;h++){this.left+=this.parent.widths[h]+this.parent.between}this.refreshWidth();this.changePosition()}else{this.position=f;var g=true;for(var h=k-1;h>=0;h--){if(this.parent.portlets[f][h]!=null){var a=this.parent.portlets[f][h];this.index=a.index+1;g=false;break}}if(g){this.index=0}this.parent.portlets[this.position][this.index]=this;this.parent.portlets[e][l]=null;this.left=0;for(var h=0;h<this.position;h++){this.left+=this.parent.widths[h]+this.parent.between}this.refreshWidth();this.changePosition()}var d=this.parent.portlets[e].length;for(var h=l+1;h<d;h++){if(this.parent.portlets[e][h]!=null){var j=this.parent.portlets[e][h];this.parent.repositionPortlets(j);break}}}};LightPortlet.prototype.moveRight=function(b){columns=this.parent.widths.length;if(this.position+1<columns&&this.parent.portlets[this.position+1]==null){this.parent.portlets[this.position+1]=[]}if(this.parent.portlets[this.position+1]!=null){var n=null;var m=0;var e=this.position;var l=this.index;var f=b;var k=this.parent.portlets[f].length;for(var h=0;h<k;h++){if(this.parent.portlets[f][h]!=null&&this.top<this.parent.portlets[f][h].top){n=this.parent.portlets[f][h];m=n.index;break}}if(n!=null){for(var h=k-1;h>=0;h--){if(this.parent.portlets[f][h]!=null){var c=this.parent.portlets[f][h];c.index++;this.parent.portlets[f][h+1]=c;this.parent.portlets[f][h+1].changePosition();this.parent.portlets[f][h]=null;c.lastAction=null;if(!c.minimized){c.refresh(false)}if(c.serverId==n.serverId){break}}}this.position=f;this.index=m;this.parent.portlets[this.position][this.index]=this;this.parent.portlets[e][l]=null;this.left=0;for(var h=0;h<this.position;h++){this.left+=this.parent.widths[h]+this.parent.between}this.refreshWidth();this.changePosition()}else{this.position=f;var g=true;for(var h=k-1;h>=0;h--){if(this.parent.portlets[f][h]!=null){var a=this.parent.portlets[f][h];this.index=a.index+1;g=false;break}}if(g){this.index=0}this.parent.portlets[this.position][this.index]=this;this.parent.portlets[e][l]=null;this.left=0;for(var h=0;h<this.position;h++){this.left+=this.parent.widths[h]+this.parent.between}this.refreshWidth();this.changePosition()}var d=this.parent.portlets[e].length;for(var h=l+1;h<d;h++){if(this.parent.portlets[e][h]!=null){var j=this.parent.portlets[e][h];this.parent.repositionPortlets(j);break}}}};LightPortlet.prototype.minimize=function(){if(this.allowMinimized){this.minimized=!this.minimized;if(this.minimized){this.state=Light._MINIMIZED_STATE;if(this.maximized){this.maximize(false);this.minimized=true}this.window.container.innerHTML=Light.empty}else{this.state=Light._NORMAL_STATE}this.window.minimize(this);this.parent.repositionPortlets(this);this.rememberState((this.minimized)?1:0);if(!this.minimized){this.refresh()}}};LightPortlet.prototype.maximize=function(a){if(this.allowMaximized){this.windowMaximize(a);this.refresh();if(!this.isPopupWindow&&this.mode!=Light._HEADER_MODE&&!isSafari()){if(this.maximized){Light.addHistory(this.id+"/"+Light._MODE_PREFIX+this.mode+"/"+Light._STATE_PREFIX+this.state+"/")}else{Light.addHistory()}}}};LightPortlet.prototype.windowMaximize=function(b){this.maximized=!this.maximized;if(!this.maximized){this.state=Light._NORMAL_STATE;var a=0;var e=0;var c=0;for(var d=0;d<this.parent.portlets[this.position].length;d++){if(d==this.index){break}if(this.parent.portlets[this.position][d]!=null&&!this.parent.portlets[this.position][d].maximized){a+=this.parent.portlets[this.position][d].getHeight()}if(this.parent.portlets[this.position][d]==null){c++}if(this.parent.portlets[this.position][d]!=null&&this.parent.portlets[this.position][d].maximized){a=this.parent.portlets[this.position][d].getHeight();e=d;c=0}}this.top=this.window.top+a+this.marginTop*(d-e-c);this.refreshWidth();this.left=0;for(var d=0;d<this.position;d++){this.left+=this.parent.widths[d]+this.parent.between}Light.portal.container.style.zIndex=1;this.parent.showOtherPortlets()}else{this.state=Light._MAXIMIZED_STATE;this.parent.hideOtherPortlets(this);this.left=Light.portal.layout.maxLeft;this.top=Light.portal.layout.maxTop;this.width=Light.portal.layout.maxWidth;Light.portal.container.style.zIndex=++Light.maxZIndex;Light.portal.body.style.zIndex=++Light.maxZIndex;Light.portal.footer.style.zIndex=++Light.maxZIndex;window.scrollTo(0,0)}this.window.maximize(this);this.parent.repositionPortlets(this);if(b==null||b==true){this.rememberState((this.maximized)?2:0)}};LightPortlet.prototype.close=function(){var a=Light.confirm(Light.getMessage("COMMAND_CLOSE_PORTLET"));if(!a){return}if(this.maximized){this.windowMaximize()}if(this.timer){clearTimeout(this.timer)}this.window.close(this);this.parent.portlets[this.position][this.index]=null;for(var b=Light.portal.allPortlets.length;b--;){if(Light.portal.allPortlets[b]&&Light.portal.allPortlets[b].serverId==this.serverId){Light.portal.allPortlets[b]=null;break}}this.parent.repositionPortlets(this);Light.ajax.sendRequest(Light._DELETE_PORTLET,{parameters:"portletId="+this.serverId})};LightPortlet.prototype.refreshWindow=function(){this.window.refreshWindow(this)};LightPortlet.prototype.refreshHeader=function(){this.window.refreshHeader(this)};LightPortlet.prototype.refreshWindowTransparent=function(){var a="transparent";if(!Light.portal.data.portletWindowTransparent&&!this.transparent){if(this.contentBgColor){a=this.contentBgColor}else{a="#ffffff"}}this.window.container.style.backgroundColor=a};LightPortlet.prototype.refreshTextColor=function(){var a=this.window.container.id;if(this.textColor){$("#"+a).find("*").css({color:this.textColor})}if(this.contentBgColor){$("#"+a+" textarea").css({backgroundColor:this.contentBgColor})}};LightPortlet.prototype.getTop=function(){return this.window.top};LightPortlet.prototype.getHeight=function(){var a=this.window.window.clientHeight;var b=this.window.container.clientHeight;return(a>b)?a:b};LightPortlet.prototype.setContent=function(content){if(this.type==2){try{var data;if(content){data=JSON.parse(content)}else{data={id:this.id,userId:Light.getRememberedUserId(),success:"",error:"",view:this.name+"."+this.mode}}if(typeof data.id=="undefined"){data.id=this.id}if(typeof data.userId=="undefined"){data.userId=Light.getRememberedUserId()}if(typeof data.view=="undefined"){data.view=this.name+"."+this.mode.toLowerCase()}if(typeof data.success=="undefined"){data.success=""}if(typeof data.error=="undefined"){data.error=""}if(data&&data.method){this.data=data}if(document.getElementById(data.view)!=null){this.window.setContent(Light.getViewTemplate(data.view,data))}else{var that=this;setTimeout((function(){that.refreshData(data)}),100)}}catch(err){this.window.setContent(content)}if(this.data&&this.data.method){eval(this.data.method+"('"+this.data.id+"')")}}else{this.window.setContent(content)}};LightPortlet.prototype.refreshData=function(b){if(document.getElementById(b.view)!=null){this.window.setContent(Light.getViewTemplate(b.view,b));this.parent.repositionPortlets(this)}else{var a=this;setTimeout((function(){a.refreshData(b)}),100)}};PortletWindow.prototype=new LightPortlet;PortletWindow.prototype.constructor=PortletWindow;function PortletWindow(data,isNew,noRender){Light.portal.allPortlets.push(this);this.parent=Light.currentTab;this.windowSkin=data.windowSkin;if(isNew){this.window=new WindowSkin2()}else{this.window=eval("new "+(this.windowSkin?this.windowSkin:this.parent.windowSkin)+"()")}this.allowMove=true;this.mode=Light._VIEW_MODE;if(data.initMode==1){this.mode=Light._EDIT_MODE}if(data.initMode==2){this.mode=Light._HELP_MODE}if(data.initMode==3){this.mode=Light._CONFIG_MODE}this.state=Light._NORMAL_STATE;this.minimized=false;this.maximized=false;if(data.initState==1){this.state=Light._MINIMIZED_STATE;this.minimized=true}if(data.initState==2){this.state=Light._MAXIMIZED_STATE;this.maximized=true}this.serverId=data.serverId;this.id=Light._PR_PREFIX+this.serverId;this.position=data.column;this.colspan=data.colspan;this.title=data.title;this.icon=data.icon;this.url=data.url;this.name=data.name;this.requestUrl=data.path;this.closeable=data.closeable;this.refreshMode=data.refreshMode;this.editMode=data.editMode;this.helpMode=data.helpMode;this.configMode=data.configMode;this.allowMinimized=data.allowMinimized;this.allowMaximized=data.allowMaximized;this.autoRefreshed=data.autoRefreshed;this.refreshAtClient=data.refreshAtClient;this.periodTime=data.periodTime;this.showNumber=data.showNumber;this.allowJS=data.allowJS;this.barBgColor=data.barBgColor;this.barFontColor=data.barFontColor;this.contentBgColor=data.contentBgColor;this.textColor=data.textColor;this.parameter=data.parameter;this.marginTop=data.marginTop;this.transparent=false;if(data.transparent==1){this.transparent=true}this.showIcon=true;if(data.showIcon==0){this.showIcon=false}this.client=data.client;this.type=data.type;this.index=this.parent.getPortletIndex(this.position);data=null;var height=0;var maxIndex=0;var nullNum=0;for(var i=0;i<this.parent.portlets[this.position].length;i++){var vPortlet=this.parent.portlets[this.position][i];if(i==this.index){break}if(vPortlet&&!vPortlet.maximized){height+=vPortlet.getHeight()+vPortlet.marginTop}if(!vPortlet){nullNum++}if(vPortlet&&vPortlet.maximized){height=vPortlet.getHeight()+vPortlet.marginTop;maxIndex=i;nullNum=0}if(this.position>0){for(var j=0;j<this.position;j++){var portlets=this.parent.portlets[j];if(portlets&&portlets[i]){if(portlets[i].colspan+portlets[i].position>this.position){height+=portlets[i].getHeight()+portlets[i].marginTop}}}}}this.refreshWidth();this.isNew=isNew;if(isNew){this.top=getMousePositionY(Light.e)-120;this.left=0-parseInt(Light.portal.body.style.marginLeft)+getMousePositionX(Light.e);this.popup=true}else{if(height>0){this.top=this.window.top+height+this.marginTop}else{this.top=this.window.top+this.marginTop+this.parent.getTop()}this.left=this.window.left;for(var i=0;i<this.position;i++){this.left+=this.parent.widths[i]+this.parent.between}}this.parent.portlets[this.position][this.index]=this;if(!noRender){this.window.render(this);this.window.container.innerHTML=Light.empty;this.parent.repositionPortlets(this);this.refreshPosition()}else{this.window.bind(this)}this.moveable=false;this.autoRefreshWhenMaximized=false;this.autoShow=false;this.opacity=0;this.fade="in";this.myPictureIndex=0;this.myPictures=[];this.autoShowId=null;this.mouseDownX=0;this.mouseDownY=0;this.content=null;if(this.autoRefreshed){this.firstTimeAutoRefreshed=true;this.autoRefresh()}}PortletPopupWindow.prototype=new LightPortlet;PortletPopupWindow.prototype.constructor=PortletPopupWindow;function PortletPopupWindow(D,f,w,F,B,h,d,y,t,z,e,q,m,k,v,n,l,E,o,C,g,A,b,j,a,c,r){Light.portal.allPortlets.push(this);this.parent=Light.currentTab;this.window=new WindowSkin2();this.allowMove=true;this.isPopupWindow=true;this.popup=true;if(typeof j!="undefined"&&!j){this.popup=false}if(typeof a!="undefined"){this.location=a;if(this.location==1){Light.portal.originalLeft=Light.portal.layout.containerLeft;Light.portal.originalHeaderLeft=Light.portal.header.style.marginLeft;Light.portal.originalBodyLeft=Light.portal.body.style.marginLeft;Light.portal.layout.containerLeft=w+10;Light.portal.header.style.marginLeft=Light.portal.layout.containerLeft;Light.portal.body.style.marginLeft=Light.portal.layout.containerLeft;this.allowMove=false}}this.mode=Light._VIEW_MODE;this.state=Light._NORMAL_STATE;this.serverId=Date.parse(new Date());this.id=Light._PR_PREFIX+this.serverId;this.position=D;this.left=f;this.top=f;if(r){this.top=r}this.width=w;this.title=F;this.icon=B;this.url=h;this.name=d;this.requestUrl=y;this.closeable=t;this.refreshMode=z;this.editMode=e;this.helpMode=q;this.configMode=m;this.allowMinimized=true;if(A!=null&&!A){this.allowMinimized=false}this.allowMaximized=true;if(b!=null&&!b){this.allowMaximized=false}this.autoRefreshed=k;this.refreshAtClient=v;this.periodTime=n;this.showNumber=10;this.allowJS=l;this.barBgColor=E;this.barFontColor=o;this.className="portlet-popup";this.contentBgColor="#ffffff";if(C!=""){this.contentBgColor=C}this.parameter=g;this.index=this.parent.getPortletIndex(this.position);this.type=1;if(c!=null){this.type=c}this.marginTop=10;var s=0;var p=0;var u=0;this.originalTop=this.top;this.originalWidth=this.width;this.originalLeft=this.left;this.parent.portlets[this.position][this.index]=this;this.window.render(this);this.minimized=false;this.maximized=false;this.moveable=false;this.autoRefreshWhenMaximized=false;this.autoShow=false;this.opacity=0;this.fade="in";this.myPictureIndex=0;this.myPictures=[];this.autoShowId=null;this.mouseDownX=0;this.mouseDownY=0;this.refreshPosition();this.window.container.innerHTML=Light.loading;this.focus();if(this.autoRefreshed){this.firstTimeAutoRefreshed=true;this.autoRefresh(this)}if(this.location==null||this.location==5){this.windowMaximize()}}PortletPopupWindow.prototype.rememberMode=function(a){};PortletPopupWindow.prototype.rememberState=function(a){};PortletPopupWindow.prototype.moveBegin=function(b){document.body.onselectstart=function(){return false};document.body.ondragstart=function(){return false};if(document.all){b=event}var a=b.clientX;var c=b.clientY;this.focus();this.moveable=true;this.mouseDownX=a;this.mouseDownY=c;this.moveBeginX=a;this.moveBeginY=c;Light.portal.moveTimer=0;this.startMoveTimer(this)};PortletPopupWindow.prototype.moveEnd=function(){if(this.moveable){this.moveable=false;this.originalLeft=this.left;this.originalTop=this.top}};PortletPopupWindow.prototype.move=function(b){if(this.moveable){var a=b.clientX;var c=b.clientY;this.left+=a-this.mouseDownX;this.top+=c-this.mouseDownY;this.refreshPosition();this.mouseDownX=a;this.mouseDownY=c}};PortletPopupWindow.prototype.changePosition=function(){this.parent.repositionPortlets(this)};PortletPopupWindow.prototype.moveLeft=function(){};PortletPopupWindow.prototype.moveRight=function(){};PortletPopupWindow.prototype.close=function(){this.window.close(this);this.parent.portlets[this.position][this.index]=null;for(var a=Light.portal.allPortlets.length-1;a>=0;a--){if(Light.portal.allPortlets[a]&&Light.portal.allPortlets[a].serverId==this.serverId){Light.portal.allPortlets[a]=null;break}}if(this.maximized){this.parent.showOtherPortlets()}this.parent.repositionPortlets(this);this.parent.repositionFooter();if(Light.portal.originalLeft!=null){Light.portal.layout.containerLeft=Light.portal.originalLeft;Light.portal.header.style.marginLeft=Light.portal.originalHeaderLeft;Light.portal.body.style.marginLeft=Light.portal.originalBodyLeft;Light.portal.originalLeft=null;Light.portal.originalHeaderLeft=null;Light.portal.originalBodyLeft=null}Light.addHistory("")};PortletPopupWindow.prototype.refreshWindowTransparent=function(){};PortletPopupWindow.prototype.refreshTextColor=function(){};Light.service={getPortalHeader:function(a){return new LightPortalHeaderImpl().render(a)},getPortalMenu:function(a){return new LightPortalMenuImpl().render(a)},getPortalFooter:function(a){return new LightPortalFooterImpl().render(a)}};function log(a){}function logDebug(a){if(!log.window_||log.window_.closed){var c=window.open("",null,"width=400,height=200,scrollbars=yes,resizable=yes,status=no,location=no,menubar=no,toolbar=no");if(!c){return}var b=c.document;b.write("<html><head><title>Debug Log</title></head><body></body></html>");b.close();log.window_=c}var d=log.window_.document.createElement("div");d.appendChild(log.window_.document.createTextNode(a));log.window_.document.body.appendChild(d);d=null}Light.setCookie=function(b,d,a,f,c,e){if(!c){c=Light.getCookieDomain()}Light.deleteCookie(b,f,c);document.cookie=b+"="+escape(d)+((a)?"; expires="+a.toGMTString():"")+((f)?"; path="+f:"; path= /")+((c)?"; domain="+c:"")+((e)?"; secure":"")};Light.getCookie=function(c){var b=document.cookie;if(!b){return null}var e=c+"=";var d=b.indexOf("; "+e);if(d==-1){d=b.indexOf(e);if(d!=0){return null}}else{d+=2}var a=document.cookie.indexOf(";",d);if(a==-1){a=b.length}return unescape(b.substring(d+e.length,a))};Light.deleteCookie=function(a,c,b){if(Light.getCookie(a)){if(!b){b=Light.getCookieDomain()}document.cookie=a+"="+((c)?"; path="+c:"; path= /")+((b)?"; domain="+b:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}};Light.getMessage=function(b){var a=L$(b);return(a)?a.title:""};Light.getCookieDomain=function(){var b=window.location.hostname;if(b.toLowerCase().startsWith("www.")){b=b.substr(4)}var e=Light._DOMAIN_LIST.split(",");for(var a in e){if(b.indexOf(e[a])>=0){var c=b.substring(0,b.indexOf(e[a]));var d=c.split(".");if(d.length>=2){return"."+d[d.length-1]+e[a]}else{if(d.length==1){return"."+c+e[a]}else{return null}}}}return null};Light.alert=function(a){alert(a)};Light.confirm=function(a){return confirm(a)};Light.newElement=function(d){if(!d.element){return null}var b=document.createElement(d.element);for(var a in d){if(a!="element"){if(a!="style"){b[a]=d[a]}else{for(var c in d.style){b.style[c]=d.style[c]}}}}if(d.element==="a"&&!d.href){b.href="javascript:;"}return b};String.prototype.isNumeric=function(){var e="0123456789.";var d=true;var b;for(var c=0,a=this.length;c<a&&d;c++){b=this.charAt(c);if(e.indexOf(b)==-1){d=false}}return d};String.prototype.isDigit=function(){if(this.length>1){return false}var a="1234567890";if(a.indexOf(this)!=-1){return true}return false};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.startsWith=function(a){return this.substring(0,a.length)==a};String.prototype.endsWith=function(a){return(this.match(a+"$")==a)};if(!Array.prototype.map){Array.prototype.map=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=new Array(a);var d=arguments[1];for(var c=0;c<a;c++){if(c in this){e[c]=b.call(d,this[c],c,this)}}return e}}if(!Array.prototype.every){Array.prototype.every=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&!b.call(d,this[c],c,this)){return false}}return true}}if(!Array.prototype.filter){Array.prototype.filter=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in this){var f=this[c];if(b.call(d,f,c,this)){e.push(f)}}}return e}}if(!Array.prototype.forEach){Array.prototype.forEach=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(b){var a=this.length;var c=Number(arguments[1]);if(isNaN(c)){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}else{if(c>=a){c=a-1}}}for(;c>-1;c--){if(c in this&&this[c]===b){return c}}return -1}}if(!Array.prototype.reduce){Array.prototype.reduce=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=0;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){d=this[c++];break}if(++c>=a){throw new TypeError()}}while(true)}for(;c<a;c++){if(c in this){d=b.call(null,d,this[c],c,this)}}return d}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}if(a==0&&arguments.length==1){throw new TypeError()}var c=a-1;if(arguments.length>=2){var d=arguments[1]}else{do{if(c in this){d=this[c--];break}if(--c<0){throw new TypeError()}}while(true)}for(;c>=0;c--){if(c in this){d=b.call(null,d,this[c],c,this)}}return d}}if(!Array.prototype.some){Array.prototype.some=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this&&b.call(d,this[c],c,this)){return true}}return false}}Array.prototype.exists=function(b){for(var a=0;a<this.length;a++){if(typeof this[a]!=="undefined"&&this[a]!=null&&this[a]==b){return true}}return false};Array.prototype.joinValue=function(a){var c="";for(var b=0;b<this.length;b++){if(typeof this[b]!=="undefined"&&this[b]!=null&&this[b].length>0){if(c.length==0){c=this[b]}else{c+=a+this[b]}}}return c};Array.prototype.get=function(b,c){for(var a=0;a<this.length;a++){if(typeof c!="undefined"&&c!=null){if(typeof this[a]!=="undefined"&&this[a]!=null&&this[a][c]==b){return this[a]}else{if(typeof this[a]!=="undefined"&&this[a]!=null&&this[a]==b){return this[a]}}}}return null};function isIE(){return/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)}function isFirefox(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("firefox")>=0)?true:false}function isGecko(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("gecko")>=0)?true:false}function isChrome(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("chrome")>=0)?true:false}function isSafari(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("safari/")>=0)?((a.indexOf("chrome")>=0)?false:true):false}function isOpera(){return(typeof window.opera!=="undefined")?true:false}function isIPhone(){return((navigator.userAgent.match(/iPhone/i))&&!(navigator.userAgent.match(/iPad/i)))}function isIPad(){return navigator.userAgent.match(/iPad/i)}function getWindowHeight(){return document.documentElement.scrollHeight}function getMousePositionX(b){var a,c=0;if(!isIE()){if(b){if(b.pageX||b.pageY){a=b.pageX;c=b.pageY}else{if(b.clientX||b.clientY){a=b.clientX+document.body.scrollLeft;c=b.clientY+document.body.scrollTop}}}}else{if(window.event){a=event.clientX+document.body.scrollLeft;c=event.clientY}else{if(b){if(b.pageX||b.pageY){a=b.pageX;c=b.pageY}else{if(b.clientX||b.clientY){a=b.clientX+document.body.scrollLeft;c=b.clientY}}}}}if(!a){a=0}return a}function getMousePositionY(b){var a,c=0;if(!isIE()){if(b){if(b.pageX||b.pageY){a=b.pageX;c=b.pageY}else{if(b.clientX||b.clientY){a=b.clientX+document.body.scrollLeft;c=b.clientY+document.body.scrollTop}}}}else{if(window.event){a=event.clientX;c=event.clientY+document.body.scrollTop}else{if(b){if(b.pageX||b.pageY){a=b.pageX;c=b.pageY}else{if(b.clientX||b.clientY){a=b.clientX;c=b.clientY+document.body.scrollTop}}}}}if(!c){c=0}return c}function setPosition(b,a,c){if(document.all){if(typeof a!="undefined"){b.style.posLeft=a}if(typeof c!="undefined"){b.style.posTop=c}}else{if(typeof a!="undefined"){b.style.left=a}if(typeof c!="undefined"){b.style.top=c}}}function getPositionX(b){var a=0;if(b){if(document.all){a=parseInt(b.style.posLeft)}else{a=parseInt(b.style.left)}}return a}function getPositionY(a){var b=0;if(a){if(document.all){b=parseInt(a.style.posTop)}else{b=parseInt(a.style.top)}}return b}function getX(b){var a=0;if(!isIE()){while(b!=null){a+=b.offsetLeft;b=b.offsetParent}}else{var c=b.getBoundingClientRect();a=c.left;if(document.body.scrollLeft!=null){a=c.left+document.body.scrollLeft}}return a}function getY(b){var a=0;if(!isIE()){while(b!=null){a+=b.offsetTop;b=b.offsetParent}}else{var c=b.getBoundingClientRect();a=c.top;if(document.body.scrollTop!=null){a=c.top+document.body.scrollTop}}return a}function getScreenCenterY(){return getScrollOffset()+(getInnerHeight()/2)}function getScreenCenterX(){return(document.body.clientWidth/2)}function getInnerHeight(){var a;if(self.innerHeight){a=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){a=document.documentElement.clientHeight}else{if(document.body){a=document.body.clientHeight}}}return a}function getScrollOffset(){var a;if(self.pageYOffset){a=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else{if(document.body){a=document.body.scrollTop}}}return a}function addEventHandler(c,a,b){removeEvent(c,a,b);if(document.attachEvent){c.attachEvent("on"+a,b)}else{if(document.addEventListener){c.addEventListener(a,b,false)}}}function removeEvent(d,a,b){try{if(d.removeEventListener){d.removeEventListener(a,b,false)}else{if(d.detachEvent){d.detachEvent("on"+a,d[a+b]);d[a+b]=null;d["e"+a+b]=null}}}catch(c){}}AIM={portletId:null,frame:function(f){var e="f"+Math.floor(Math.random()*99999);var b=document.createElement("DIV");b.innerHTML='<iframe style="display:none" src="about:blank" id="'+e+'" name="'+e+'" onload="AIM.loaded(\''+e+"')\"></iframe>";document.body.appendChild(b);var a=document.getElementById(e);if(f&&typeof(f.onComplete)=="function"){a.onComplete=f.onComplete}return e},form:function(b,a){b.setAttribute("target",a)},submit:function(b,d,a){AIM.portletId=a;AIM.form(b,AIM.frame(d));if(d&&typeof(d.onStart)=="function"){return d.onStart(a)}else{return true}},loaded:function(c){var a=document.getElementById(c);if(a.contentDocument){var b=a.contentDocument}else{if(a.contentWindow){var b=a.contentWindow.document}else{var b=window.frames[c].document}}if(b.location.href=="about:blank"){return}if(typeof(a.onComplete)=="function"){a.onComplete(AIM.portletId,b.getElementsByTagName("p")[0].childNodes[0].textContent)}}};var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};function WindowSkin(){this.left=0;this.top=30+(isIE()?10:0)}WindowSkin.prototype.bind=function(a){};WindowSkin.prototype.render=function(a){};WindowSkin.prototype.focus=function(a){};WindowSkin.prototype.show=function(a){};WindowSkin.prototype.hide=function(a){};WindowSkin.prototype.position=function(a){};WindowSkin.prototype.minimize=function(a){};WindowSkin.prototype.maximize=function(a){};WindowSkin.prototype.close=function(a){};WindowSkin.prototype.refreshWindow=function(a){};WindowSkin.prototype.refreshHeader=function(a){};WindowSkin.prototype.refreshButtons=function(a){};WindowSkin.prototype.setContent=function(a){this.container.innerHTML=a};WindowSkin.prototype.getRefreshButton=function(){return"<div title='"+Light.getMessage("REFRESH_PORTLET")+"' class='icons refresh_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getEditButton=function(){return"<div title='"+Light.getMessage("EDIT_MODE")+"' class='icons edit_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getCancelEditButton=function(){return"<div title='"+Light.getMessage("VIEW_MODE")+"' class='icons leave_edit_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getHelpButton=function(){return"<div title='"+Light.getMessage("HELP_MODE")+"' class='icons help_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getCancelHelpButton=function(){return"<div title='"+Light.getMessage("VIEW_MODE")+"'  class='icons leave_help_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getConfigButton=function(){return"<div title='"+Light.getMessage("CONFIG_MODE")+"' class='icons config_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getCancelConfigButton=function(){return"<div title='"+Light.getMessage("VIEW_MODE")+"' class='icons leave_config_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getMinButton=function(){return"<div title='"+Light.getMessage("MINIMIZED")+"' class='icons min_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getMaxButton=function(){return"<div title='"+Light.getMessage("MAXIMIZED")+"' class='icons max_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getRestoreButton=function(){return"<div title='"+Light.getMessage("RESTORE")+"' class='icons restore_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getPopoutButton=function(){return"<div title='"+Light.getMessage("POPOUT")+"' class='icons pop_out' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getPopinButton=function(){return"<div title='"+Light.getMessage("POPIN")+"' class='icons pop_in' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin.prototype.getCloseButton=function(){return"<div title='"+Light.getMessage("CLOSE")+"' class='icons close_on' onmouseover='this.style.MozOpacity=1;if(this.filters)this.filters.alpha.opacity=100' onmouseout='this.style.MozOpacity=0.5;if(this.filters)this.filters.alpha.opacity=50'></div>"};WindowSkin1.prototype=new WindowSkin;WindowSkin1.prototype.constructor=WindowSkin1;function WindowSkin1(){WindowSkin.call(this);this.type="WindowSkin1";this.top=40+(isIE()?10:0);this.layout={titleRelativeLeft:10,titleRelativeTop:-8,buttonRelative:16,upRelativeRight:94,downRelativeRight:78,minRelativeRight:52,maxRelativeRight:36,closeRelativeRight:20,buttonRelativeTop:-6}}WindowSkin1.prototype.render=function(a){this.renderContainer(a);this.renderHeader(a)};WindowSkin1.prototype.renderContainer=function(b){this.container=this.createPortletContainer(b);this.window=this.container;var a=L$("panel_"+b.parent.serverId);a.appendChild(this.container)};WindowSkin1.prototype.renderHeader=function(b){this.header=this.createPortletHeader(b);var a=L$("panel_"+b.parent.serverId);a.appendChild(this.header);if(b.closeable){this.closeButton=this.createPortletCloseButton(b);a.appendChild(this.closeButton)}if(b.allowMaximized){if(b.maximized){this.maxButton=this.createPortletRestoreMaxButton(b);this.createPortletMaxButton(b)}else{this.maxButton=this.createPortletMaxButton(b);this.createPortletRestoreMaxButton(b)}a.appendChild(this.maxButton)}if(b.allowMinimized){if(b.minimized){this.minButton=this.createPortletRestoreMinButton(b);this.createPortletMinButton(b)}else{this.minButton=this.createPortletMinButton(b);this.createPortletRestoreMinButton(b)}a.appendChild(this.minButton)}if(b.configMode){if(b.mode==Light._CONFIG_MODE){this.configButton=this.createPortletCancelConfigButton(b);this.createPortletConfigButton(b)}else{this.configButton=this.createPortletConfigButton(b);this.createPortletCancelConfigButton(b)}a.appendChild(this.configButton)}if(b.helpMode){if(b.mode==Light._HELP_MODE){this.helpButton=this.createPortletCancelHelpButton(b);this.createPortletHelpButton(b)}else{this.helpButton=this.createPortletHelpButton(b);this.createPortletCancelHelpButton(b)}a.appendChild(this.helpButton)}if(b.editMode){if(b.mode==Light._EDIT_MODE){this.editButton=this.createPortletCancelEditButton(b);this.createPortletEditButton(b)}else{this.editButton=this.createPortletEditButton(b);this.createPortletCancelEditButton(b)}a.appendChild(this.editButton)}if(b.refreshMode){this.refreshButton=this.createPortletRefreshButton(b);a.appendChild(this.refreshButton)}};WindowSkin1.prototype.focus=function(b){var a=++Light.maxZIndex;this.container.style.zIndex=a;Light.maxZIndex++;this.header.style.zIndex=++a;if(b.refreshMode){this.refreshButton.style.zIndex=a}if(b.editMode){this.editButton.style.zIndex=a}if(b.helpMode){this.helpButton.style.zIndex=a}if(b.configMode){this.configButton.style.zIndex=a}if(b.allowMinimized){this.minButton.style.zIndex=a}if(b.allowMaximized){this.maxButton.style.zIndex=a}if(b.closeable){this.closeButton.style.zIndex=a}};WindowSkin1.prototype.show=function(a){this.hidden=false;this.container.style.visibility="visible";this.header.style.visibility="visible";if(a.refreshMode){this.refreshButton.style.visibility="visible"}if(a.editMode){this.editButton.style.visibility="visible"}if(a.helpMode){this.helpButton.style.visibility="visible"}if(a.configMode){this.configButton.style.visibility="visible"}if(a.allowMinimized){this.minButton.style.visibility="visible"}if(a.allowMaximized){this.maxButton.style.visibility="visible"}if(a.closeable){this.closeButton.style.visibility="visible"}};WindowSkin1.prototype.hide=function(a){this.hidden=true;this.container.style.visibility="hidden";this.header.style.visibility="hidden";if(a.refreshMode){this.refreshButton.style.visibility="hidden"}if(a.editMode){this.editButton.style.visibility="hidden"}if(a.helpMode){this.helpButton.style.visibility="hidden"}if(a.configMode){this.configButton.style.visibility="hidden"}if(a.allowMinimized){this.minButton.style.visibility="hidden"}if(a.allowMaximized){this.maxButton.style.visibility="hidden"}if(a.closeable){this.closeButton.style.visibility="hidden"}};WindowSkin1.prototype.position=function(b){this.container.style.width=b.width;if(document.all){this.container.style.posLeft=b.left;if(b.popup!=null){b.top=b.top-b.marginTop}this.container.style.posTop=b.top;this.header.style.posLeft=b.left+this.layout.titleRelativeLeft;this.header.style.posTop=b.top+this.layout.titleRelativeTop;var a=this.layout.minRelativeRight+this.layout.buttonRelative;if(b.configMode){this.configButton.style.posLeft=b.left+b.width-a;this.configButton.style.posTop=b.top+this.layout.buttonRelativeTop;a=a+this.layout.buttonRelative}if(b.helpMode){this.helpButton.style.posLeft=b.left+b.width-a;this.helpButton.style.posTop=b.top+this.layout.buttonRelativeTop;a=a+this.layout.buttonRelative}if(b.editMode){this.editButton.style.posLeft=b.left+b.width-a;this.editButton.style.posTop=b.top+this.layout.buttonRelativeTop;a=a+this.layout.buttonRelative}if(b.refreshMode){this.refreshButton.style.posLeft=b.left+b.width-a;this.refreshButton.style.posTop=b.top+this.layout.buttonRelativeTop}if(b.allowMinimized){this.minButton.style.posLeft=b.left+b.width-this.layout.minRelativeRight;this.minButton.style.posTop=b.top+this.layout.buttonRelativeTop}if(b.allowMaximized){this.maxButton.style.posLeft=b.left+b.width-this.layout.maxRelativeRight;this.maxButton.style.posTop=b.top+this.layout.buttonRelativeTop}if(b.closeable){this.closeButton.style.posLeft=b.left+b.width-this.layout.closeRelativeRight;this.closeButton.style.posTop=b.top+this.layout.buttonRelativeTop}}else{this.container.style.left=b.left;this.container.style.top=b.top;this.header.style.left=b.left+this.layout.titleRelativeLeft;this.header.style.top=b.top+this.layout.titleRelativeTop;var a=this.layout.minRelativeRight+this.layout.buttonRelative;if(b.configMode){this.configButton.style.left=b.left+b.width-a;this.configButton.style.top=b.top+this.layout.buttonRelativeTop;a=a+this.layout.buttonRelative}if(b.helpMode){this.helpButton.style.left=b.left+b.width-a;this.helpButton.style.top=b.top+this.layout.buttonRelativeTop;a=a+this.layout.buttonRelative}if(b.editMode){this.editButton.style.left=b.left+b.width-a;this.editButton.style.top=b.top+this.layout.buttonRelativeTop;a=a+this.layout.buttonRelative}if(b.refreshMode){this.refreshButton.style.left=b.left+b.width-a;this.refreshButton.style.top=b.top+this.layout.buttonRelativeTop}if(b.allowMinimized){this.minButton.style.left=b.left+b.width-this.layout.minRelativeRight;this.minButton.style.top=b.top+this.layout.buttonRelativeTop}if(b.allowMaximized){this.maxButton.style.left=b.left+b.width-this.layout.maxRelativeRight;this.maxButton.style.top=b.top+this.layout.buttonRelativeTop}if(b.closeable){this.closeButton.style.left=b.left+b.width-this.layout.closeRelativeRight;this.closeButton.style.top=b.top+this.layout.buttonRelativeTop}}this.focus(b)};WindowSkin1.prototype.minimize=function(b){var a=L$("panel_"+b.parent.serverId);if(b.minimized){a.removeChild(this.minButton);this.minButton=this.createPortletRestoreMinButton(b);a.appendChild(this.minButton)}else{a.removeChild(this.minButton);this.minButton=this.createPortletMinButton(b);a.appendChild(this.minButton)}this.position(b)};WindowSkin1.prototype.maximize=function(b){var a=L$("panel_"+b.parent.serverId);if(!b.maximized){a.removeChild(this.maxButton);this.maxButton=this.createPortletMaxButton(b);a.appendChild(this.maxButton)}else{a.removeChild(this.maxButton);this.maxButton=this.createPortletRestoreMaxButton(b);a.appendChild(this.maxButton)}this.position(b)};WindowSkin1.prototype.close=function(b){var a=L$("panel_"+b.parent.serverId);a.removeChild(this.container);a.removeChild(this.header);if(b.refreshMode){a.removeChild(this.refreshButton)}if(b.editMode){a.removeChild(this.editButton)}if(b.helpMode){a.removeChild(this.helpButton)}if(b.configMode){a.removeChild(this.configButton)}if(b.allowMinimized){a.removeChild(this.minButton)}if(b.allowMaximized){a.removeChild(this.maxButton)}a.removeChild(this.closeButton)};WindowSkin1.prototype.refreshWindow=function(b){var a=L$("panel_"+b.parent.serverId);a.removeChild(this.container);this.container=this.createPortletContainer(b);a.appendChild(this.container);this.refreshHeader(b);this.refreshButtons(b);this.position(b)};WindowSkin1.prototype.refreshHeader=function(b){var a=L$("panel_"+b.parent.serverId);a.removeChild(this.header);this.header=this.createPortletHeader(b);if(document.all){this.header.style.posLeft=b.left+this.layout.titleRelativeLeft;this.header.style.posTop=b.top+this.layout.titleRelativeTop}else{this.header.style.left=b.left+this.layout.titleRelativeLeft;this.header.style.top=b.top+this.layout.titleRelativeTop}a.appendChild(this.header);if(this.hidden){this.hide(b)}};WindowSkin1.prototype.refreshButtons=function(b){var a=L$("panel_"+b.parent.serverId);if(b.editMode){a.removeChild(this.editButton);if(b.mode==Light._EDIT_MODE){this.editButton=this.createPortletCancelEditButton(b)}else{this.editButton=this.createPortletEditButton(b)}this.editButton.style.visibility="hidden"}if(b.helpMode){a.removeChild(this.helpButton);if(b.mode==Light._HELP_MODE){this.helpButton=this.createPortletCancelHelpButton(b)}else{this.helpButton=this.createPortletHelpButton(b)}this.helpButton.style.visibility="hidden"}if(b.configMode){a.removeChild(this.configButton);if(b.mode==Light._CONFIG_MODE){this.configButton=this.createPortletCancelConfigButton(b)}else{this.configButton=this.createPortletConfigButton(b)}this.configButton.style.visibility="hidden"}if(b.editMode){a.appendChild(this.editButton)}if(b.helpMode){a.appendChild(this.helpButton)}if(b.configMode){a.appendChild(this.configButton)}this.position(b);if(b.editMode){this.editButton.style.visibility="visible"}if(b.helpMode){this.helpButton.style.visibility="visible"}if(b.configMode){this.configButton.style.visibility="visible"}};WindowSkin1.prototype.createPortletContainer=function(b){var a=Light.newElement({element:"div",id:b.id,className:(b.className)?b.className:"portlet",style:{position:"absolute",width:b.width,zIndex:++Light.maxZIndex}});if(b){if(b.contentBgColor){a.style.backgroundColor=b.contentBgColor}else{if(Light.portal.data.portletWindowTransparent==false&&b.transparent==false){a.style.backgroundColor="#ffffff"}}}return a};WindowSkin1.prototype.createPortletHeader=function(e){var a=Light.newElement({element:"div",className:"portlet-header",style:{position:"absolute"}});if(Light.getCurrentTab().isMoveable){a.onmousedown=function(f){e.moveBegin(f)};a.style.cursor="move"}var b="";if(e.showIcon&&e.icon){if(e.icon.indexOf("/")>=0){if(e.icon.substring(0,4)=="http"){b="<img src='"+e.icon+"' height='16' width='16' />"}else{b="<img src='"+Light.getContextPath()+e.icon+"' height='16' width='16'/>"}}else{var c=e.icon.split(" ");var d="";if(c.length>1){d=c[0]}b="<span class='"+d+"'><span class='"+e.icon+"'></span></span>"}}if(e.url){b=b+"<a href='"+e.url+"' target='_blank' style='margin-left:5px;'>";if(e.barFontColor){b=b+"<font color='"+e.barFontColor+"'>"}b=b+e.title;if(e.barFontColor){b=b+"</font>"}b=b+"</a>"}else{b=b+"<label style='margin-left:5px;'>"+e.title+"</label>"}a.innerHTML=b;a.style.zIndex=Light.maxZIndex++;if(e.barBgColor){a.style.backgroundImage="none";a.style.backgroundColor=e.barBgColor}if(e.barFontColor){a.style.color=e.barFontColor}return a};WindowSkin1.prototype.createPortletRefreshButton=function(c){var b=Light.newElement({element:"div",className:"portlet-header-button",style:{zIndex:Light.maxZIndex}});var a=Light.newElement({element:"span",className:"icons",innerHTML:this.getRefreshButton(),onclick:function(){c.refresh()}});b.appendChild(a);return b};WindowSkin1.prototype.createPortletEditButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getEditButton();a.className="icons";a.onclick=function(){c.edit()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletCancelEditButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getCancelEditButton();a.className="icons";a.onclick=function(){c.cancelEdit()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletHelpButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getHelpButton();a.className="icons";a.onclick=function(){c.help()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletCancelHelpButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getCancelHelpButton();a.className="icons";a.onclick=function(){c.cancelHelp()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletConfigButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getConfigButton();a.className="icons";a.onclick=function(){c.config()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletCancelConfigButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getCancelConfigButton();a.className="icons";a.onclick=function(){c.cancelConfig()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletMinButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getMinButton();a.className="icons";a.onclick=function(){c.minimize()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletRestoreMinButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getRestoreButton();a.className="icons";a.onclick=function(){c.minimize()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletMaxButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getMaxButton();a.className="icons";a.onclick=function(){c.maximize()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletRestoreMaxButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getRestoreButton();a.className="icons";a.onclick=function(){c.maximize()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.createPortletCloseButton=function(c){var b=document.createElement("div");b.className="portlet-header-button";var a=document.createElement("span");a.innerHTML=this.getCloseButton();a.className="icons";a.onclick=function(){c.close()};b.appendChild(a);b.style.zIndex=Light.maxZIndex;return b};WindowSkin1.prototype.setContent=function(a){this.container.innerHTML="<br/>"+a};WindowSkin2.prototype=new WindowSkin;WindowSkin2.prototype.constructor=WindowSkin2;function WindowSkin2(){this.type="WindowSkin2"}WindowSkin2.prototype.render=function(b){this.window=this.createPortletWindow(b);this.container=this.createPortletContainer(b);this.header=this.createPortletHeader(b,this);this.headerButton=this.createPortletHeaderButton(b);if(this.headerButton!=null){this.header.appendChild(this.headerButton)}this.window.appendChild(this.header);this.window.appendChild(this.container);var a=L$("panel_"+b.parent.serverId);if(typeof b.popup!="undefined"&&!b.popup){if(typeof b.location!="undefined"&&b.location==1){Light.portal.container.appendChild(this.window);Light.portal.content.style.marginLeft="0px"}else{if(typeof b.location!="undefined"&&b.location==0){Light.portal.container.insertBefore(this.window,Light.portal.header);Light.portal.content.className=""}else{a.appendChild(this.window)}}}else{if(b.popup&&b.location&&b.location==4){this.window.style.zIndex=Light.maxZIndex+10000;document.body.appendChild(this.window)}else{a.appendChild(this.window)}}};WindowSkin2.prototype.bind=function(a){this.window=L$(Light._PW_PREFIX+a.serverId);this.container=L$(a.id);this.header=L$(Light._PH_PREFIX+a.serverId);this.headerButton=L$(Light._PB_PREFIX+a.serverId)};WindowSkin2.prototype.focus=function(b){var a=++Light.maxZIndex;if(b.popup!=null&&b.popup&&b.isNew==null){a=a+1000}if(b.location!=1){this.window.style.zIndex=a}else{this.window.style.zIndex=0}};WindowSkin2.prototype.show=function(a){this.hidden=false;this.window.style.visibility="visible"};WindowSkin2.prototype.hide=function(a){this.hidden=true;this.window.style.visibility="hidden"};WindowSkin2.prototype.position=function(b){this.window.style.width=b.width;this.header.style.width=b.width;this.container.style.width=b.width;var a=b.top;if(typeof b.popup!="undefined"){if(!b.popup){if(typeof b.location!="undefined"&&b.location==1){a=b.top+20}}}if(document.all){this.window.style.posLeft=b.left;this.window.style.posTop=a}else{this.window.style.left=b.left;this.window.style.top=a}this.focus(b)};WindowSkin2.prototype.minimize=function(a){this.window.removeChild(this.header);this.header=this.createPortletHeader(a,this);this.headerButton=this.createPortletHeaderButton(a);this.header.appendChild(this.headerButton);this.window.insertBefore(this.header,this.container);this.position(a)};WindowSkin2.prototype.maximize=function(a){this.window.removeChild(this.header);this.header=this.createPortletHeader(a,this);this.headerButton=this.createPortletHeaderButton(a);this.header.appendChild(this.headerButton);this.window.insertBefore(this.header,this.container);this.position(a)};WindowSkin2.prototype.close=function(b){var a=L$("panel_"+b.parent.serverId);this.window.removeChild(this.header);this.window.removeChild(this.container);Light.portal.content.className="portal-content";if(typeof b.popup!="undefined"&&!b.popup&&b.isNew==null){Light.portal.container.removeChild(this.window)}else{if(b.popup&&b.location&&b.location==4){document.body.removeChild(this.window)}else{a.removeChild(this.window)}}};WindowSkin2.prototype.refreshWindow=function(a){this.window.removeChild(this.header);this.window.removeChild(this.container);this.header=this.createPortletHeader(a,this);this.headerButton=this.createPortletHeaderButton(a);this.container=this.createPortletContainer(a);this.header.appendChild(this.headerButton);this.window.appendChild(this.header);this.window.appendChild(this.container);this.position(a)};WindowSkin2.prototype.refreshHeader=function(a){this.window.removeChild(this.header);this.header=this.createPortletHeader(a,this);this.headerButton=this.createPortletHeaderButton(a);this.header.appendChild(this.headerButton);this.window.insertBefore(this.header,this.container);if(this.hidden){this.hide(a)}};WindowSkin2.prototype.refreshButtons=function(a){this.window.removeChild(this.header);this.header=this.createPortletHeader(a,this);this.headerButton=this.createPortletHeaderButton(a);this.header.appendChild(this.headerButton);this.window.insertBefore(this.header,this.container);this.position(a)};WindowSkin2.prototype.createPortletWindow=function(b){var a=document.createElement("div");a.id=Light._PW_PREFIX+b.serverId;if(typeof b.popup!="undefined"&&!b.popup&&typeof b.location!="undefined"&&b.location!=1){a.style.margin="0px "}else{a.style.position="absolute"}a.className="portlet2";if(b.location!=1){a.style.zIndex=++Light.maxZIndex}if(b&&b.contentBgColor&&b.contentBgColor.length>0){a.style.backgroundColor=b.contentBgColor}else{if(Light.portal.data.portletWindowTransparent==false&&b.transparent==false){a.style.backgroundColor="#ffffff"}}return a};WindowSkin2.prototype.createPortletHeader=function(g,d){var a=document.createElement("div");a.id=Light._PH_PREFIX+g.serverId;if(!g.minimized){a.className="portlet2-header";if(g.barBgColor){a.style.backgroundImage="none";a.style.backgroundColor=g.barBgColor}}else{a.className="portlet2-header-min"}if((Light.currentTab.isMoveable&&g.allowMove)||(typeof g.popup!="undefined"&&g.popup)){a.onmousedown=function(h){g.focus();g.moveBegin(h)};a.style.cursor="move"}else{a.onmousedown=function(h){g.focus()}}a.onmouseover=function(h){d.headerButton.style.visibility="visible"};a.onmouseout=function(h){d.headerButton.style.visibility="hidden"};var f=document.createElement("span");var b="";if(g.showIcon&&g.icon){if(g.icon.indexOf("/")>=0){if(g.icon.substring(0,4)=="http"){b="<img src='"+g.icon+"' height='16' width='16' />"}else{b="<img src='"+Light.getContextPath()+g.icon+"' height='16' width='16'/>"}}else{var c=g.icon.split(" ");var e="";if(c.length>1){e=c[0]}b="<span class='"+e+"'><span class='"+g.icon+"'></span></span>"}}if(g.url){b=b+"<a href='"+g.url+"' target='_blank' style='margin-left:5px;'>";if(g.barFontColor){b=b+"<font color='"+g.barFontColor+"'>"}b=b+g.title;if(g.barFontColor){b=b+"</font>"}b=b+"</a>"}else{b=b+"<label style='margin-left:5px;'>"+g.title+"</label>"}f.innerHTML=b;f.className="portlet2-header-title";if(g.barFontColor){f.style.color=g.barFontColor}a.appendChild(f);return a};WindowSkin2.prototype.createPortletHeaderButton=function(j){var e=document.createElement("div");e.id=Light._PB_PREFIX+j.serverId;e.className="portlet2-header-button";e.style.visibility="hidden";if(j.closeable){var g=document.createElement("span");g.className="icons";g.innerHTML=this.getCloseButton();g.onclick=function(){j.close();j.moveAllowed()};g.onmousedown=function(){j.moveCancel()};e.appendChild(g)}if(j.allowMaximized){var a=document.createElement("span");a.className="icons";if(j.maximized){a.innerHTML=this.getRestoreButton()}else{a.innerHTML=this.getMaxButton()}a.onclick=function(){j.maximize();j.moveAllowed()};a.onmousedown=function(){j.moveCancel()};e.appendChild(a)}if(j.allowMinimized){var c=document.createElement("span");c.className="icons";if(j.minimized){c.innerHTML=this.getRestoreButton()}else{c.innerHTML=this.getMinButton()}c.onclick=function(){j.minimize();j.moveAllowed()};c.onmousedown=function(){j.moveCancel()};e.appendChild(c)}if(j.configMode){var b=document.createElement("span");b.className="icons";if(j.mode==Light._CONFIG_MODE){b.innerHTML=this.getCancelConfigButton();b.onclick=function(){j.cancelConfig();j.moveAllowed()}}else{b.innerHTML=this.getConfigButton();b.onclick=function(){j.config();j.moveAllowed()}}b.onmousedown=function(){j.moveCancel()};e.appendChild(b)}if(j.helpMode){var d=document.createElement("span");d.className="icons";if(j.mode==Light._HELP_MODE){d.innerHTML=this.getCancelHelpButton();d.onclick=function(){j.cancelHelp();j.moveAllowed()}}else{d.innerHTML=this.getHelpButton();d.onclick=function(){j.help();j.moveAllowed()}}d.onmousedown=function(){j.moveCancel()};e.appendChild(d)}if(j.editMode){var h=document.createElement("span");h.className="icons";if(j.mode==Light._EDIT_MODE){h.innerHTML=this.getCancelEditButton();h.onclick=function(){j.cancelEdit();j.moveAllowed()}}else{h.innerHTML=this.getEditButton();h.onclick=function(){j.edit();j.moveAllowed()}}h.onmousedown=function(){j.moveCancel()};e.appendChild(h)}if(j.refreshMode){var f=document.createElement("span");f.className="icons";f.innerHTML=this.getRefreshButton();f.onclick=function(){j.refresh();j.moveAllowed()};f.onmousedown=function(){j.moveCancel()};e.appendChild(f)}return e};WindowSkin2.prototype.createPortletContainer=function(b){var a=document.createElement("div");a.id=b.id;a.onmousedown=function(){b.focus()};return a};WindowSkin21.prototype=new WindowSkin2;WindowSkin21.prototype.constructor=WindowSkin21;function WindowSkin21(){WindowSkin2.call(this)}WindowSkin21.prototype.createPortletContainer=function(e){var d=document.createElement("div");d.id=e.id+"_container";d.onmousedown=function(){e.focus()};var b=document.createElement("div");b.className="chattingBox";b.id=e.id;d.container=b;d.appendChild(b);if(!e.minimized){var a=document.createElement("div");var c={id:b.id};a.innerHTML=Light.getViewTemplate("chattingInput.jst",c);d.appendChild(a)}return d};WindowSkin21.prototype.createPortletHeaderButton=function(k){var f=document.createElement("div");f.className="portlet2-header-button";f.id=Light._PB_PREFIX+k.serverId;if(k.closeable){var j=document.createElement("span");j.className="icons";j.innerHTML=this.getCloseButton();j.onclick=function(){k.close();k.moveAllowed()};j.onmousedown=function(){k.moveCancel()};f.appendChild(j)}if(k.allowPopout){var b=document.createElement("span");b.className="icons";if(k.isPopout){b.innerHTML=this.getRestoreButton()}else{b.innerHTML=this.getPopoutButton()}b.onclick=function(){k.popout();k.moveAllowed()};b.onmousedown=function(){k.moveCancel()};f.appendChild(b)}if(k.allowMaximized){var a=document.createElement("span");a.className="icons";if(k.maximized){a.innerHTML=this.getRestoreButton()}else{a.innerHTML=this.getMaxButton()}a.onclick=function(){k.maximize();k.moveAllowed()};a.onmousedown=function(){k.moveCancel()};f.appendChild(a)}if(k.allowMinimized){var d=document.createElement("span");d.className="icons";if(k.minimized){d.innerHTML=this.getRestoreButton()}else{d.innerHTML=this.getMinButton()}d.onclick=function(){k.minimize();k.moveAllowed()};d.onmousedown=function(){k.moveCancel()};f.appendChild(d)}if(k.configMode){var c=document.createElement("span");c.className="icons";if(k.mode==Light._CONFIG_MODE){c.innerHTML=this.getCancelConfigButton();c.onclick=function(){k.cancelConfig();k.moveAllowed()}}else{c.innerHTML=this.getConfigButton();c.onclick=function(){k.config();k.moveAllowed()}}c.onmousedown=function(){k.moveCancel()};f.appendChild(c)}if(k.helpMode){var e=document.createElement("span");e.className="icons";if(k.mode==Light._HELP_MODE){e.innerHTML=this.getCancelHelpButton();e.onclick=function(){k.cancelHelp();k.moveAllowed()}}else{e.innerHTML=this.getHelpButton();e.onclick=function(){k.help();k.moveAllowed()}}e.onmousedown=function(){k.moveCancel()};f.appendChild(e)}if(k.editMode){var h=document.createElement("span");h.className="icons";if(k.mode==Light._EDIT_MODE){h.innerHTML=this.getCancelEditButton();h.onclick=function(){k.cancelEdit();k.moveAllowed()}}else{h.innerHTML=this.getEditButton();h.onclick=function(){k.edit();k.moveAllowed()}}h.onmousedown=function(){k.moveCancel()};f.appendChild(h)}if(k.refreshMode){var g=document.createElement("span");g.className="icons";g.innerHTML=this.getRefreshButton();g.onclick=function(){k.refresh();k.moveAllowed()};g.onmousedown=function(){k.moveCancel()};f.appendChild(g)}return f};WindowSkin3.prototype=new WindowSkin2;WindowSkin3.prototype.constructor=WindowSkin3;function WindowSkin3(){WindowSkin2.call(this);this.type="WindowSkin3"}WindowSkin3.prototype.createPortletHeaderButton=function(d){d.allowMinimized=false;var c=document.createElement("div");c.id=Light._PB_PREFIX+d.serverId;c.className="portlet2-header-button";c.style.visibility="hidden";if(d.configMode){var a=document.createElement("span");a.className="icons";if(d.mode==Light._CONFIG_MODE){a.innerHTML=this.getCancelConfigButton();a.onclick=function(){d.cancelConfig();d.moveAllowed()}}else{a.innerHTML=this.getConfigButton();a.onclick=function(){d.config();d.moveAllowed()}}a.onmousedown=function(){d.moveCancel()};c.appendChild(a)}if(d.refreshMode){var b=document.createElement("span");b.className="icons";b.innerHTML=this.getRefreshButton();b.onclick=function(){d.refresh();d.moveAllowed()};b.onmousedown=function(){d.moveCancel()};c.appendChild(b)}return c};WindowSkin3.prototype.minimize=function(a){};WindowSkin4.prototype=new WindowSkin3;WindowSkin4.prototype.constructor=WindowSkin4;function WindowSkin4(){WindowSkin3.call(this);this.type="WindowSkin4"}WindowSkin4.prototype.createPortletWindow=function(b){var a=document.createElement("div");a.id=Light._PW_PREFIX+b.serverId;a.style.position="absolute";a.className="portlet2";a.style.zIndex=++Light.maxZIndex;if(b&&b.contentBgColor&&b.contentBgColor.length>0){a.style.backgroundColor=b.contentBgColor}else{if(Light.portal.data.portletWindowTransparent==false&&b.transparent==false){a.style.backgroundColor="#ffffff"}}a.onmouseover=function(){b.window.header.style.visibility="visible"};a.onmouseout=function(){b.window.header.style.visibility="hidden"};return a};WindowSkin4.prototype.createPortletHeader=function(d,c){var e=Light.newElement({element:"div",id:Light._PH_PREFIX+d.serverId,style:{cssText:"visibility:hidden;position:absolute;right:0px;"}});if(d.configMode){var a=(d.mode==Light._CONFIG_MODE)?true:false;var b=Light.newElement({element:"input",type:"image",style:{cssText:"border:0px;-moz-opacity:1;filter:alpha(opacity=100); height:14; width:14;"},title:(a)?Light.getMessage("VIEW_MODE"):Light.getMessage("CONFIG_MODE"),src:Light.getThemePath()+((a)?"/images/leave_config_on.gif":"/images/config_on.gif"),onclick:function(){if(a){d.cancelConfig()}else{d.config()}}});e.appendChild(b)}return e};WindowSkin4.prototype.createPortletHeaderButton=function(a){a.allowMinimized=false;return Light.newElement({element:"div",id:Light._PB_PREFIX+a.serverId})};WindowSkin4.prototype.position=function(b){this.window.style.width=b.width;this.container.style.width=b.width;var a=b.top;if(typeof b.popup!="undefined"){if(!b.popup){if(typeof b.location!="undefined"&&b.location==1){a=b.top+20}}}setPosition(this.window,b.left,a);this.focus(b)};WindowSkin5.prototype=new WindowSkin4;WindowSkin5.prototype.constructor=WindowSkin5;function WindowSkin5(){WindowSkin4.call(this);this.type="WindowSkin5"}WindowSkin5.prototype.createPortletWindow=function(a){return Light.newElement({element:"div",id:Light._PW_PREFIX+a.serverId,style:{cssText:"position:absolute;z-index:"+(++Light.maxZIndex)+((a&&a.contentBgColor)?";backgroundColor:"+a.contentBgColor:((Light.portal.data.portletWindowTransparent==false&&a.transparent==false)?";backgroundColor:#ffffff":""))},onmouseover:function(){a.window.header.style.visibility="visible"},onmouseout:function(){a.window.header.style.visibility="hidden"}})};